<?xml version="1.0" encoding="UTF-8"?><unload unload_date="2020-01-30 20:01:03"><sys_remote_update_set action="INSERT_OR_UPDATE"><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><application_name>Human Resources: Core</application_name><application_scope>sn_hr_core</application_scope><application_version>17.z.1.10</application_version><collisions/><commit_date/><deleted/><description/><inserted/><name>HR Core test</name><origin_sys_id/><parent/><release_date/><remote_base_update_set/><remote_parent_id/><remote_sys_id>25a1cd484f313300ad404a10a310c7d9</remote_sys_id><state>loaded</state><summary/><sys_class_name>sys_remote_update_set</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>dcda892fdb2600103dd39235ca9619d6</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><update_set/><update_source/><updated/></sys_remote_update_set><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>asmt_metric_definition_611222f34f2a3300ad404a10a310c7f1</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="asmt_metric_definition"><asmt_metric_definition action="INSERT_OR_UPDATE"><display>1</display><metric display_value="">50e1aeb34f2a3300ad404a10a310c764</metric><order>1</order><selected_image/><sys_class_name>asmt_metric_definition</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:49:39</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>611222f34f2a3300ad404a10a310c7f1</sys_id><sys_mod_count>0</sys_mod_count><sys_name>1</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>asmt_metric_definition_611222f34f2a3300ad404a10a310c7f1</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:49:39</sys_updated_on><unselected_image/><value>1</value></asmt_metric_definition><sys_translated_text action="delete_multiple" query="documentkey=611222f34f2a3300ad404a10a310c7f1"/></record_update>]]></payload><payload_hash>-1193331703</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>10dac92fdb2600103dd39235ca96193d</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd67fe640000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>1</target_name><type>Assessment Metric Definition</type><update_domain>global</update_domain><update_guid>691222f3de2a3300772f7beb758e4ff2</update_guid><update_guid_history>691222f3de2a3300772f7beb758e4ff2:-1193331703</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sysevent_register_325370019f22120047a2d126c42e7064</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sysevent_register"><sysevent_register action="INSERT_OR_UPDATE"><caller_access>1</caller_access><description/><event_name>sn_hr_core_case.changed</event_name><fired_by>When the state, assignee, assignment group and work notes are changed</fired_by><queue/><suffix/><sys_class_name>sysevent_register</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2015-03-20 20:16:35</sys_created_on><sys_id>325370019f22120047a2d126c42e7064</sys_id><sys_mod_count>3</sys_mod_count><sys_name>sn_hr_core_case.changed</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sysevent_register_325370019f22120047a2d126c42e7064</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:35</sys_updated_on><table>sn_hr_core_case</table></sysevent_register></record_update>]]></payload><payload_hash>-1601117929</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>10dac92fdb2600103dd39235ca961940</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0057940c0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case</table><target_name>sn_hr_core_case.changed</target_name><type>Event Registration</type><update_domain>global</update_domain><update_guid>3afd1180437273000207d6a0a6534c63</update_guid><update_guid_history>3afd1180437273000207d6a0a6534c63:-1601117929,bafd11805572730094b458929fd55c62:-229634698</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sysevent_register_f65370019f22120047a2d126c42e7064</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sysevent_register"><sysevent_register action="INSERT_OR_UPDATE"><caller_access>1</caller_access><description/><event_name>sn_hr_core_case.updated</event_name><fired_by/><queue/><suffix/><sys_class_name>sysevent_register</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2013-11-04 11:50:28</sys_created_on><sys_id>f65370019f22120047a2d126c42e7064</sys_id><sys_mod_count>2</sys_mod_count><sys_name>sn_hr_core_case.updated</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sysevent_register_f65370019f22120047a2d126c42e7064</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:36</sys_updated_on><table>sn_hr_core_case</table></sysevent_register></record_update>]]></payload><payload_hash>-1789921137</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>10dac92fdb2600103dd39235ca961943</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005797f10000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case</table><target_name>sn_hr_core_case.updated</target_name><type>Event Registration</type><update_domain>global</update_domain><update_guid>cffd1180527273001b23d626fc406493</update_guid><update_guid_history>cffd1180527273001b23d626fc406493:-1789921137,43fd11801372730091f534e4aa1a5993:1917583888</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_26986ec54f303300ad404a10a310c747</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access>public</access><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>true</is_extendable><label>HR Case</label><live_feed_enabled>true</live_feed_enabled><name>sn_hr_core_case</name><number_ref display_value="HRC">309aace5531312002b76da86a11c085e</number_ref><provider_class/><read_access>true</read_access><super_class display_value="Task" name="task">32b2bf6581131300aadba4a47c598e1b</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2016-05-06 22:40:32</sys_created_on><sys_id>26986ec54f303300ad404a10a310c747</sys_id><sys_mod_count>5</sys_mod_count><sys_name>HR Case</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_26986ec54f303300ad404a10a310c747</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:09</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>575087290</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>10dac92fdb2600103dd39235ca961946</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005731b50000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case</table><target_name>HR Case</target_name><type>Table</type><update_domain>global</update_domain><update_guid>b8ed5d406b72730060a526e30dbfd6ab</update_guid><update_guid_history>b8ed5d406b72730060a526e30dbfd6ab:575087290,6ced5d40be72730095bca1b836145282:1061502553</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_5798aec54f303300ad404a10a310c720</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>User Fields On Case</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_service_approval_option</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:29</sys_created_on><sys_id>5798aec54f303300ad404a10a310c720</sys_id><sys_mod_count>3</sys_mod_count><sys_name>User Fields On Case</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_5798aec54f303300ad404a10a310c720</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:15</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>1165760551</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>10dac92fdb2600103dd39235ca961949</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0057484a0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_service_approval_option</table><target_name>User Fields On Case</target_name><type>Table</type><update_domain>global</update_domain><update_guid>5eed9d40277273000eaa25faef8eed1a</update_guid><update_guid_history>5eed9d40277273000eaa25faef8eed1a:1165760551,0aed9d40c47273002938bf8b48bdfa17:641423528</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_85a862094f303300ad404a10a310c780</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Disciplinary Issue Type</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_disciplinary_issue_type</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:33</sys_created_on><sys_id>85a862094f303300ad404a10a310c780</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Disciplinary Issue Type</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_85a862094f303300ad404a10a310c780</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:20</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>320607176</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>10dac92fdb2600103dd39235ca96194c</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00575c5a0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_disciplinary_issue_type</table><target_name>HR Disciplinary Issue Type</target_name><type>Table</type><update_domain>global</update_domain><update_guid>efed9d401972730011a8fcd6517b08aa</update_guid><update_guid_history>efed9d401972730011a8fcd6517b08aa:320607176,9bed9d407472730011d3965c573345a7:1539038857</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_cf986ec54f303300ad404a10a310c7c4</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>Compensation Salary</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_salary</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="Compensation" name="sn_hr_core_compensation">4f986ec54f303300ad404a10a310c7c2</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:28</sys_created_on><sys_id>cf986ec54f303300ad404a10a310c7c4</sys_id><sys_mod_count>3</sys_mod_count><sys_name>Compensation Salary</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_cf986ec54f303300ad404a10a310c7c4</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:26</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>2139464084</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>10dac92fdb2600103dd39235ca96194f</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005773200000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_salary</table><target_name>Compensation Salary</target_name><type>Table</type><update_domain>global</update_domain><update_guid>70fddd407872730021676f0865699b59</update_guid><update_guid_history>70fddd407872730021676f0865699b59:2139464084,38fddd4035727300fb14295c9b4a0830:-1183897835</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_dictionary_sn_hr_core_nps_score_u_case</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update><sys_dictionary action="INSERT_OR_UPDATE" element="u_case" table="sn_hr_core_nps_score"><active>true</active><array>false</array><array_denormalized>false</array_denormalized><attributes/><audit>false</audit><calculation/><choice>0</choice><choice_field/><choice_table/><column_label>Case</column_label><comments/><create_roles/><default_value/><defaultsort/><delete_roles/><dependent/><dependent_on_field/><display>false</display><dynamic_creation>false</dynamic_creation><dynamic_creation_script/><dynamic_default_value/><dynamic_ref_qual/><element>u_case</element><element_reference>false</element_reference><foreign_database/><function_definition/><function_field>false</function_field><internal_type display_value="Reference">reference</internal_type><mandatory>false</mandatory><max_length>32</max_length><name>sn_hr_core_nps_score</name><next_element/><primary>false</primary><read_only>false</read_only><read_roles/><reference display_value="" name="sn_hr_core_case">sn_hr_core_case</reference><reference_cascade_rule/><reference_floats>false</reference_floats><reference_key/><reference_qual/><reference_qual_condition/><reference_type/><sizeclass/><spell_check>false</spell_check><staged>false</staged><sys_class_name>sys_dictionary</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:54:35</sys_created_on><sys_id>8e3362374f2a3300ad404a10a310c7cf</sys_id><sys_mod_count>0</sys_mod_count><sys_name>Case</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_dictionary_sn_hr_core_nps_score_u_case</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:54:35</sys_updated_on><table_reference>false</table_reference><text_index>false</text_index><unique>false</unique><use_dependent_field>false</use_dependent_field><use_dynamic_default>false</use_dynamic_default><use_reference_qualifier>simple</use_reference_qualifier><virtual>false</virtual><widget/><write_roles/><xml_view>false</xml_view></sys_dictionary></record_update>]]></payload><payload_hash>-526904906</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>10dac92fdb2600103dd39235ca961952</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd6c866c0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>HR NPS Score.Case</target_name><type>Dictionary</type><update_domain>global</update_domain><update_guid>8e3362372a2a33009853bd26f5f461df</update_guid><update_guid_history>8e3362372a2a33009853bd26f5f461df:-526904906</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_restricted_caller_access_0341ad044f727300ad404a10a310c744</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_restricted_caller_access"><sys_restricted_caller_access action="INSERT_OR_UPDATE"><operation>read</operation><source>9c71da339373320092051d1e867ffb42</source><source_scope display_value="Global">global</source_scope><source_table>sys_script_include</source_table><source_type>2</source_type><status>2</status><sys_class_name>sys_restricted_caller_access</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 14:45:04</sys_created_on><sys_id>0341ad044f727300ad404a10a310c744</sys_id><sys_mod_count>0</sys_mod_count><sys_name>global</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_restricted_caller_access_0341ad044f727300ad404a10a310c744</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:45:04</sys_updated_on><target name="sn_hr_core_service" target_table="sys_db_object">af98aec54f303300ad404a10a310c7ae</target><target_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</target_scope><target_table>sys_db_object</target_table><target_type>1</target_type></sys_restricted_caller_access></record_update>]]></payload><payload_hash>1711003077</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>10dac92fdb2600103dd39235ca961955</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0064d7fd0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>global</target_name><type>Restricted Caller Access Privilege</type><update_domain>global</update_domain><update_guid>4b41ad04ab727300204bac5f596d3644</update_guid><update_guid_history>4b41ad04ab727300204bac5f596d3644:1711003077</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_24c782869f202200d9011977677fcf89</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;
  &lt;sys_script_include action="INSERT_OR_UPDATE"&gt;
    &lt;access&gt;public&lt;/access&gt;
    &lt;active&gt;true&lt;/active&gt;
    &lt;api_name&gt;sn_hr_core.hr_CaseUtils&lt;/api_name&gt;
    &lt;caller_access&gt;2&lt;/caller_access&gt;
    &lt;client_callable&gt;false&lt;/client_callable&gt;
    &lt;description/&gt;
    &lt;name&gt;hr_CaseUtils&lt;/name&gt;
    &lt;script&gt;&lt;![CDATA[var hr_CaseUtils = Class.create();
hr_CaseUtils.prototype = {
	initialize : function(_case, _gs) {
		if (!_case)
			return;

		this._case = _case;
		this._gs = _gs || gs;

		// Other object scripts have a reference here as they are used throughout
		this.hrProfile = new hr_Profile(this._case.hr_profile, this._gs);
		this.hrUtils = new hr_Utils();

		this._ignoreFields = {
			'opened_for' : '',
			'priority' : '',
			'short_description' : '',
			'description' : ''
		};
		this._requiresUserOrProfileCreation = {
			'request_onboarding':''
		};  
	},

	populateCase : function(service, questions, source) {
		var hrServiceGr = new GlideRecord(hr.TABLE_SERVICE);
		hrServiceGr.get(service);
		if(hrServiceGr.isValid() &amp;&amp; hrServiceGr.getValue('active')) {
			var serviceName = hrServiceGr.getValue('name');
			var serviceValue = hrServiceGr.getValue('value');

			this._logDebug("Creating new HR Case record for service name: " + serviceName);

			this._setServiceFields(hrServiceGr);
			this._setGeneralFields(serviceValue, questions);
			this._setCommonFields(hrServiceGr, questions, source);

		}
	},

	/*
    * Updates the HR Service related fields into the Case.
	* Note: template kicked off when case updated (after this script runs)
	*
    * @param hrServiceGr The service glide record
    */
	_setServiceFields : function(hrServiceGr) {
		this._case.hr_service = hrServiceGr.getUniqueValue();
		this._case.topic_detail = hrServiceGr.topic_detail;
		this._case.topic_category = hrServiceGr.topic_detail.topic_category;
		this._case.template = hrServiceGr.template;
	},

	/*
    * Updates the general HR Case related objects like the InfoMessage
    *
    * @param producer Holds questions/answers (Is not a record producer glide record)
    * @param category The category of the case, also drives the template used in case
    */
	_setGeneralFields : function(serviceValue, questions) {
		var parameters = this._getParametersFromQuestions(questions);

		// Create user and profile for the subject person
		if (this._requiresUserOrProfileCreation.hasOwnProperty(serviceValue)){
			parameters['onboarding'] = true;
			var subject_person_profile = this.hrProfile.createOrGetProfileFromParameters(parameters); // create subject person user and profile
			this._case.subject_person = subject_person_profile.user.sys_id;
		}

		// Retrieve the profile of the 'opened_for' user
		// a question might have been mapped to opened_for, in which case we grab from case
		if (!parameters['opened_for']) {
			if (this._case.opened_for)
				parameters['opened_for'] = this._case.opened_for;
			else
				parameters['opened_for'] = gs.getUserID();
		}

		//Set opened for profile
		this._grProfile = this.hrProfile.getProfileFromParameters(parameters);

		// Retrieve the job information from parameters
		// In some cases, a question might have been mapped to subject_person_job field, in which case we grab from case
		if (parameters['job']) 
			this._job = parameters['job'];
		else
			if (this._case.subject_person_job)
				this._job = this._case.subject_person_job;
		else if(parameters['concurrent_job'] &amp;&amp; parameters['concurrent_job'] == 'true')
			this._job = this.hrUtils.createJobFromParameters(this._grProfile, parameters, false);
	},

	/*
    * Set the common Case fields across all categories.
    * Note: this._case is the new Case
    */
	_setCommonFields : function(hrServiceGr, questions, source) {
		var logged_in = gs.getUserDisplayName();
		var serviceName = hrServiceGr.getDisplayValue('name');
		var serviceValue = hrServiceGr.getValue('value');
		this._case.contact_type = source;

		// a question might have been mapped to opened_for and we do not want to override
		if (!this._case.opened_for)
			this._case.opened_for = this._grProfile.user.sys_id;

		this._case.hr_profile = this._grProfile.sys_id;
		var spUser = this._case.subject_person || this._case.opened_for;
		this._case.subject_person_job = this._job? this._job : this.hrUtils.getPrimaryJob(spUser);

		var openedForPriority = this._getPriority(this._grProfile.user,  this._case.template);
		var subjectPersonPriority = this._getPriority(this._case.subject_person,  this._case.template);
		var highestPriority =  openedForPriority &lt; subjectPersonPriority ? openedForPriority : subjectPersonPriority;
		this._case.priority = highestPriority;
		this._case.payload = new global.JSON().encode(this._getParametersFromQuestions(questions));
		this._case.comments = gs.getMessage('User {0} has initiated a {1} request', [ logged_in, serviceName ]);
		this._case.short_description = gs.getMessage("{0} case for {1}", [ serviceName, this._grProfile.user.name ]);
		this._case.description = this._getDescriptionFromAnswers(questions, serviceValue);
	},

	/*
    * Builds a description field with changed or new variables.  Has to determine the original value and
    * display value for each of the fields coming in.
    */
	_getDescriptionFromAnswers : function(questions, hrServiceValue) {
		var filledValues = '';
		for (var i = 0; i &lt; questions.length; i++) {
			var question = questions[i];

			// Ignore the 'Opened for', 'priority' fields
			if (!this._ignoreFields.hasOwnProperty(question.name) &amp;&amp; question.question.trim() != "") {
				// Checking that the answer does not match the fields original value
				var originalDisplayValue = this.hrProfile.getDisplayValue(this._grProfile, question.name, true);
				var originalValue = this.hrProfile.getDisplayValue(this._grProfile, question.name, false);

				if ((question.answer != originalValue &amp;&amp; question.answer != originalDisplayValue) || this._requiresUserOrProfileCreation.hasOwnProperty(hrServiceValue)) {

					// Produces a string giving 'Field: newValue (original value: oldValue)'
					filledValues += question.question + ': ' + question.answerDisplayValue;

					if ((originalValue || originalDisplayValue) &amp;&amp; !this._requiresUserOrProfileCreation.hasOwnProperty(hrServiceValue)) {
						var txt = gs.getMessage(' (original value: {0})', originalDisplayValue);
						filledValues += txt;
					}

					filledValues += '\n';
				}
			}
		}

		var additionalDescription = '';
		if (filledValues) {
			var spacer = (gs.nil(this._case.description)) ? '': '\n\n' ;
			var msg = gs.getMessage('The following fields have been provided:');
			additionalDescription = spacer +  msg + '\n' + filledValues;
		}

		return this._case.description + additionalDescription;
	},


	getQuestion : function(question, variableName, answer, fieldRaw, variableOrder, displayValue) {
		return {
			question : question+"",
			name : variableName+"",
			answer : answer+"",
			raw : fieldRaw+"",
			order : variableOrder+"",
			answerDisplayValue : displayValue+""
		};
	},

	/*
    * Simplify the complex question object into a simpler object
    */
	_getParametersFromQuestions : function(questions) {
		var parameters = {};

		for (var i = 0; i &lt; questions.length; i++) {
			parameters[questions[i].name] = questions[i].raw;
		}

		return parameters;
	},


	_getPriority : function(user, templateId) {
		if (user.vip == true) {
			var defaultPriority = new hr_CaseAjax().getDefaultVIPPriority();
			if (defaultPriority)
				return defaultPriority;
			else
				return '2'; // high
		} else {
			var result = this._getTemplateProperty(templateId, 'priority');
			if (!gs.nil(result))
				return result;
			else
				return '4'; // low
		}
	},

	_getTemplateProperty : function(templateSysId, field) {
		return new sn_hr_core.hr_TemplateUtils()._getTemplateProperty(templateSysId, field);
	},

	/*
    * Convenience method to prevent the code becoming unreadable from the useful debug statements
    */
	_logDebug : function(str) {
		if (gs.isDebugging())
			gs.debug(str);
	},

	caseLink: function(caseGr) { 
		if (!caseGr || !caseGr.getUniqueValue()) 
			return;
		var sysId = caseGr.getUniqueValue();
		var tableName = caseGr.sys_class_name;
		var number = caseGr.number;
		var caseUrl;
		var isWorkspace = (typeof RP === 'undefined');
		if (isWorkspace) {
			caseUrl = '&lt;a href="/now/workspace/hr/record/' + tableName + '/'  + sysId + '" target="_blank"&gt;' + number + '&lt;/a&gt;';
		} else {
			caseUrl = '&lt;a href="/nav_to.do?uri=/' + tableName + '.do' + '?sys_id=' + sysId + '" target="_blank"&gt;' + number + '&lt;/a&gt;';
		}

		return caseUrl;
	},

	type: 'hr_CaseUtils'
};]]&gt;&lt;/script&gt;
    &lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;
    &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
    &lt;sys_created_on&gt;2016-07-12 21:24:05&lt;/sys_created_on&gt;
    &lt;sys_id&gt;24c782869f202200d9011977677fcf89&lt;/sys_id&gt;
    &lt;sys_mod_count&gt;99&lt;/sys_mod_count&gt;
    &lt;sys_name&gt;hr_CaseUtils&lt;/sys_name&gt;
    &lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;
    &lt;sys_policy/&gt;
    &lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;
    &lt;sys_update_name&gt;sys_script_include_24c782869f202200d9011977677fcf89&lt;/sys_update_name&gt;
    &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
    &lt;sys_updated_on&gt;2019-08-07 00:49:01&lt;/sys_updated_on&gt;
  &lt;/sys_script_include&gt;
&lt;/record_update&gt;</payload><payload_hash>-1544496525</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>true</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>10dac92fdb2600103dd39235ca961958</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0057833f0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_CaseUtils</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>1356452bf2260010eb6c69b217fb38d0</update_guid><update_guid_history>1356452bf2260010eb6c69b217fb38d0:-1544496525,39fddd40c472730042ec3e4a3ea4fcc3:-2114307016,71fddd40b67273006c0f7cdbc7e79fc1:-1632860905</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_83311704534332003585c3c606dc340d</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;public&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;sn_hr_core.hr_EmailUtil&lt;/api_name&gt;&lt;caller_access&gt;1&lt;/caller_access&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;description&gt;Contains utilities for various email-related functionality in the HR applications&lt;/description&gt;&lt;name&gt;hr_EmailUtil&lt;/name&gt;&lt;script&gt;&lt;![CDATA[var hr_EmailUtil = Class.create();
hr_EmailUtil.prototype = {
    type: 'hr_EmailUtil'
};

//Replaces tokens in text with fields from the corresponding record
hr_EmailUtil.replaceFieldTokens = function(text, record) {
	while(text.indexOf('${') &gt;= 0 &amp;&amp; text.indexOf('}') &gt;= 0) {
		var substr = text.slice(text.indexOf('${'), text.indexOf('}') + 1);
		var field = (substr.slice(0,substr.length - 1)).slice(2);
		
		text = text.replace(substr, record.getElement(field).getDisplayValue());
	}
	return text;
};

hr_EmailUtil.getRelevantLinkForUser = function(current, userId) {
	var caseLink = new sn_hr_sp.emailUtil(current).getRelevantLinkForUser(userId);
	return caseLink;
};]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-05-26 00:31:07&lt;/sys_created_on&gt;&lt;sys_id&gt;83311704534332003585c3c606dc340d&lt;/sys_id&gt;&lt;sys_mod_count&gt;3&lt;/sys_mod_count&gt;&lt;sys_name&gt;hr_EmailUtil&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_83311704534332003585c3c606dc340d&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 14:30:33&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload><payload_hash>-1557647668</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>10dac92fdb2600103dd39235ca96195b</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00578dda0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_EmailUtil</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>a2fd11806a727300430d261a0a65d11c</update_guid><update_guid_history>a2fd11806a727300430d261a0a65d11c:-1557647668,a2fd11802b727300972bed01e8864b19:-481956083</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_security_acl_f659e1514f633300ad404a10a310c707</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl"><sys_security_acl action="INSERT_OR_UPDATE"><active>true</active><admin_overrides>true</admin_overrides><advanced>false</advanced><condition/><description>Default access control on sn_hr_core_case_asc</description><name>sn_hr_core_case_asc</name><operation display_value="delete">delete</operation><script/><sys_class_name>sys_security_acl</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-08-27 19:19:47</sys_created_on><sys_id>f659e1514f633300ad404a10a310c707</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sn_hr_core_case_asc</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_security_acl_f659e1514f633300ad404a10a310c707</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-08-27 19:19:47</sys_updated_on><type display_value="record">record</type></sys_security_acl></record_update>]]></payload><payload_hash>1872084610</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>10dac92fdb2600103dd39235ca96195e</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16cd485167d0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case_asc</table><target_name>sn_hr_core_case_asc</target_name><type>Access Control</type><update_domain>global</update_domain><update_guid>3a59e1515e633300f11a525b8fc9b00a</update_guid><update_guid_history>3a59e1515e633300f11a525b8fc9b00a:1872084610</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_ui_style_0bf18c9dc3331200b599b4ad81d3ae12</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ui_style"><sys_ui_style action="INSERT_OR_UPDATE"><alt/><element>subject_person</element><name>sn_hr_core_case</name><style>background-image: url('images/icons/vip.gif');&#13;
background-repeat: no-repeat;&#13;
background-position: 98% 5px;&#13;
padding-right: 30px;</style><sys_class_name>sys_ui_style</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2016-06-02 20:56:55</sys_created_on><sys_id>0bf18c9dc3331200b599b4ad81d3ae12</sys_id><sys_mod_count>1</sys_mod_count><sys_name>sn_hr_core_case</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_ui_style_0bf18c9dc3331200b599b4ad81d3ae12</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:48:39</sys_updated_on><value>javascript:current.subject_person.u_nps_rating == 1</value></sys_ui_style><sys_translated_text action="delete_multiple" query="documentkey=0bf18c9dc3331200b599b4ad81d3ae12"/></record_update>]]></payload><payload_hash>-1456148066</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>10dac92fdb2600103dd39235ca961961</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00681f160000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case</table><target_name>sn_hr_core_case</target_name><type>Style</type><update_domain>global</update_domain><update_guid>6f12e14448727300658e9384927c5ecd</update_guid><update_guid_history>6f12e14448727300658e9384927c5ecd:-1456148066,2712e144c6727300a7e9dbfd9dc629cc:-478133329</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>asmt_condition_f70370019f22120047a2d126c42e7067</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="asmt_condition"><asmt_condition action="INSERT_OR_UPDATE"><active>true</active><assessment display_value="HR Request Satisfaction Survey">730330019f22120047a2d126c42e70e5</assessment><assessment_record/><assessment_record_field/><business_rule display_value="Auto assessment business rule">325330019f22120047a2d126c42e70fa</business_rule><condition table="sn_hr_core_case">state=3^ORstate=4^EQ<item endquery="false" field="state" goto="false" newquery="false" operator="=" or="false" value="3"/><item endquery="false" field="state" goto="false" newquery="false" operator="=" or="true" value="4"/><item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/></condition><description/><duration/><percent_random>50</percent_random><related_field_1>assigned_to</related_field_1><related_field_2>assignment_group</related_field_2><related_field_3>opened_by</related_field_3><related_field_4/><sys_class_name>asmt_condition</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2015-05-01 21:29:00</sys_created_on><sys_id>f70370019f22120047a2d126c42e7067</sys_id><sys_mod_count>9</sys_mod_count><sys_name/><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>asmt_condition_f70370019f22120047a2d126c42e7067</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 11:52:03</sys_updated_on><table>sn_hr_core_case</table><trigger_random>false</trigger_random><user_field>opened_for</user_field></asmt_condition></record_update>]]></payload><payload_hash>1729417883</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>14dac92fdb2600103dd39235ca96193b</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bffc670c80000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case</table><target_name/><type>Trigger Condition</type><update_domain>global</update_domain><update_guid>bcb9b480e0fe33002c45bd663bdbe6b4</update_guid><update_guid_history>bcb9b480e0fe33002c45bd663bdbe6b4:1729417883,18e73cccb2be33007f69421bca9f6462:-1493140443,94e73ccc32be330033cfb01008469161:2070755936</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>asmt_metric_definition_251222f34f2a3300ad404a10a310c7f3</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="asmt_metric_definition"><asmt_metric_definition action="INSERT_OR_UPDATE"><display>2</display><metric display_value="">50e1aeb34f2a3300ad404a10a310c764</metric><order>2</order><selected_image/><sys_class_name>asmt_metric_definition</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:49:39</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>251222f34f2a3300ad404a10a310c7f3</sys_id><sys_mod_count>0</sys_mod_count><sys_name>2</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>asmt_metric_definition_251222f34f2a3300ad404a10a310c7f3</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:49:39</sys_updated_on><unselected_image/><value>2</value></asmt_metric_definition><sys_translated_text action="delete_multiple" query="documentkey=251222f34f2a3300ad404a10a310c7f3"/></record_update>]]></payload><payload_hash>-752278395</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>14dac92fdb2600103dd39235ca96193c</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd67fe870000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>2</target_name><type>Assessment Metric Definition</type><update_domain>global</update_domain><update_guid>251222f3882a3300152a1b6fcb7575f4</update_guid><update_guid_history>251222f3882a3300152a1b6fcb7575f4:-752278395</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sysevent_register_0d4549dec3e23200b599b4ad81d3aeae</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sysevent_register"><sysevent_register action="INSERT_OR_UPDATE"><caller_access>1</caller_access><description/><event_name>sn_hr_core.hr_task_reminder</event_name><fired_by/><queue/><suffix>hr_task_reminder</suffix><sys_class_name>sysevent_register</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-05-07 17:31:05</sys_created_on><sys_id>0d4549dec3e23200b599b4ad81d3aeae</sys_id><sys_mod_count>2</sys_mod_count><sys_name>sn_hr_core.hr_task_reminder</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sysevent_register_0d4549dec3e23200b599b4ad81d3aeae</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:34</sys_updated_on><table>sn_hr_core_task</table></sysevent_register></record_update>]]></payload><payload_hash>-204534072</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>14dac92fdb2600103dd39235ca96193f</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005793180000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_task</table><target_name>sn_hr_core.hr_task_reminder</target_name><type>Event Registration</type><update_domain>global</update_domain><update_guid>32fd1180c37273006dafb847d7d8c94e</update_guid><update_guid_history>32fd1180c37273006dafb847d7d8c94e:-204534072,fefd118055727300e4e1b30422634a4c:-534981559</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sysevent_register_db73ed57536232002b76da86a11c08df</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sysevent_register"><sysevent_register action="INSERT_OR_UPDATE"><caller_access>1</caller_access><description>Fired when one or many approvers are missing for a HR Case</description><event_name>sn_hr_core.missing_approver</event_name><fired_by>Workflow</fired_by><queue/><suffix>missing_approver</suffix><sys_class_name>sysevent_register</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-05-10 22:14:36</sys_created_on><sys_id>db73ed57536232002b76da86a11c08df</sys_id><sys_mod_count>2</sys_mod_count><sys_name>sn_hr_core.missing_approver</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sysevent_register_db73ed57536232002b76da86a11c08df</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:36</sys_updated_on><table>sn_hr_core_case</table></sysevent_register></record_update>]]></payload><payload_hash>505819583</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>14dac92fdb2600103dd39235ca961942</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0057970d0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case</table><target_name>sn_hr_core.missing_approver</target_name><type>Event Registration</type><update_domain>global</update_domain><update_guid>cffd11800d727300d325a619c049ba8a</update_guid><update_guid_history>cffd11800d727300d325a619c049ba8a:505819583,43fd1180447273001f82d0051848478a:594966366</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_12b8ae094f303300ad404a10a310c710</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR PDF Template</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_pdf_template</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="HR Document Template" name="sn_hr_core_document_template">63a8e6094f303300ad404a10a310c739</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:51</sys_created_on><sys_id>12b8ae094f303300ad404a10a310c710</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR PDF Template</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_12b8ae094f303300ad404a10a310c710</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:08</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>1471351849</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>14dac92fdb2600103dd39235ca961945</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00572afa0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_pdf_template</table><target_name>HR PDF Template</target_name><type>Table</type><update_domain>global</update_domain><update_guid>d4ed5d409772730064fffa6859034a6a</update_guid><update_guid_history>d4ed5d409772730064fffa6859034a6a:1471351849,dced5d40367273007fdff307b9be6066:764984328</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_4aa8e2094f303300ad404a10a310c7d4</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Benefit Type</label><live_feed_enabled>true</live_feed_enabled><name>sn_hr_core_benefit_type</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:37</sys_created_on><sys_id>4aa8e2094f303300ad404a10a310c7d4</sys_id><sys_mod_count>4</sys_mod_count><sys_name>HR Benefit Type</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_4aa8e2094f303300ad404a10a310c7d4</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:14</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>1811059301</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>14dac92fdb2600103dd39235ca961948</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005742d20000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_benefit_type</table><target_name>HR Benefit Type</target_name><type>Table</type><update_domain>global</update_domain><update_guid>31ed9d40a7727300c16b4b2a3f3aab02</update_guid><update_guid_history>31ed9d40a7727300c16b4b2a3f3aab02:1811059301,f9ed5d400f727300d2770c26baaef6fe:-1410572954</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_7a986ec54f303300ad404a10a310c79f</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>Client Role Rule</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_client_role_rule</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:28</sys_created_on><sys_id>7a986ec54f303300ad404a10a310c79f</sys_id><sys_mod_count>3</sys_mod_count><sys_name>Client Role Rule</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_7a986ec54f303300ad404a10a310c79f</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:19</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-57721455</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>14dac92fdb2600103dd39235ca96194b</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005757520000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_client_role_rule</table><target_name>Client Role Rule</target_name><type>Table</type><update_domain>global</update_domain><update_guid>cfed9d40e37273007b774a910397bb96</update_guid><update_guid_history>cfed9d40e37273007b774a910397bb96:-57721455,8bed9d40cb7273002a7b32c49401f793:2028748656</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_caa826094f303300ad404a10a310c720</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>false</actions_access><alter_access>false</alter_access><caller_access>1</caller_access><client_scripts_access>false</client_scripts_access><configuration_access>false</configuration_access><create_access>false</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>COE Configuration Matching</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_coe_config_matching</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="Application File" name="sys_metadata">8a12332181131300aadba4a47c598e5e</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:37</sys_created_on><sys_id>caa826094f303300ad404a10a310c720</sys_id><sys_mod_count>3</sys_mod_count><sys_name>COE Configuration Matching</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_caa826094f303300ad404a10a310c720</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:25</sys_updated_on><update_access>false</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-296872858</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>14dac92fdb2600103dd39235ca96194e</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00576d0c0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_coe_config_matching</table><target_name>COE Configuration Matching</target_name><type>Table</type><update_domain>global</update_domain><update_guid>6cfddd409b727300a7ad7128f49ba912</update_guid><update_guid_history>6cfddd409b727300a7ad7128f49ba912:-296872858,64fddd408a727300dee627697a36730f:1783098821</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_eea866094f303300ad404a10a310c747</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Benefit Plan</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_benefit_provider</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:40</sys_created_on><sys_id>eea866094f303300ad404a10a310c747</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Benefit Plan</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_eea866094f303300ad404a10a310c747</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:29</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>883120523</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>14dac92fdb2600103dd39235ca961951</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005780080000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_benefit_provider</table><target_name>HR Benefit Plan</target_name><type>Table</type><update_domain>global</update_domain><update_guid>69fddd4090727300d1353744648fc1aa</update_guid><update_guid_history>69fddd4090727300d1353744648fc1aa:883120523,25fddd4087727300582cc5dcf6f9c9a7:1908754218</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_documentation_sn_hr_core_nps_score_u_score_en</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update><sys_documentation element="u_score" label="Score" language="en" table="sn_hr_core_nps_score"><sys_documentation action="INSERT_OR_UPDATE"><element>u_score</element><help/><hint/><label>Score</label><language>en</language><name>sn_hr_core_nps_score</name><plural>Scores</plural><sys_class_name>sys_documentation</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:45:35</sys_created_on><sys_id>7d2162b34f2a3300ad404a10a310c79a</sys_id><sys_mod_count>0</sys_mod_count><sys_name>Score</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_documentation_sn_hr_core_nps_score_u_score_en</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:45:35</sys_updated_on><url/><url_target/></sys_documentation></sys_documentation></record_update>]]></payload><payload_hash>597255554</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>14dac92fdb2600103dd39235ca961954</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd6446650000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>HR NPS Score.Score</target_name><type>Field Label</type><update_domain>global</update_domain><update_guid>c62162b3722a3300c018b5bc9c1e12c2</update_guid><update_guid_history>c62162b3722a3300c018b5bc9c1e12c2:597255554</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Lifecycle Events">532da270dad21200a4656ede91f9331e</application><category>customer</category><comments/><name>sys_script_9942c2a80b4132003be12da0d5673ad1</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="sys_script"&gt;
  &lt;sys_script action="INSERT_OR_UPDATE"&gt;
    &lt;abort_action&gt;false&lt;/abort_action&gt;
    &lt;access&gt;package_private&lt;/access&gt;
    &lt;action_delete&gt;false&lt;/action_delete&gt;
    &lt;action_insert&gt;true&lt;/action_insert&gt;
    &lt;action_query&gt;false&lt;/action_query&gt;
    &lt;action_update&gt;true&lt;/action_update&gt;
    &lt;active&gt;false&lt;/active&gt;
    &lt;add_message&gt;false&lt;/add_message&gt;
    &lt;advanced&gt;true&lt;/advanced&gt;
    &lt;change_fields&gt;false&lt;/change_fields&gt;
    &lt;client_callable&gt;false&lt;/client_callable&gt;
    &lt;collection&gt;sn_hr_le_activity_set_context&lt;/collection&gt;
    &lt;condition/&gt;
    &lt;description/&gt;
    &lt;execute_function&gt;false&lt;/execute_function&gt;
    &lt;filter_condition table="sn_hr_le_activity_set_context"&gt;stateCHANGESTOrunning_activities^EQ&lt;item display_value="Running Activities" endquery="false" field="state" goto="false" newquery="false" operator="CHANGESTO" or="false" value="running_activities"/&gt;
      &lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;
    &lt;/filter_condition&gt;
    &lt;is_rest&gt;false&lt;/is_rest&gt;
    &lt;message/&gt;
    &lt;name&gt;demo_data_running_trigger&lt;/name&gt;
    &lt;order&gt;100&lt;/order&gt;
    &lt;priority&gt;100&lt;/priority&gt;
    &lt;rest_method/&gt;
    &lt;rest_method_text/&gt;
    &lt;rest_service/&gt;
    &lt;rest_service_text/&gt;
    &lt;rest_variables/&gt;
    &lt;role_conditions/&gt;
    &lt;script&gt;&lt;![CDATA[(function executeRule(current, previous) {
	if (current.workflow_context.id.subject_person.last_name == 'Laine'   ||
		current.workflow_context.id.subject_person.last_name == 'Emilini' ||
		current.workflow_context.id.subject_person.last_name == 'Jones'   ||
		current.workflow_context.id.subject_person.last_name == 'Taylor'  ||
		current.workflow_context.id.subject_person.last_name == 'Betrand' ) {
		
		gs.debug('***** Firing trigger for user: ' + current.workflow_context.id.subject_person.last_name);
		var demoDataGenerator = new sn_hr_le.hr_demo_data_case_generator();
		if (!demoDataGenerator.checkIfFinalActivitySet(current.workflow_context.id, current.activity_set.title)) {
			demoDataGenerator.processAndCloseActivitySet(current.workflow_context.id);
		}
	}
})(current, previous);]]&gt;&lt;/script&gt;
    &lt;sys_class_name&gt;sys_script&lt;/sys_class_name&gt;
    &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
    &lt;sys_created_on&gt;2017-02-16 21:51:36&lt;/sys_created_on&gt;
    &lt;sys_domain&gt;global&lt;/sys_domain&gt;
    &lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;
    &lt;sys_id&gt;9942c2a80b4132003be12da0d5673ad1&lt;/sys_id&gt;
    &lt;sys_mod_count&gt;16&lt;/sys_mod_count&gt;
    &lt;sys_name&gt;demo_data_running_trigger&lt;/sys_name&gt;
    &lt;sys_overrides/&gt;
    &lt;sys_package display_value="Human Resources: Lifecycle Events" source="sn_hr_le"&gt;532da270dad21200a4656ede91f9331e&lt;/sys_package&gt;
    &lt;sys_policy/&gt;
    &lt;sys_scope display_value="Human Resources: Lifecycle Events"&gt;532da270dad21200a4656ede91f9331e&lt;/sys_scope&gt;
    &lt;sys_update_name&gt;sys_script_9942c2a80b4132003be12da0d5673ad1&lt;/sys_update_name&gt;
    &lt;sys_updated_by&gt;hradmin&lt;/sys_updated_by&gt;
    &lt;sys_updated_on&gt;2019-09-15 10:28:58&lt;/sys_updated_on&gt;
    &lt;template/&gt;
    &lt;when&gt;after&lt;/when&gt;
  &lt;/sys_script&gt;
  &lt;sys_translated_text action="delete_multiple" query="documentkey=9942c2a80b4132003be12da0d5673ad1"/&gt;
&lt;/record_update&gt;</payload><payload_hash>1350452496</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>true</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>14dac92fdb2600103dd39235ca961957</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16ff7f95c000000000</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>demo_data_running_trigger</target_name><type>Business Rule</type><update_domain>global</update_domain><update_guid>5766852b4a260010066b11b8c1688793</update_guid><update_guid_history>5766852b4a260010066b11b8c1688793:1350452496,f41caa890af03300298f660e2fbc8cb5:1299374923,3c1caa8976f03300b6a10ace4721deb1:-234523304</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_647d332a53732200eb7c0a1806dc346c</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;
  &lt;sys_script_include action="INSERT_OR_UPDATE"&gt;
    &lt;access&gt;public&lt;/access&gt;
    &lt;active&gt;true&lt;/active&gt;
    &lt;api_name&gt;sn_hr_core.hr_PdfUtils&lt;/api_name&gt;
    &lt;caller_access&gt;2&lt;/caller_access&gt;
    &lt;client_callable&gt;false&lt;/client_callable&gt;
    &lt;description/&gt;
    &lt;name&gt;hr_PdfUtils&lt;/name&gt;
    &lt;script&gt;&lt;![CDATA[var hr_PdfUtils = Class.create();
hr_PdfUtils.prototype = {
    initialize: function() {},

    isFillable: function(dmsDocumentRevisionSysId) {
        var isPdfFillable = false;
        var sysAttachment = new GlideSysAttachment();
        var attachmentGR = sysAttachment.getAttachments('dms_document_revision', dmsDocumentRevisionSysId);
        var pdfUtils = new global.GeneralPdfUtils();
        if (attachmentGR.next())
            isPdfFillable = pdfUtils.isFillable(attachmentGR.sys_id);

        return isPdfFillable;
    },

    preview: function(pdfTemplateRevisionSysId) {
        return this.prefillPdf(pdfTemplateRevisionSysId, true, null, null, null);
    },

    prefillPdf: function(pdfTemplateRevisionSysId, isPreview, caseSysId, targetTable, targetTableSysId) {
        if (gs.nil(pdfTemplateRevisionSysId))
            return null;

        var pdfDocRevisionGR = new GlideRecord('sn_hr_core_pdf_template');
        pdfDocRevisionGR.get(pdfTemplateRevisionSysId);

        var forTaskAsignee = false;

        if (targetTable == hr.TABLE_TASK) {
            var taskGr = new GlideRecord(targetTable);
            taskGr.get(targetTableSysId);
            caseSysId = taskGr.parent;
            forTaskAsignee = true;
        }

        var map = this._getMapping(pdfTemplateRevisionSysId, isPreview, caseSysId);
        var originalAttachmentSysId = this._getOriginalAttachment(pdfDocRevisionGR);

        var mapString = JSON.stringify(map);
        var pdfName = "";
        var tableName = "";
        var sysId = "";
        var attachment;
        //if previewed then newly created pdf can be attached to pdf document revision else
        //if viewed by end user then it should be attached to pdf_draft table
        if (isPreview) {
            pdfName = "preview";
            tableName = "sn_hr_core_pdf_template";
            sysId = pdfTemplateRevisionSysId;
            //Remove existing preview pdfs before creating a new one
            new global.HRSecurityUtils().removeSysAttachmentRecords(tableName, pdfTemplateRevisionSysId);
        } else {
            pdfName = pdfDocRevisionGR.name;
            // If the current pdf draft has a associated signature image and an attachment
            // then the sysid of the attachment would be used to prefillpdf
            // New Pdf draft would be created only if target table does not have the associated pdf draft and
            // the original document revision would be used to pre fill pdf
            // task Assignee will be using the existing pdf draft but the ownership of the
            // current pdf draft would be changed
            tableName = "pdf_draft";
            var currentPdfDraft = this._getPdfDraft(targetTable, targetTableSysId);
            if (!gs.nil(currentPdfDraft)) {
                var signatures = this._getSignatureImageGR(targetTable, targetTableSysId, false);
                attachment = this.getAttachmentGR('pdf_draft', currentPdfDraft.getUniqueValue());
                if (!gs.nil(signatures) &amp;&amp; !gs.nil(attachment))
                    originalAttachmentSysId = attachment.getUniqueValue();
                sysId = currentPdfDraft.getUniqueValue();
            } else {
                var pdfDraft = new GlideRecord('pdf_draft');
                pdfDraft.setValue('user', gs.getUserID());
                pdfDraft.setValue('table', targetTable);
                pdfDraft.setValue('active', true);
                pdfDraft.setValue('document', targetTableSysId);
                var pdfSysId = pdfDraft.insert();
                sysId = pdfSysId;
            }
        }
        var pdfUtils = new global.GeneralPdfUtils();
        if (forTaskAsignee &amp;&amp; !gs.nil(attachment))
            return attachment.getUniqueValue();
        else {
            var editedAttachmentSysId = pdfUtils.prefillPdf(mapString, sysId, originalAttachmentSysId, tableName, pdfName + '.pdf');

            if (editedAttachmentSysId &amp;&amp; !isPreview) {
                var caseRec = new GlideRecord('sn_hr_core_case');
                if (caseRec.get(caseSysId)) {
                    caseRec.setValue('sn_esign_document', editedAttachmentSysId);
                    caseRec.update();
                }
            }

            //remove older attachment from pdf draft
            if (!gs.nil(attachment))
                new global.HRSecurityUtils().removeSysAttachmentsBySysId(attachment.getUniqueValue());
            return editedAttachmentSysId;
        }
    },

    getPdfDraftDocument: function(task_sys_id) {
        var taskRec = new GlideRecord('sn_hr_core_task');
        taskRec.get(task_sys_id);
        if (taskRec.canRead() &amp;&amp; taskRec.getValue('assigned_to') == gs.getUserID()) {
            var caseRec = new GlideRecord('sn_hr_core_case');
            caseRec.get(taskRec.getValue('parent'));

            return caseRec.getValue('sn_esign_document');
        }
    },

    /*
     * Get GlideRecord by sys_id or use query
     * @param tablel - @string table name
     * @param sys_id - @string sys_id of table
     * @param query - @object {prop: value}
     */
    _getGlideRecord: function(table, sys_id) {
        var gr = new GlideRecord(table);

        return function(query) {
            if (sys_id)
                gr.get(sys_id);
            else {
                gr.addActiveQuery();

                Object.keys(query).map(function(q) {
                    gr.addQuery(q, query[q]);
                });

                gr.query();
            }

            return gr;
        };
    },

    /*
     * Method to offset date by days, weeks, months, and redefine date format
     * @param dmgr: "sn_hr_core_pdf_template_mapping" glide record
     */
    _dateOffset: function(dmgr) {

        var dateOffsetType = dmgr.getValue("date_offset_type");
        var dateOffsetUnits = dmgr.getValue("date_offset_units");
        var dateOffsetQuantity = dmgr.getValue("date_offset_quantity");
        var sysDateFormat = gs.getProperty("glide.sys.date_format");

        var selectDateFormat = dmgr.getValue("select_date_format") || sysDateFormat;
        var specificDateFormat = dmgr.getValue("specific_date_format") || selectDateFormat;

        var sysUserGr = this._getGlideRecord('sys_user', gs.getUserID())();

        /*
         * Using closure to access private variable and expose private functions
         * @param ge: dmgr.mapping_field element of dmgr.mapping_table glide record
         */
        return function(ge) {
            return {
                regex: {
                    before: /^(before)$/i,
                    beforeAfter: /^(before|after)$/i,
                    dateFormat: /[M|d]{2}|y{4}/g,
                    firstLetter: /^(\w)/,
                    notLetter: /\W|_/g,
                    notNum: /\D/g,
                    other: /other/i,
                    units: /^(days|weeks|months)$/i,
                    type: /^(date|glide_date|glide_date_time)$/i
                },

                // returns the internalType as string
                internalType: function() {
                    var gr = new GlideRecord(dmgr.mapping_table);
                    if (!gr.isValid()) {
                        gs.info('hr_PdfUtils: PDF Mapping table: ' + dmgr.mapping_table + ' not found, see: ' + dmgr.getDisplayValue('document'));
                        return null;
                    }

                    var ele = gr.getElement(dmgr.mapping_field);
                    if (ele.toString() == null) {
                        gs.info('hr_PdfUtils: PDF Mapping field: ' + dmgr.mapping_field + ' not found in mapping table: ' + dmgr.mapping_table + ', see: ' + dmgr.getDisplayValue('document'));
                        return null;
                    }

                    return ele.getED().getInternalType();
                },

                // return amount to multiply quantity by
                getOffsetDirection: function() {
                    // if not before or after, return 0
                    if (!this.regex.beforeAfter.test(dateOffsetType))
                        return 0;

                    // -1 will subtract from date, 1 will add
                    return this.regex.before.test(dateOffsetType) ? -1 : 1;
                },

                // @param dv: Date string
                setDateFormat: function(dv) {

                    var sysUserDateFormatArr = sysUserGr.date_format || sysDateFormat;
                    var specificUserDateFormatArr = specificDateFormat.split(this.regex.notLetter);

                    // if user didn't include a seperator, split by match
                    if (specificUserDateFormatArr.length &lt; 2)
                        specificUserDateFormatArr = specificDateFormat.match(this.regex.dateFormat);

                    var dateFormatSpecialChar = specificDateFormat.match(this.regex.notLetter);
                    var dvArr = dv.split(this.regex.notNum);
                    var formattedDv = "";

                    sysUserDateFormatArr = sysUserDateFormatArr.split(this.regex.notLetter);

                    /*
                     * construct a new date format by iterating through specific_date_format
                     * and grabbing the index of the actual date using the default date format
                     * e.g. MM[0]/dd[1]/yyyy[2] =&gt; dd[1]/MM[0]/yyyy[2]
                     */
                    specificUserDateFormatArr.map(function(o, i) {
                        formattedDv += dvArr[sysUserDateFormatArr.indexOf(o)];
                        if (dateFormatSpecialChar &amp;&amp; dateFormatSpecialChar[i])
                            formattedDv += dateFormatSpecialChar[i];
                    });

                    return formattedDv;
                },

                // Calculate and return the offset GlideDate string value
                offsetValue: function() {
                    if (!ge.getDisplayValue())
                        return "";

                    var glideDateTime = new GlideDateTime();
                    glideDateTime.setDisplayValue(ge.getDisplayValue());

                    // check for isNaN to ensure data quality
                    if (!isNaN(dateOffsetQuantity) &amp;&amp; this.regex.units.test(dateOffsetUnits)) {
                        var offsetAmount = this.getOffsetDirection() * dateOffsetQuantity;

                        // capitalize the unit - 'days' to 'Days' for method name. i.e. 'addDaysLocalTime'
                        var capitalizedUnit = dateOffsetUnits.replace(this.regex.firstLetter, dateOffsetUnits.charAt(0).toUpperCase());
                        glideDateTime['add' + capitalizedUnit + 'LocalTime'](offsetAmount);
                    }

                    var gdtLocalDateValue = glideDateTime.getLocalDate().getDisplayValue();

                    if (this.regex.other.test(selectDateFormat))
                        return this.setDateFormat(gdtLocalDateValue);

                    return gdtLocalDateValue;
                }
            };
        };
    },

    _getMapping: function(pdfTemplateRevisionSysId, isPreview, caseSysId) {

        var documentMapGR = this._getGlideRecord('sn_hr_core_pdf_template_mapping')({
            "document": pdfTemplateRevisionSysId
        });

        // object to return
        var map = {};

        while (documentMapGR.next()) {
            var key = documentMapGR.getValue('document_field');
            var value = "";

            if (isPreview &amp;&amp; !gs.nil(documentMapGR.getValue('preview_value')))
                value = documentMapGR.getValue('preview_value');

            else if (!gs.nil(documentMapGR.mapping_table) &amp;&amp; !documentMapGR.use_signing_date) {
                var gr = new GlideRecord(documentMapGR.mapping_table);

                if (gr.get(caseSysId)) {
                    if (!gs.nil(documentMapGR.mapping_field)) {
                        var ge = gr.getElement(documentMapGR.mapping_field);
                        var offsets = this._dateOffset(documentMapGR)(ge);

                        value = !gs.nil(ge) ? ge.getDisplayValue() : "";

                        if (documentMapGR.advanced_script_toggle)
                            value = this._evaluateTemplateMapping(documentMapGR, gr, value);

                        // if internal type is date/glide_date/glide_date_time, check for and apply the date offset
                        else if (offsets.regex.type.test(offsets.internalType()))
                            value = offsets.offsetValue();

                    } else if (this._isNonTextField(documentMapGR) || documentMapGR.advanced_script_toggle)
                        value = this._evaluateTemplateMapping(documentMapGR, gr, value);
                }
            }

            map[key] = value || "";
        }

        return map;
    },

    _isNonTextField: function(documentMapGR) {
        return (documentMapGR.document_field_type == 'checkbox') || (documentMapGR.document_field_type == 'radio');
    },

    _evaluateTemplateMapping: function(documentMapGr, caseGr, mappingField) {
        var evaluator = new GlideScopedEvaluator();
        evaluator.putVariable("caseGr", caseGr);
        evaluator.putVariable("mappingField", mappingField);
        return evaluator.evaluateScript(documentMapGr, "script", null);
    },

    mergeSignatureImageToPdf: function(docTableName, docTableSysId, pdfDraftSysId, pdfFileName, generateDocument) {
        var attachmentGR = this.getAttachmentGR('pdf_draft', pdfDraftSysId);
        //resolve if docTable is task get the parent document for filtering
        var document;
        if (docTableName == hr.TABLE_TASK) {
            var hrTask = new GlideRecord(docTableName);
            hrTask.get(docTableSysId);
            document = new GlideRecord(hrTask.parent.sys_class_name);
            document.get(hrTask.parent.sys_id);
        } else {
            document = new GlideRecord(docTableName);
            document.get(docTableSysId);
        }
        var signatureImage = this._getSignatureImageGR(docTableName, docTableSysId, true);
        var list = this._getMappingInfoList(document.pdf_template.sys_id);
        var isAllSignaturesCollected = false;
        var sysId = '';
        var jsonArrayString = '';
        var validatorJson = {};
        validatorJson.generateDocument = generateDocument;
        if (!generateDocument &amp;&amp; !gs.nil(signatureImage)) {
            //filter the signature info list mapping with the mapped users
            var filteredList = this._filterSignatureMappingBasedOnSignedUser(document, list, signatureImage.getValue('user'));
            var filteredDateList = this._filterDateMappingBasedOnSignedUser(document, list, signatureImage);
            var mappingInfoJson = {};
            mappingInfoJson["signatureMapping"] = filteredList;
            mappingInfoJson["dateMapping"] = filteredDateList;

            jsonArrayString = JSON.stringify(mappingInfoJson);
            //this json will contain signature image sys id and generate document param ,
            // based on this param API will either generate document or maintain the pdf_draft attachments
            if (!gs.nil(signatureImage))
                validatorJson.signatureImageSysId = signatureImage.getUniqueValue();
            else
                validatorJson.signatureImageSysId = "";

            // find whether all signatures has been collected for the document
            isAllSignaturesCollected = this._allSignaturesCollected(docTableName, docTableSysId, document, list);
        }

        if (!validatorJson.signatureImageSysId)
            validatorJson.signatureImageSysId = "";

        if (!validatorJson.isAllSignaturesCollected)
            validatorJson.isAllSignaturesCollected = isAllSignaturesCollected;

        var jsonStr = JSON.stringify(validatorJson);

        var pdfUtils = new global.GeneralPdfUtils();
        if (generateDocument || isAllSignaturesCollected)
            sysId = pdfUtils.mergeImageToPdf(docTableName, docTableSysId, jsonArrayString, attachmentGR.getUniqueValue(), pdfFileName + '.pdf', jsonStr);
        else {
            sysId = pdfUtils.mergeImageToPdf("pdf_draft", pdfDraftSysId, jsonArrayString, attachmentGR.getUniqueValue(), pdfFileName + '.pdf', jsonStr);

            document.setValue('sn_esign_document', sysId);
            document.update();

            //remove older attachment from pdf draft only when not generating document
            new global.HRSecurityUtils().removeSysAttachmentsBySysId(attachmentGR.getUniqueValue());
        }
        return sysId;
    },

    _filterSignatureMappingBasedOnSignedUser: function(document, signatureMappingList, signedUser) {
        var filteredSignatureMapping = [];
        for (var i = 0; i &lt; signatureMappingList.length; i++) {
            var signatureMapping = signatureMappingList[i];
            if (!gs.nil(signatureMapping.mappingField) &amp;&amp; !signatureMapping.useSigningDate) {
                var ge = document.getElement(signatureMapping.mappingField);
                if (!gs.nil(ge) &amp;&amp; ge.toString() == signedUser)
                    filteredSignatureMapping.push(signatureMapping);
            }
        }
        return filteredSignatureMapping;
    },

    _filterDateMappingBasedOnSignedUser: function(document, mappingList, signatureImage) {
        var filteredDateMapping = [];
        for (var i = 0, max = mappingList.length; i &lt; max; i++) {
            var mapping = mappingList[i];
            if (mapping.useSigningDate) {
                var ge = document.getElement(mapping.mappingField);
                if (!gs.nil(ge) &amp;&amp; ge.toString() == signatureImage.getValue('user')) {
                    var dateMappingJson = {};

                    dateMappingJson.fieldName = mapping.documentField;

                    var pdfTemplateGR = this._getGlideRecord('sn_hr_core_pdf_template_mapping')({
                        "document": document.pdf_template.sys_id,
                        "document_field": dateMappingJson.fieldName
                    });
                    var signDateOffset = this._dateOffset(pdfTemplateGR)(signatureImage.signed_on);

                    // ensure parsing the time by user's tz and format
                    dateMappingJson.signedOnDate = signDateOffset.offsetValue();

                    //add format value to json
                    filteredDateMapping.push(dateMappingJson);
                }
            }
        }
        return filteredDateMapping;
    },

    _allSignaturesCollected: function(docTableName, docTableSysId, document, signatureMappingList) {
        //get signature for all signatures under the document
        var usersSignatureList = this._getSignatureUsersList(docTableName, docTableSysId);
        // signatures are collected if user as per the mapping
        // should have the signature in signature_image table
        var isAllSignaturesCollected = true;
        for (var i = 0; i &lt; signatureMappingList.length; i++) {
            var signatureMapping = signatureMappingList[i];
            if (signatureMapping.useSigningDate)
                continue;
            if (gs.nil(signatureMapping.mappingField))
                continue;
            var ge = document.getElement(signatureMapping.mappingField);
            if (gs.nil(ge))
                isAllSignaturesCollected = false;
            var usersStr = usersSignatureList.toString();
            if (usersStr.indexOf(ge.toString()) &lt; 0)
                isAllSignaturesCollected = false;
        }
        return isAllSignaturesCollected;
    },

    /*
    	Get the latest signature image Record for teh document.
    */
    _getSignatureUsersList: function(tableName, tableSysId) {
        var userArray = [];
        if (tableName == hr.TABLE_TASK) {
            var grTask = new GlideRecord(tableName);
            grTask.get(tableSysId);
            //first fecth is signature Image Exists For Parent
            var sigImageFromParent = this._getSignatureImage(grTask.parent.sys_class_name, grTask.parent.sys_id, false);
            if (!gs.nil(sigImageFromParent))
                userArray.push(sigImageFromParent.user.sys_id);

            var tasks = new GlideRecord(grTask.sys_class_name);
            tasks.addQuery('parent', grTask.parent.sys_id);
            tasks.addQuery('hr_task_type', 'IN', 'sign_document,e_sign');
			tasks.setWorkflow(false);
            tasks.query();
            while (tasks.next()) {
                if (tasks.hr_task_type == 'sign_document' || (tasks.hr_task_type == 'e_sign' &amp;&amp; tasks.getElement("sn_esign_esignature_configuration").getRefRecord().getValue("document_type") == "document_template")) {
                    var sigImageFromTask = this._getSignatureImage(tasks.sys_class_name, tasks.sys_id, false);
                    if (!gs.nil(sigImageFromTask))
                        userArray.push(sigImageFromTask.user.sys_id);
                }
            }
        } else {
            //first fetch it from the HR Case
            var sigImageFromCase = this._getSignatureImage(tableName, tableSysId, false);
            if (!gs.nil(sigImageFromCase))
                userArray.push(sigImageFromCase.user.sys_id);

            var childTask = new GlideRecord(hr.TABLE_TASK);
            childTask.addQuery('parent', tableSysId);
            childTask.addQuery('hr_task_type', 'IN', 'sign_document,e_sign');
            childTask.query();
            while (childTask.next()) {
                if (childTask.hr_task_type == 'sign_document' || (childTask.hr_task_type == 'e_sign' &amp;&amp; childTask.getElement("sn_esign_esignature_configuration").getRefRecord().getValue("document_type") == "document_template")) {
                    var sigImageFromChild = this._getSignatureImage(childTask.sys_class_name, childTask.sys_id, false);
                    if (!gs.nil(sigImageFromChild))
                        userArray.push(sigImageFromChild.user.sys_id);
                }
            }
        }
        return userArray;
    },

    /*
    	Get the latest signature image Record for teh document.
    */
    _getSignatureImageGR: function(tableName, tableSysId, queryForUser) {
        if (tableName == hr.TABLE_TASK) {
            var grTask = new GlideRecord(tableName);
            grTask.get(tableSysId);
            //first fecth is signature Image Exists For Parent
            var sigImageFromParent = this._getSignatureImage(grTask.parent.sys_class_name, grTask.parent.sys_id, queryForUser);
            if (gs.nil(sigImageFromParent)) {
                var tasks = new GlideRecord(grTask.sys_class_name);
                tasks.addQuery('parent', grTask.parent.sys_id);
                tasks.addQuery('hr_task_type', 'IN', 'sign_document,e_sign');
                tasks.query();
                while (tasks.next()) {
                    if (tasks.hr_task_type == 'sign_document' || (tasks.hr_task_type == 'e_sign' &amp;&amp; tasks.getElement("sn_esign_esignature_configuration").getRefRecord().getValue("document_type") == "document_template")) {
                        var sigImageFromTask = this._getSignatureImage(tasks.sys_class_name, tasks.sys_id, queryForUser);
                        if (!gs.nil(sigImageFromTask))
                            return sigImageFromTask;
                    }
                }
            } else
                return sigImageFromParent;
        } else {
            //first fetch it from the HR Case
            var sigImageFromCase = this._getSignatureImage(tableName, tableSysId, queryForUser);
            if (gs.nil(sigImageFromCase)) {
                var childTask = new GlideRecord(hr.TABLE_TASK);
                childTask.addQuery('parent', tableSysId);
                childTask.addQuery('hr_task_type', 'IN', 'sign_document,e_sign');
                childTask.query();
                while (childTask.next()) {
                    if (childTask.hr_task_type == 'sign_document' || (childTask.hr_task_type == 'e_sign' &amp;&amp; childTask.getElement("sn_esign_esignature_configuration").getRefRecord().getValue("document_type") == "document_template")) {
                        var sigImageFromChild = this._getSignatureImage(childTask.sys_class_name, childTask.sys_id, queryForUser);
                        if (!gs.nil(sigImageFromChild))
                            return sigImageFromChild;
                    }
                }
            } else
                return sigImageFromCase;
        }
        return null;
    },

    _getSignatureImage: function(tableName, tableSysId, queryForUser) {
        var signatureGR = new GlideRecord("signature_image");
        signatureGR.addQuery("document", tableSysId);
        signatureGR.addQuery("table", tableName);
        if (queryForUser)
            signatureGR.addQuery("user", gs.getUserID());
        signatureGR.orderByDesc("sys_updated_on");
        signatureGR.addActiveQuery();
        signatureGR.query();
        if (signatureGR.next())
            return signatureGR;
        return null;
    },

    _getOriginalAttachment: function(pdfDocumentRevisionGR) {
        var dmsDocumentSysId = pdfDocumentRevisionGR.getValue('document_revision');
        var dmsDocumentRevisionGR = new GlideRecord('dms_document_revision');
        dmsDocumentRevisionGR.get(dmsDocumentSysId);
        return dmsDocumentRevisionGR.getValue('attachment');
    },

    createDocumentMap: function(pdfTemplateRevisionSysId, dmsDocumentRevisionSysId) {
        var attachment = this.getAttachmentGR('dms_document_revision', dmsDocumentRevisionSysId);
        var documentSysId = '';
        if (!gs.nil(attachment)) {
            documentSysId = attachment.sys_id;

            var jsonString = new global.GeneralPdfUtils().getPDFFields(documentSysId);
            var propertiesString = new global.GeneralPdfUtils().getFieldType(documentSysId);

            var properties = JSON.parse(propertiesString);
            var fields = JSON.parse(jsonString);
            var fieldProperty;
            for (var f in fields) {
                fieldProperty = JSON.parse(properties[f]);
                var id = this._createDocumentMapHelper(pdfTemplateRevisionSysId, f, fieldProperty);
            }
        }
    },

    getAttachmentGR: function(tableName, sysId) {
        var attachments = new GlideRecord('sys_attachment');
        attachments.addQuery('table_name', tableName);
        attachments.addQuery('table_sys_id', sysId);
        attachments.orderByDesc('sys_updated_on');
        attachments.query();
        return attachments.next() ? attachments : null;
    },

    _createDocumentMapHelper: function(document, document_field, fieldProperty) {
        var fieldLabel = document_field.substring(document_field.lastIndexOf('.') + 1, document_field.length);
        var gr = new GlideRecord('sn_hr_core_pdf_template_mapping');

        gr.document_field_type = this._getDocFieldType(fieldProperty.field_type);
        gr.document_field = document_field;
        gr.document_field_label = fieldLabel;

        // special handling for checkboxes and radio buttons
        if (fieldProperty['field_type'] == 2 || fieldProperty['field_type'] == 3) {
            if (fieldProperty.true_value) {
                var states = fieldProperty.true_value.slice(1, -1);
                gr.true_value = states; // this field contains states here (e.g., radio button or checkbox options)
                if (states &amp;&amp; states.length &gt; 0) {
                    var options = states.split(',');
                    if (options.length)
                        gr.preview_value = options[options.length - 1].trim(); // set preview to last state
                }
            }
        } else {
            var previewValue = fieldLabel.substring(0, fieldLabel.indexOf("["));
            if (!previewValue)
                previewValue = fieldLabel;
            gr.preview_value = previewValue;
        }

        gr.document = document;
        var id = gr.insert();
        return id;
    },

    _removeExistingDocuments: function(tableName, recordSysId) {
        var sysAttachment = new GlideSysAttachment();
        var attachmentGR = sysAttachment.getAttachments(tableName, recordSysId);
        while (attachmentGR.next())
            attachmentGR.deleteRecord();
    },

    _getDocFieldType: function(type) {
        if (type == 2)
            return 'checkbox';
        if (type == 3)
            return 'radio';
        if (type == 6)
            return 'combo';

        return 'text';
    },

    containsDocumentMap: function(pdfDocumentSysId) {
        var documentMapGR = new GlideRecord('sn_hr_core_pdf_template_mapping');
        documentMapGR.addQuery('document', pdfDocumentSysId);
        documentMapGR.addQuery('document_field_type', "!=", 'signature');
        documentMapGR.query();
        return documentMapGR.hasNext();
    },

    getPdfFields: function(attachmentSysId) {
        var jsonString = new global.GeneralPdfUtils().getPDFFields(attachmentSysId);
        return jsonString;
    },

    _getFieldType: function(attachmentSysId) {
        var jsonString = new global.GeneralPdfUtils().getFieldType(attachmentSysId);
        return jsonString;
    },
	
	userHasSignature: function(caseGr) {
		var pdfTemplate = this._getPdfTemplate(caseGr.getValue('sys_class_name'), caseGr.getUniqueValue());
        if (gs.nil(pdfTemplate) || gs.nil(pdfTemplate.document_revision))
            return false;
		var gr = new GlideRecord('sn_hr_core_pdf_template_mapping');
		gr.addQuery('document', pdfTemplate.getUniqueValue());
		gr.addQuery('document_field_type', 'signature');
		gr.query();
		while (gr.next()) {
			var element = gr.getValue('mapping_field');
			var user = caseGr.getElement(element).toString();
			if (user == gs.getUserID())
				return true;
		}
		return false;
	},

    /*
    	Condition if document can be generated and signature image can be merged.
    */
    isValidPdfTemplate: function(documentTableName, documentSysId) {
        var pdfTemplate = this._getPdfTemplate(documentTableName, documentSysId);
        if (gs.nil(pdfTemplate) || gs.nil(pdfTemplate.document_revision))
            return false;
        return !gs.nil(this._getPdfDraft(documentTableName, documentSysId)) ? true : false;
    },

    /*
    	Condition if the template has a pdf document revision,
    	then it can be prefilled.
    */
    isValidPdfTemplateForPreFill: function(pdfTemplateSysId) {
        var pdfTemplate = new GlideRecord("sn_hr_core_pdf_template");
        pdfTemplate.get(pdfTemplateSysId);
        if (!gs.nil(pdfTemplate) &amp;&amp; !gs.nil(pdfTemplate.document_revision))
            return true;
        return false;
    },

    /*
    	Return PDF template associated with the table based
    	on condition if the table is child task or HR Case.
    */
    _getPdfTemplate: function(documentTableName, documentSysId) {
        var pdfSysId = null;
        if (documentTableName == hr.TABLE_TASK) {
            var task = new GlideRecord(documentTableName);
            task.get(documentSysId);
            pdfSysId = task.parent.pdf_template.sys_id;
        } else {
            var hrcase = new GlideRecord(documentTableName);
            hrcase.get(documentSysId);
            pdfSysId = hrcase.pdf_template.sys_id;
        }
        if (!pdfSysId)
            return null;
        var pdfTemplate = new GlideRecord("sn_hr_core_pdf_template");
        pdfTemplate.get(pdfSysId);
        return pdfTemplate;
    },

    /**
    	Uses the logic to retrieve the correct pdf_draft for the document or the child task beneath the document
    **/
    _getPdfDraft: function(tableName, tableSysId) {
        if (tableName == hr.TABLE_TASK) {
            var grTask = new GlideRecord(tableName);
            grTask.get(tableSysId);
            //first fetch is signature Image Exists For Parent
            var pdfDraftFromParent = this._getPdfDraftRecord(grTask.parent.sys_class_name, grTask.parent.sys_id);
            if (gs.nil(pdfDraftFromParent)) {
                var tasks = new GlideRecord(grTask.sys_class_name);
                tasks.addQuery('parent', grTask.parent.sys_id);
                tasks.query();
                while (tasks.next()) {
                    var pdfDraftFromTask = this._getPdfDraftRecord(tasks.sys_class_name, tasks.sys_id);
                    if (!gs.nil(pdfDraftFromTask))
                        return pdfDraftFromTask;
                }
            } else
                return pdfDraftFromParent;
        } else {
            //first fetch it from the HR Case
            var pdfDraftFromCase = this._getPdfDraftRecord(tableName, tableSysId);
            if (gs.nil(pdfDraftFromCase)) {
                var childTask = new GlideRecord(hr.TABLE_TASK);
                childTask.addQuery('parent', tableSysId);
                childTask.query();
                while (childTask.next()) {
                    var pdfDraftFromChild = this._getPdfDraftRecord(childTask.sys_class_name, childTask.sys_id);
                    if (!gs.nil(pdfDraftFromChild))
                        return pdfDraftFromChild;
                }
            } else
                return pdfDraftFromCase;
        }
        return null;
    },

    _getPdfDraftRecord: function(tableName, tableSysId) {
        var pdfDraft = new GlideRecord('pdf_draft');
        pdfDraft.addQuery('table', tableName);
        pdfDraft.addQuery('document', tableSysId);
        pdfDraft.query();
        return pdfDraft.next() ? pdfDraft : null;
    },

    /*
    	Public api that merge signature_image for the
    	passed table with the associated pdf template.
    */
    createPdfForDocument: function(tableName, tableSysId, generateDocument) {
        var pdfDraft = this._getPdfDraft(tableName, tableSysId);
        var pdfTemplate = this._getPdfTemplate(tableName, tableSysId);

        var pdfName = pdfTemplate.name;
        var user = new GlideRecord('sys_user');
        if (user.get(gs.getUserID()))
            pdfName = pdfName + "-" + user.getDisplayValue();

        var response = this.mergeSignatureImageToPdf(tableName, tableSysId, pdfDraft.getUniqueValue(), pdfName, generateDocument);
        return response;
    },

    /*
    	Public Api to be used for the pdf document revision template
    	if the case need to be prefilled with the mapping.
    */
    prefillPdfTemplate: function(pdfTemplateRevisionSysId, isPreview, caseSysId, targetTable, targetTableSysId) {
        if (gs.nil(pdfTemplateRevisionSysId) || gs.nil(caseSysId) || gs.nil(targetTable) || gs.nil(targetTableSysId)) {
            gs.addErrorMessage(gs.getMessage('PDF template parameters are empty'));
            return;
        }
        var previewSysId = this.prefillPdf(pdfTemplateRevisionSysId, isPreview, caseSysId, targetTable, targetTableSysId);
        return previewSysId;
    },

    /*
    	Iterates through all Mapping associated with the documentRevisionSysId and filter the one having
    	field type as signature.
    */
    _getMappingInfoList: function(pdfTemplateSysId) {
        var list = [];
        var pdfDocumentRevGR = new GlideRecord("sn_hr_core_pdf_template");
        if (!pdfDocumentRevGR.get(pdfTemplateSysId))
            return list;

        var documentMap = new GlideRecord("sn_hr_core_pdf_template_mapping");
        documentMap.addQuery("document", pdfDocumentRevGR.getUniqueValue());
        documentMap.query();
        while (documentMap.next()) {
            //not to include the mapping if inactive
            if (!documentMap.active)
                continue;

            if (documentMap.getValue("document_field_type") == "signature" || documentMap.use_signing_date) {
                var mappingInfo = {};
                mappingInfo.pageNumber = parseInt(documentMap.getValue("page_number"));
                mappingInfo.docTop = parseInt(documentMap.getValue("doc_top"));
                mappingInfo.docLeft = parseInt(documentMap.getValue("doc_left"));
                mappingInfo.signTop = parseInt(documentMap.getValue("sign_top"));
                mappingInfo.signLeft = parseInt(documentMap.getValue("sign_left"));
                mappingInfo.boxHeight = parseInt(documentMap.getValue("box_height"));
                mappingInfo.boxWidth = parseInt(documentMap.getValue("box_width"));
                mappingInfo.mappingField = documentMap.getValue("mapping_field");
                if (documentMap.use_signing_date) {
                    mappingInfo.useSigningDate = documentMap.getValue("use_signing_date");
                    mappingInfo.documentField = documentMap.getValue("document_field");
                    //
                }
                list.push(mappingInfo);
            }
        }
        return list;
    },
    getMappingsForField: function(pdfTemplateSysId, caseSysId) {
        var documentMapGR = this._getGlideRecord('sn_hr_core_pdf_template_mapping')({
            "document": pdfTemplateSysId
        });
        // object to return 
        var map = {};
        while (documentMapGR.next()) {
            var temp = {};
            var key = documentMapGR.getValue('document_field_label');
            var value = "";
            var uniqueId = "";
            if (!documentMapGR.active)
                continue;
            if (!gs.nil(documentMapGR.mapping_table)) {
                var gr = new GlideRecord(documentMapGR.mapping_table);
                if (gr.get(caseSysId)) {
                    if (!gs.nil(documentMapGR.mapping_field)) {
                        var ge = gr.getElement(documentMapGR.mapping_field);
                        var offsets = this._dateOffset(documentMapGR)(ge);
                        value = !gs.nil(ge) ? ge.getDisplayValue() : "";
                        if (documentMapGR.advanced_script_toggle)
                            value = this._evaluateTemplateMapping(documentMapGR, gr, value);
                        // if internal type is date/glide_date/glide_date_time, check for and apply the date offset
                        else if (offsets.regex.type.test(offsets.internalType()))
                            value = offsets.offsetValue();
                    } else if (this._isNonTextField(documentMapGR) || documentMapGR.advanced_script_toggle)
                        value = this._evaluateTemplateMapping(documentMapGR, gr, value);

                    temp.fieldName = key;
                    temp.isUserRecord = false;
                    if (documentMapGR.getValue("document_field_type") == 'signature') {
                        var element = gr.getElement(documentMapGR.mapping_field);
                        temp.fieldValue = element.toString();
                        //Check valid if it is valid user record
                        var refRecord = element.getRefRecord();
                        if (refRecord &amp;&amp; refRecord.isValidRecord())
                            temp.isUserRecord = (refRecord.getTableName() == "sys_user");
                    } else
                        temp.fieldValue = value || "";
                    temp.pageNumber = parseInt(documentMapGR.getValue("page_number"));
                    temp.docTop = parseInt(documentMapGR.getValue("doc_top"));
                    temp.docLeft = parseInt(documentMapGR.getValue("doc_left"));
                    temp.signTop = parseInt(documentMapGR.getValue("sign_top"));
                    temp.signLeft = parseInt(documentMapGR.getValue("sign_left"));
                    temp.boxHeight = parseInt(documentMapGR.getValue("box_height"));
                    temp.boxWidth = parseInt(documentMapGR.getValue("box_width"));
                    temp.mappingField = documentMapGR.getValue("mapping_field");
                    temp.documentFieldType = documentMapGR.getValue("document_field_type");
                    temp.documentField = documentMapGR.getValue("document_field");
                    temp.recipients = documentMapGR.getValue("applicable_for_role");
                    temp.signingOrder = documentMapGR.getValue("signing_order");
                    temp.fieldId = documentMapGR.getValue("field_id");
                    if (gs.nil(temp.fieldId))
                        uniqueId = documentMapGR.sys_id;
                    else
                        uniqueId = temp.fieldId;
                    map[uniqueId] = temp;
                }
            }
        }
        return map;
    },
    type: 'hr_PdfUtils'
};]]&gt;&lt;/script&gt;
    &lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;
    &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
    &lt;sys_created_on&gt;2016-12-23 08:40:05&lt;/sys_created_on&gt;
    &lt;sys_id&gt;647d332a53732200eb7c0a1806dc346c&lt;/sys_id&gt;
    &lt;sys_mod_count&gt;543&lt;/sys_mod_count&gt;
    &lt;sys_name&gt;hr_PdfUtils&lt;/sys_name&gt;
    &lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;
    &lt;sys_policy/&gt;
    &lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;
    &lt;sys_update_name&gt;sys_script_include_647d332a53732200eb7c0a1806dc346c&lt;/sys_update_name&gt;
    &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
    &lt;sys_updated_on&gt;2019-11-19 04:09:07&lt;/sys_updated_on&gt;
  &lt;/sys_script_include&gt;
&lt;/record_update&gt;</payload><payload_hash>1996875835</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>true</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>14dac92fdb2600103dd39235ca96195a</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00578b7e0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_PdfUtils</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>e366092b7f260010c415a2ebe371694d</update_guid><update_guid_history>e366092b7f260010c415a2ebe371694d:1996875835,12fd1180a672730064f44e72d2f6350c:789020832,12fd11807d727300917579661fcad309:754348159</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_security_acl_3e59a1514f633300ad404a10a310c7e1</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl"><sys_security_acl action="INSERT_OR_UPDATE"><active>true</active><admin_overrides>true</admin_overrides><advanced>false</advanced><condition/><description>Default access control on sn_hr_core_case_asc</description><name>sn_hr_core_case_asc</name><operation display_value="create">create</operation><script/><sys_class_name>sys_security_acl</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-08-27 19:19:47</sys_created_on><sys_id>3e59a1514f633300ad404a10a310c7e1</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sn_hr_core_case_asc</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_security_acl_3e59a1514f633300ad404a10a310c7e1</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-08-27 19:19:47</sys_updated_on><type display_value="record">record</type></sys_security_acl></record_update>]]></payload><payload_hash>1184097824</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>14dac92fdb2600103dd39235ca96195d</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16cd48514e20000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case_asc</table><target_name>sn_hr_core_case_asc</target_name><type>Access Control</type><update_domain>global</update_domain><update_guid>7a59a1510a633300ee94cc0af6861ff2</update_guid><update_guid_history>7a59a1510a633300ee94cc0af6861ff2:1184097824</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_ui_macro_71d4a1484f727300ad404a10a310c756</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ui_macro"&gt;&lt;sys_ui_macro action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;category&gt;general&lt;/category&gt;&lt;description/&gt;&lt;media_type/&gt;&lt;name&gt;hr_nps&lt;/name&gt;&lt;scoped_name&gt;sn_hr_core_hr_nps&lt;/scoped_name&gt;&lt;sys_class_name&gt;sys_ui_macro&lt;/sys_class_name&gt;&lt;sys_created_by&gt;tim_deniston&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2019-07-17 15:16:23&lt;/sys_created_on&gt;&lt;sys_id&gt;71d4a1484f727300ad404a10a310c756&lt;/sys_id&gt;&lt;sys_mod_count&gt;2&lt;/sys_mod_count&gt;&lt;sys_name&gt;hr_nps&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ui_macro_71d4a1484f727300ad404a10a310c756&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 15:22:13&lt;/sys_updated_on&gt;&lt;xml&gt;&lt;![CDATA[&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;j:jelly trim="false" xmlns:j="jelly:core" xmlns:g="glide" xmlns:j2="null" xmlns:g2="null"&gt;
	&lt;g2:evaluate&gt;
		var display = (current.subject_person.u_nps_rating != '') ? 'inline-block' : 'none';
		var rating = current.subject_person.u_nps_rating;
		var icon = '';
		if (rating == '1') {
			icon = 'happy.png';
		} else if (rating == '0') {
			icon = 'indifferent.png';
		} else if (rating == '-1') {
			icon = 'sad.png';
		}
	&lt;/g2:evaluate&gt;
	
	&lt;span id="happy_icon" class="icon ref-button btn btn-default btn-ref" style="padding:3px;display:$[display];"&gt;
		&lt;img src="$[icon]" height="24px" width="24px" style="display:block;" /&gt;
	&lt;/span&gt;
&lt;/j:jelly&gt;]]&gt;&lt;/xml&gt;&lt;/sys_ui_macro&gt;&lt;/record_update&gt;</payload><payload_hash>-632717758</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>14dac92fdb2600103dd39235ca961960</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0086db450000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_nps</target_name><type>Macro</type><update_domain>global</update_domain><update_guid>d7c9e54c7b7273009a52a6fd56ed3f4e</update_guid><update_guid_history>d7c9e54c7b7273009a52a6fd56ed3f4e:-632717758,c979a9c882727300de9360a92c6c00d7:1761615541,067861c8b6727300a76f11336a496b52:-2142499550</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>db_image_31172d884f727300ad404a10a310c7e8</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="db_image"><db_image action="INSERT_OR_UPDATE"><active>true</active><category>general</category><format>png</format><height>70</height><image>1037a5084f727300ad404a10a310c737</image><name>happy.png</name><size_bytes>2897</size_bytes><sys_class_name>db_image</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 15:10:42</sys_created_on><sys_id>31172d884f727300ad404a10a310c7e8</sys_id><sys_mod_count>2</sys_mod_count><sys_name>happy.png</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>db_image_31172d884f727300ad404a10a310c7e8</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 15:10:49</sys_updated_on><thumbnail/><width>72</width></db_image><sys_attachment action="INSERT_OR_UPDATE"><average_image_color>#fefffc</average_image_color><chunk_size_bytes>734003</chunk_size_bytes><compressed>true</compressed><content_type>image/png</content_type><encryption_context/><file_name>image</file_name><image_height>70</image_height><image_width>72</image_width><size_bytes>2897</size_bytes><size_compressed>2920</size_compressed><state/><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 15:10:49</sys_created_on><sys_id>1037a5084f727300ad404a10a310c737</sys_id><sys_mod_count>2</sys_mod_count><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 15:10:49</sys_updated_on><table_name>ZZ_YYdb_image</table_name><table_sys_id>31172d884f727300ad404a10a310c7e8</table_sys_id></sys_attachment><sys_attachment_doc action="INSERT_OR_UPDATE"><data>H4sIAAAAAAAAAA==</data><length>16</length><position>0</position><sys_attachment display_value="image" sys_id="1037a5084f727300ad404a10a310c737">1037a5084f727300ad404a10a310c737</sys_attachment><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 15:10:49</sys_created_on><sys_id>1837a5084f727300ad404a10a310c737</sys_id></sys_attachment_doc><sys_attachment_doc action="INSERT_OR_UPDATE"><data>AVELrvSJUE5HDQoaCgAAAA1JSERSAAAASAAAAEYIAwAAAFg5IgUAAALxUExURQABAAACAAEEAAIFAQQHAgUIBAcJBQgLBwoMCAsNCgwPCw4QDA8RDRASDxETEBIUERMUEhQVExUWFBYYFRcYFhgZFxkbGBocGRscGhwdGx0fHB4fHR8gHiAhHyEjICIkISMkIiQlIyUnJCYoJScoJigpJykrKCosKSstKiwtKy0uLC4vLS8xLjAyLzEzMDIzMTM0MjU3NDY4NTc5Njg5Nzk6ODo7OTs9Oj48Pzw+Oz0/PD5APT9APkBBP0FDQUVHREZIRUdJRkhJR0lKSEpLSUpMSkxOS01PTE5QTU9RTlBST1FTUFJUUVNUUlRVU1VWVFZXVVZYVVdZVllbWFpcWVtdWl5cX1xeW11fXF9hXmBiX2FjYGJkYWNlYmRlY2VmZGZnZWdoZmhpZ2hqZ2lraGpsaW1rb2ttamxua21vbG5wbW9xbnFzcHJ0cXN1cnR2c3V3dHZ4dXd5dnh6d3p8eXt9enx+e31/fH6AfX+BfoCCf4GDgIKEgYOFgoSGg4WHhIaIhYeJhoiKh4mLiIqMiYuNioyOi42PjJCOko6QjY+RjpCSj5GTkJKUkZOVkpSWk5WXlJaYlZeZlpial5qbmJudmZyem52fnJ6gnZ+hnqCin6GjoKKkoaOloqSmo6WnpKaopaeppqiqp6mrqKutqqyuq62vrK6wrbCyrrGzr7K0sbO1srS2s7W3tLa4tbe5tri6t7m7uLq8ubu9ury+u72/vL7BvcHDv8LEwcPFwsTGw8XHxMbIxcfJxsjKx8nLyMrMyc3Lz8vOys3Py87QzM/RztDSz9HT0NLU0dPV0tTW09XX1NbY1dja1tnb19rc2dvd2tze293f3ODe4t7g3eHf49/h3uDi3+Hk4OPl4eTm4+Xn5Onm6+bo5efp5ujq5+nr6Ors6e3r7+vu6u3v6+7w7e/x7vDy7/Hz8PL08fP18vT38/n2+/b49Pr3/Pf59vv4/fj69/n7+Pz6/vr8+f37//v9+v78///9//z/+/7//KrogP4AAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wcRDwYPyzjSTAAAACZpVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVAgb24gYSBNYWOV5F9bAAAHtElEQVRYw8WYfVAU5x3HvZmdZ57Zu93bl9vbe4E7wIMSidCqmIKaNpExkFqkUdsmTdJWTEmTVKOxmmDUVtMYglGbYUJiJZWiJL6QYooaiwI1NwPIcDOxNHM30zuhgId3vVzv8dib2b96cHt7CxxwxM70+w973HOf/T0v39/ze55F4pwauHn22KFDh442X+/3zN1y0azfuC7sqyrEAFQTJKWFOPngD399xrFwUGvVcq06nQEQQBzXaCb+pgOy4OmLngWBPilScdksAKDwmTcaW1pamg6/tCqKsuTjqtzfpw46WQ551rSkbNdfHENIFMMohERh1G2vLV3KWilN8fvulEBXi9IoI1xT3+O9G/ShoCgKAorikBARvDc//BFOaOjiyymA6nGYo81r+ip5ByKe0zbczHMH5wN98ZTGAPLecwmzzs69waaHeDMs654T1F+so8ELHUJ49mlGgjBQTdP6/PY5QL3LeD39rji/Gsg0KqdlVlBHYZom50/+FECBtlV6PvvCLKDe1TnG5R0onAJIRM4Kksm9lhTkLefJlW4xVd0s03MrnMlAzzKM/krKHDFs/7aWWO+ZCToONKrz/0kdJAqtBINVzgBd53PpGnEhCgfOMkza5emgZ0i6YmxBIHFsbAdjfsI9FTRAZ5g7xdCCOEHRwZpM56eCHtcRB/zjkUk7Ic+Q8x+e0fDdmfYQ7nr6HJ7ESmtSEzaXEnQZaAtuo9h//Nd2r1uxtKj0nZnp0F23aXVewSO//AzF2obvrmXB20pQiQbWSY39dWY6W0+mZbHWaW4SnSZozbdkWyjTq7HhRIGPSctydwJ0I834sCMWcPC3uIk027KzeB1dYBeVWcBuBQyV+UCuAVqJnWP+qANQyP1opulcAvQWR78SlJaBzchsbnO6HR/nYNQTXgUosIXFC07YnYPtL5t5yznfRO8ioWqcfDEB2mii2kTv5OcXGOzHQ0EPEsfaKZ68pPQEYMjPwhOjE9ynJtfGjc5Rq11xUO9Sc7YnODH3gmsxQ08MsiCI6COIb1fY9AMt3BuIPXtMOCZNRaCAiT1OgM4Y4EvBia4JoQFIb0AxkNBPkA8HZc7YTr36KpJy28sGTHK+cFSjOR4H1Wg0jehebIJzsXfEGEgUVsP9CWcJpzBVvwRFdSD+LLYBWB4HPQaBHUnDevvTRCbxtN9ReqvdLqfgUEdvfEKHdSoyDjKqs1xoYT6LEiWQb50G64uBbmHUuoCijYI5ruSHfUnfttekuhQDXYK6PbMmnfmDO5hJfjQ/KAUdMoPGOIh79T5AhznV+3EQv/c+QEd0qvo4yPD6fYCOKSIy7LsP0HFO9UEMZAf0TxO7Irrxq6qYnttauWVSlVu3Vk3Rz1rl9ujeG9nYJxIIg98ZTOyTRYQ2Jopm9ZPieYNJKdpUmNjPgr/Qw6vSyi4gtAPyqruVq1KpMNVcwqj0RBoOlELCLoGeZEC3vPLu/AADf+jpmlCnpK6uG5/L6upozuCzhmTQLYjZ4l6rI8Dbcqf9OwDzadzxMU2z2RUteDSxBTYDWBUHNROgQrYROgbpmjuTgMh4TFNR6LROrVjA1ZA6HQe5V6Yb++SQetTkkttImKIp9nuSwRM11i0C1/XJObvKBE/IrYdXMLAVSR+TgHpYmPWF/NoLuHVTIvm/x1o2eeXa4AjLFQfjP54KEsbF0C7AvZLIm5VAdzAB6reZ8zvjoyR8/iDHtyQvA6J7yDUDbf2zXP70F2Rm3lDstK8R9G45twW2AXLd7eSJUfA+a9FuHIzEY6yBoFy5ZduJxcAux2vnOOItf7IkJ6Aazmi5LofrMxlB65RqpFoDNwzF955Qo1pPvDaaJJ6xWkDAg/FwkPdpgl4/tazpKzZSDUh6U9i/C7J0dVicPvHod3Ax+aIUKxLDZyCe7ZhWse2HcI1sIJ+3kubBU/1+QZG6BTRQCQjNxhExLIH61qbRO2YUoyUGvuTLkBCRtrTngYEw7bk5GowxUDjQXVPA0vD5REUc2K5mFnfPAP0V4KqqEVGK2xc8kQM4Kr2s2enyen2j9vPrLRlmfeabd2SXof0UrWpKUmefZq1kbSgQGxZftPpYYjDxnAbmlZSUFBJAl6HnHrguJDx5ljYa6pMeIfaQZstJEUXkkTq3JRdSFKRpGqpZYNzcOKQ4XjRl6amd3uSHmm0ET9SOKOoGn/PU7ke0AGBwzfbGvlHFTus/oWfhKtcspyPPFhNHPOeROZHJ8XC7XE53tMKNiHfl8Rl7V8NR33DPfvDbzfJkqeS62CJSLqXJp0i0ez2bKIbb7J7rKHoEI0H68X/PAYp26495kATbnHMfjuutTBosax5BQjgcFpQgCextq8DNBnPtvKfs7p+oWWh6vMn1FYoqPD4ellgTZWho+EIFSZtg6cVULhAaloF0o3bZgd5BP7qXAIUQcjSsxAELrB+meBPhrrZxNKOhig5c7P77P/81PDwy5HbaG958DEA9S2X93Jn63Uj/0RKWBpDFbd9aW75hw/dLv1ucQZlIisW+d/hvC7z2ubo3U4UBLjfLas1IsyxdacGAiv7Nxa9xfxRNUqdef+ibS3Jttsys/BWrtp288vUuoiQ57J1dnfYv561uFon/I/0/QI7u7t5e52zf/henJcB5FfvZlAAAAABJRU5ErkJggud1k1xRCwAA</data><length>3880</length><position>1</position><sys_attachment display_value="image" sys_id="1037a5084f727300ad404a10a310c737">1037a5084f727300ad404a10a310c737</sys_attachment><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 15:10:49</sys_created_on><sys_id>9837a5084f727300ad404a10a310c737</sys_id></sys_attachment_doc></record_update>]]></payload><payload_hash>-333910615</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>18dac92fdb2600103dd39235ca96193e</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c007c6a510000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>happy.png</target_name><type>Images</type><update_domain>global</update_domain><update_guid>9837ad88d77273001b40534660152624</update_guid><update_guid_history>9837ad88d77273001b40534660152624:-333910615,dc37a508e5727300c4efa1d286e11f3c:-266840481,5037a50891727300f5ab6bd9eba5343b:-266840481,6627ad08a97273004dd5ee024c385b70:1493012867</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sysevent_register_7e5370019f22120047a2d126c42e7064</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sysevent_register"><sysevent_register action="INSERT_OR_UPDATE"><caller_access>1</caller_access><description/><event_name>sn_hr_core_case.inserted</event_name><fired_by/><queue/><suffix/><sys_class_name>sysevent_register</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2013-11-04 11:50:54</sys_created_on><sys_id>7e5370019f22120047a2d126c42e7064</sys_id><sys_mod_count>2</sys_mod_count><sys_name>sn_hr_core_case.inserted</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sysevent_register_7e5370019f22120047a2d126c42e7064</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:35</sys_updated_on><table>sn_hr_core_case</table></sysevent_register></record_update>]]></payload><payload_hash>1069555453</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>18dac92fdb2600103dd39235ca961941</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005796230000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case</table><target_name>sn_hr_core_case.inserted</target_name><type>Event Registration</type><update_domain>global</update_domain><update_guid>cffd11806a727300e769e33ee4d59381</update_guid><update_guid_history>cffd11806a727300e769e33ee4d59381:1069555453,43fd11807b727300613d5065fbf80f81:-840971202</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_02b86e094f303300ad404a10a310c75e</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>Direct Deposit</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_direct_deposit</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:47</sys_created_on><sys_id>02b86e094f303300ad404a10a310c75e</sys_id><sys_mod_count>3</sys_mod_count><sys_name>Direct Deposit</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_02b86e094f303300ad404a10a310c75e</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:06</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>335714074</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>18dac92fdb2600103dd39235ca961944</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005725180000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_direct_deposit</table><target_name>Direct Deposit</target_name><type>Table</type><update_domain>global</update_domain><update_guid>c0edd5405b7273001ce72c959137bad9</update_guid><update_guid_history>c0edd5405b7273001ce72c959137bad9:335714074,f7ddd540a17273002d41e2a08b6325d5:-750638023</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_3a986ec54f303300ad404a10a310c769</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Payroll Case</label><live_feed_enabled>true</live_feed_enabled><name>sn_hr_core_case_payroll</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="HR Case" name="sn_hr_core_case">26986ec54f303300ad404a10a310c747</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-09-21 07:45:56</sys_created_on><sys_id>3a986ec54f303300ad404a10a310c769</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Payroll Case</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_3a986ec54f303300ad404a10a310c769</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:12</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>803210189</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>18dac92fdb2600103dd39235ca961947</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00573dc60000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case_payroll</table><target_name>HR Payroll Case</target_name><type>Table</type><update_domain>global</update_domain><update_guid>2ded5d406a727300c6104d9687eec3e1</update_guid><update_guid_history>2ded5d406a727300c6104d9687eec3e1:803210189,21ed5d40af727300d71e7fea04d600de:-1335973042</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_6b98aec54f303300ad404a10a310c78c</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access>public</access><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Conditions for Criteria</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_m2m_condition_criteria</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2018-02-27 18:42:20</sys_created_on><sys_id>6b98aec54f303300ad404a10a310c78c</sys_id><sys_mod_count>2</sys_mod_count><sys_name>HR Conditions for Criteria</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_6b98aec54f303300ad404a10a310c78c</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:18</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-96436393</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>18dac92fdb2600103dd39235ca96194a</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005753300000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_m2m_condition_criteria</table><target_name>HR Conditions for Criteria</target_name><type>Table</type><update_domain>global</update_domain><update_guid>7eed9d4020727300af09ed0e3d64f483</update_guid><update_guid_history>7eed9d4020727300af09ed0e3d64f483:-96436393,3aed9d40a47273007396738b0dcd4180:-888416138</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_a8b86a094f303300ad404a10a310c781</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access>public</access><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Profile</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_profile</name><number_ref display_value="HRP">0ed768a5531312002b76da86a11c0805</number_ref><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2016-05-06 22:40:48</sys_created_on><sys_id>a8b86a094f303300ad404a10a310c781</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Profile</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_a8b86a094f303300ad404a10a310c781</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:23</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-538444728</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>18dac92fdb2600103dd39235ca96194d</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0057673d0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_profile</table><target_name>HR Profile</target_name><type>Table</type><update_domain>global</update_domain><update_guid>8cfd9d4035727300237b1e97049b3dd8</update_guid><update_guid_history>8cfd9d4035727300237b1e97049b3dd8:-538444728,48fd9d4094727300d5837355a31605d5:-473684727</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_eca822094f303300ad404a10a310c773</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>Bulk Case Creation Run</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_bulk_case_creation_run</name><number_ref display_value="BCC">ee029e440bb032001c252c7885673a1a</number_ref><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-02-02 20:21:42</sys_created_on><sys_id>eca822094f303300ad404a10a310c773</sys_id><sys_mod_count>4</sys_mod_count><sys_name>Bulk Case Creation Run</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_eca822094f303300ad404a10a310c773</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:29</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-965465621</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>18dac92fdb2600103dd39235ca961950</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00577cab0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_bulk_case_creation_run</table><target_name>Bulk Case Creation Run</target_name><type>Table</type><update_domain>global</update_domain><update_guid>a1fddd40247273007828aa0bedd5db9c</update_guid><update_guid_history>a1fddd40247273007828aa0bedd5db9c:-965465621,5dfddd4024727300a638a0fe0b636e98:-1102210550</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_documentation_sn_hr_core_nps_score_u_date_en</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update><sys_documentation element="u_date" label="Date" language="en" table="sn_hr_core_nps_score"><sys_documentation action="INSERT_OR_UPDATE"><element>u_date</element><help/><hint/><label>Date</label><language>en</language><name>sn_hr_core_nps_score</name><plural>Dates</plural><sys_class_name>sys_documentation</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:45:35</sys_created_on><sys_id>352162b34f2a3300ad404a10a310c797</sys_id><sys_mod_count>0</sys_mod_count><sys_name>Date</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_documentation_sn_hr_core_nps_score_u_date_en</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:45:35</sys_updated_on><url/><url_target/></sys_documentation></sys_documentation></record_update>]]></payload><payload_hash>-1229529906</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>18dac92fdb2600103dd39235ca961953</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd6446470000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>HR NPS Score.Date</target_name><type>Field Label</type><update_domain>global</update_domain><update_guid>862162b34d2a3300ede873c68e0821c1</update_guid><update_guid_history>862162b34d2a3300ede873c68e0821c1:-1229529906</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_restricted_caller_access_d457c96bdb2600103dd39235ca9619e3</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_restricted_caller_access"><sys_restricted_caller_access action="INSERT_OR_UPDATE"><operation>read</operation><source>62974aeb0b5303008cd6e7ae37673a42</source><source_scope display_value="Human Resources: Service Portal">3d1da2705b021200a4656ede91f91ab6</source_scope><source_table>sp_widget</source_table><source_type>6</source_type><status>2</status><sys_class_name>sys_restricted_caller_access</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2020-01-30 19:45:45</sys_created_on><sys_id>d457c96bdb2600103dd39235ca9619e3</sys_id><sys_mod_count>0</sys_mod_count><sys_name>3d1da2705b021200a4656ede91f91ab6</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_restricted_caller_access_d457c96bdb2600103dd39235ca9619e3</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2020-01-30 19:45:45</sys_updated_on><target name="sn_hr_core_profile" target_table="sys_db_object">a8b86a094f303300ad404a10a310c781</target><target_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</target_scope><target_table>sys_db_object</target_table><target_type>1</target_type></sys_restricted_caller_access></record_update>]]></payload><payload_hash>-1468324232</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>18dac92fdb2600103dd39235ca961956</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16ff7fcec840000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>3d1da2705b021200a4656ede91f91ab6</target_name><type>Restricted Caller Access Privilege</type><update_domain>global</update_domain><update_guid>1457c96b22260010684146a7065d40e4</update_guid><update_guid_history>1457c96b22260010684146a7065d40e4:-1468324232</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_4dc39beb2f032200a9e7a310c18c9588</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;sn_hr_core.hr_ServiceTemplate&lt;/api_name&gt;&lt;caller_access&gt;1&lt;/caller_access&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;description&gt;Extends the hr_ServiceTemplateBase class, inheriting all methods and functionality.&amp;#13;
&amp;#13;
Override and add customize functionality in this class to maintain a clean reference code base. e.g.:&amp;#13;
   &amp;#13;
   generateServiceTemplate = function(customParameter) {&amp;#13;
      ... (custom functionality) ...&amp;#13;
   }&lt;/description&gt;&lt;name&gt;hr_ServiceTemplate&lt;/name&gt;&lt;script&gt;&lt;![CDATA[var hr_ServiceTemplate = Class.create();
hr_ServiceTemplate.prototype = Object.extendsObject(sn_hr_core.hr_ServiceTemplateBase, {

    type: 'hr_ServiceTemplate'
});]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2016-11-19 01:29:55&lt;/sys_created_on&gt;&lt;sys_id&gt;4dc39beb2f032200a9e7a310c18c9588&lt;/sys_id&gt;&lt;sys_mod_count&gt;4&lt;/sys_mod_count&gt;&lt;sys_name&gt;hr_ServiceTemplate&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_4dc39beb2f032200a9e7a310c18c9588&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 14:30:32&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload><payload_hash>-322457755</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>18dac92fdb2600103dd39235ca961959</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0057886e0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_ServiceTemplate</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>1afddd409d72730040c762285c1fbfef</update_guid><update_guid_history>1afddd409d72730040c762285c1fbfef:-322457755,52fddd4058727300d1900760b7ec61ed:1782361062</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_fa5330019f22120047a2d126c42e70ff</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;sn_hr_core.hr_Constants&lt;/api_name&gt;&lt;caller_access&gt;1&lt;/caller_access&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;description&gt;List of constants used in the State field of the HR flows&lt;/description&gt;&lt;name&gt;hr_Constants&lt;/name&gt;&lt;script&gt;&lt;![CDATA[var hr_Constants = {
		CASE_DRAFT						: 1,
		CASE_CLOSED_COMPLETE 			: 3,
		CASE_CLOSED_INCOMPLETE 			: 4,
		CASE_RESOLVED					: 6,
		CASE_CANCELLED 					: 7,
		CASE_QUALIFIED 					: 10,
		CASE_AWAITING_APPROVAL 			: 11,
		CASE_APPROVED 					: 13,
		CASE_AWAITING_QUALIFICATION 	: 15,
		CASE_ASSIGNED 					: 16,
		CASE_WORK_IN_PROGRESS 			: 18,
		CASE_AWAITING_USER_ACCEPTANCE	: 20,
		TASK_DRAFT 						: 1,
		TASK_CLOSED_COMPLETE 			: 3,
		TASK_CLOSED_INCOMPLETE 			: 4,
		TASK_CANCELLED 					: 7,
		TASK_PENDING_DISPATCH 			: 10,
		TASK_ASSIGNED 					: 16,
		TASK_ACCEPTED 					: 17,
		TASK_WORK_IN_PROGRESS 			: 18,
	
		ROLLUP_WORK_NOTES               : "sn_hr_core.rollup_work_notes",
		MANDATORY_WORK_NOTES            : "sn_hr_core.mandatory_work_notes",
		MANAGED_DOCUMENTS               : "sn_hr_core.managed_documents"
	};]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2016-03-22 23:25:32&lt;/sys_created_on&gt;&lt;sys_id&gt;fa5330019f22120047a2d126c42e70ff&lt;/sys_id&gt;&lt;sys_mod_count&gt;5&lt;/sys_mod_count&gt;&lt;sys_name&gt;hr_Constants&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_fa5330019f22120047a2d126c42e70ff&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 14:30:34&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload><payload_hash>1123363416</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>18dac92fdb2600103dd39235ca96195c</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005792310000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_Constants</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>3afd1180cf727300d46e45716ed08847</update_guid><update_guid_history>3afd1180cf727300d46e45716ed08847:1123363416,72fd11807572730083270559652b1845:-1909097801</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_security_acl_role_f659a1514f633300ad404a10a310c7f3</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl_role"><sys_security_acl_role action="INSERT_OR_UPDATE"><sys_class_name>sys_security_acl_role</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-08-27 19:19:47</sys_created_on><sys_id>f659a1514f633300ad404a10a310c7f3</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sn_hr_core_case_asc.sn_hr_core.asc_user</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_security_acl display_value="sn_hr_core_case_asc">3e59a1514f633300ad404a10a310c7e1</sys_security_acl><sys_update_name>sys_security_acl_role_f659a1514f633300ad404a10a310c7f3</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-08-27 19:19:47</sys_updated_on><sys_user_role display_value="sn_hr_core.asc_user" name="sn_hr_core.asc_user">2e5921114f633300ad404a10a310c7d8</sys_user_role><transaction_id/></sys_security_acl_role></record_update>]]></payload><payload_hash>-196550050</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>18dac92fdb2600103dd39235ca96195f</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16cd48515770000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case_asc</table><target_name>sn_hr_core_case_asc.sn_hr_core.asc_user</target_name><type>Access Roles</type><update_domain>global</update_domain><update_guid>7659a151756333004873283279518ff7</update_guid><update_guid_history>7659a151756333004873283279518ff7:-196550050</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>asmt_metric_definition_a91222f34f2a3300ad404a10a310c7fe</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="asmt_metric_definition"><asmt_metric_definition action="INSERT_OR_UPDATE"><display>9</display><metric display_value="">50e1aeb34f2a3300ad404a10a310c764</metric><order>9</order><selected_image/><sys_class_name>asmt_metric_definition</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:49:39</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>a91222f34f2a3300ad404a10a310c7fe</sys_id><sys_mod_count>0</sys_mod_count><sys_name>9</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>asmt_metric_definition_a91222f34f2a3300ad404a10a310c7fe</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:49:39</sys_updated_on><unselected_image/><value>9</value></asmt_metric_definition><sys_translated_text action="delete_multiple" query="documentkey=a91222f34f2a3300ad404a10a310c7fe"/></record_update>]]></payload><payload_hash>-1959872535</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>1cdac92fdb2600103dd39235ca96193d</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd67ff650000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>9</target_name><type>Assessment Metric Definition</type><update_domain>global</update_domain><update_guid>a91222f35b2a3300ec1a8348309e48ff</update_guid><update_guid_history>a91222f35b2a3300ec1a8348309e48ff:-1959872535</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sysevent_register_765370019f22120047a2d126c42e7064</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sysevent_register"><sysevent_register action="INSERT_OR_UPDATE"><caller_access>1</caller_access><description/><event_name>sn_hr_core_case.assignment_group.changed</event_name><fired_by/><queue/><suffix/><sys_class_name>sysevent_register</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2013-11-04 11:49:58</sys_created_on><sys_id>765370019f22120047a2d126c42e7064</sys_id><sys_mod_count>2</sys_mod_count><sys_name>sn_hr_core_case.assignment_group.changed</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sysevent_register_765370019f22120047a2d126c42e7064</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:35</sys_updated_on><table>sn_hr_core_case</table></sysevent_register></record_update>]]></payload><payload_hash>1968566045</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>1cdac92fdb2600103dd39235ca961940</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0057950f0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case</table><target_name>sn_hr_core_case.assignment_group.changed</target_name><type>Event Registration</type><update_domain>global</update_domain><update_guid>cffd1180687273005386aaec0166ba78</update_guid><update_guid_history>cffd1180687273005386aaec0166ba78:1968566045,43fd1180bf72730094e6deeb9f84cc78:-2058856354</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_app_module_2659a1514f633300ad404a10a310c7de</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_app_module"><sys_app_module action="INSERT_OR_UPDATE"><active>true</active><application display_value="HR Case Management">7f0370019f22120047a2d126c42e7075</application><assessment/><content_page/><device_type/><filter/><hint/><homepage/><image/><link_type>LIST</link_type><map_page/><mobile_title>ASCs</mobile_title><mobile_view_name>Mobile</mobile_view_name><name>sn_hr_core_case_asc</name><order/><override_menu_roles>false</override_menu_roles><query/><report/><roles>sn_hr_core.asc_user</roles><sys_class_name>sys_app_module</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-08-27 19:19:46</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>2659a1514f633300ad404a10a310c7de</sys_id><sys_mod_count>0</sys_mod_count><sys_name>ASCs</sys_name><sys_overrides/><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_app_module_2659a1514f633300ad404a10a310c7de</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-08-27 19:19:46</sys_updated_on><timeline_page/><title>ASCs</title><uncancelable>false</uncancelable><view_name/><window_name/></sys_app_module></record_update>]]></payload><payload_hash>-2044225384</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>1cdac92fdb2600103dd39235ca961943</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16cd485140b0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case_asc</table><target_name>ASCs</target_name><type>Module</type><update_domain>global</update_domain><update_guid>fa59a1510b633300869e5e779809f2e0</update_guid><update_guid_history>fa59a1510b633300869e5e779809f2e0:-2044225384</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_31b82e094f303300ad404a10a310c7db</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>false</actions_access><alter_access>false</alter_access><caller_access>1</caller_access><client_scripts_access>false</client_scripts_access><configuration_access>false</configuration_access><create_access>false</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Visa Category</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_visa_category</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="Application File" name="sys_metadata">8a12332181131300aadba4a47c598e5e</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:46</sys_created_on><sys_id>31b82e094f303300ad404a10a310c7db</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Visa Category</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_31b82e094f303300ad404a10a310c7db</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:11</sys_updated_on><update_access>false</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-138127168</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>1cdac92fdb2600103dd39235ca961946</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005737d90000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_visa_category</table><target_name>HR Visa Category</target_name><type>Table</type><update_domain>global</update_domain><update_guid>0ded5d40ae7273005751d25bf72569cc</update_guid><update_guid_history>0ded5d40ae7273005751d25bf72569cc:-138127168,4ded5d40be72730011ac6d4ab206b3bc:860859103</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_5da862094f303300ad404a10a310c7ed</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Operations Report Frequency</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_op_report_frequency</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:34</sys_created_on><sys_id>5da862094f303300ad404a10a310c7ed</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Operations Report Frequency</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_5da862094f303300ad404a10a310c7ed</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:17</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>1100153</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>1cdac92fdb2600103dd39235ca961949</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00574e770000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_op_report_frequency</table><target_name>HR Operations Report Frequency</target_name><type>Table</type><update_domain>global</update_domain><update_guid>22ed9d40a0727300b99c8d9277c42d61</update_guid><update_guid_history>22ed9d40a0727300b99c8d9277c42d61:1100153,eeed9d40c67273008bcef472ab1dfb2b:173755322</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_97a8a6094f303300ad404a10a310c7cb</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Disciplinary Warning Type</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_disciplinary_warning_type</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:41</sys_created_on><sys_id>97a8a6094f303300ad404a10a310c7cb</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Disciplinary Warning Type</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_97a8a6094f303300ad404a10a310c7cb</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:22</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>1436771089</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>1cdac92fdb2600103dd39235ca96194c</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005761640000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_disciplinary_warning_type</table><target_name>HR Disciplinary Warning Type</target_name><type>Table</type><update_domain>global</update_domain><update_guid>fbed9d409f727300222851803d18e6be</update_guid><update_guid_history>fbed9d409f727300222851803d18e6be:1436771089,b7ed9d40567273002827d1e6dccef1bb:-145336046</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_e6a866094f303300ad404a10a310c71d</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Total Rewards Case</label><live_feed_enabled>true</live_feed_enabled><name>sn_hr_core_case_total_rewards</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="HR Case" name="sn_hr_core_case">26986ec54f303300ad404a10a310c747</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-09-21 07:47:30</sys_created_on><sys_id>e6a866094f303300ad404a10a310c71d</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Total Rewards Case</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_e6a866094f303300ad404a10a310c71d</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:27</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>705326321</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>1cdac92fdb2600103dd39235ca96194f</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005777db0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case_total_rewards</table><target_name>HR Total Rewards Case</target_name><type>Table</type><update_domain>global</update_domain><update_guid>41fddd40a7727300030c4c06e95ff27b</update_guid><update_guid_history>41fddd40a7727300030c4c06e95ff27b:705326321,45fddd40c77273008bc36b4bd7327977:-1884776910</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_dictionary_sn_hr_core_nps_score_u_rating</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update&gt;&lt;sys_dictionary action="INSERT_OR_UPDATE" element="u_rating" table="sn_hr_core_nps_score"&gt;&lt;active&gt;true&lt;/active&gt;&lt;array&gt;false&lt;/array&gt;&lt;array_denormalized&gt;false&lt;/array_denormalized&gt;&lt;attributes/&gt;&lt;audit&gt;false&lt;/audit&gt;&lt;calculation&gt;&lt;![CDATA[(function calculatedFieldValue(current) {

	// Add your code here
	return '';  // return the calculated value

})(current);]]&gt;&lt;/calculation&gt;&lt;choice&gt;1&lt;/choice&gt;&lt;choice_field/&gt;&lt;choice_table/&gt;&lt;column_label&gt;Rating&lt;/column_label&gt;&lt;comments/&gt;&lt;create_roles/&gt;&lt;default_value/&gt;&lt;defaultsort/&gt;&lt;delete_roles/&gt;&lt;dependent/&gt;&lt;dependent_on_field/&gt;&lt;display&gt;false&lt;/display&gt;&lt;dynamic_creation&gt;false&lt;/dynamic_creation&gt;&lt;dynamic_creation_script/&gt;&lt;dynamic_default_value/&gt;&lt;dynamic_ref_qual/&gt;&lt;element&gt;u_rating&lt;/element&gt;&lt;element_reference&gt;false&lt;/element_reference&gt;&lt;foreign_database/&gt;&lt;function_definition/&gt;&lt;function_field&gt;false&lt;/function_field&gt;&lt;internal_type display_value="Integer"&gt;integer&lt;/internal_type&gt;&lt;mandatory&gt;false&lt;/mandatory&gt;&lt;max_length&gt;40&lt;/max_length&gt;&lt;name&gt;sn_hr_core_nps_score&lt;/name&gt;&lt;next_element/&gt;&lt;primary&gt;false&lt;/primary&gt;&lt;read_only&gt;false&lt;/read_only&gt;&lt;read_roles/&gt;&lt;reference/&gt;&lt;reference_cascade_rule/&gt;&lt;reference_floats&gt;false&lt;/reference_floats&gt;&lt;reference_key/&gt;&lt;reference_qual/&gt;&lt;reference_qual_condition/&gt;&lt;reference_type/&gt;&lt;sizeclass/&gt;&lt;spell_check&gt;false&lt;/spell_check&gt;&lt;staged&gt;false&lt;/staged&gt;&lt;sys_class_name&gt;sys_dictionary&lt;/sys_class_name&gt;&lt;sys_created_by&gt;tim_deniston&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2019-07-17 00:45:32&lt;/sys_created_on&gt;&lt;sys_id&gt;26b0aeff4fe63300ad404a10a310c7f6&lt;/sys_id&gt;&lt;sys_mod_count&gt;1&lt;/sys_mod_count&gt;&lt;sys_name&gt;Rating&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_dictionary_sn_hr_core_nps_score_u_rating&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 00:46:32&lt;/sys_updated_on&gt;&lt;table_reference&gt;false&lt;/table_reference&gt;&lt;text_index&gt;false&lt;/text_index&gt;&lt;unique&gt;false&lt;/unique&gt;&lt;use_dependent_field&gt;false&lt;/use_dependent_field&gt;&lt;use_dynamic_default&gt;false&lt;/use_dynamic_default&gt;&lt;use_reference_qualifier&gt;simple&lt;/use_reference_qualifier&gt;&lt;virtual&gt;false&lt;/virtual&gt;&lt;widget/&gt;&lt;write_roles/&gt;&lt;xml_view&gt;false&lt;/xml_view&gt;&lt;/sys_dictionary&gt;&lt;/record_update&gt;</payload><payload_hash>1782821738</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>1cdac92fdb2600103dd39235ca961952</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd6525a40000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>HR NPS Score.Rating</target_name><type>Dictionary</type><update_domain>global</update_domain><update_guid>8c6166b3672a3300a43f3a0fd8f624dc</update_guid><update_guid_history>8c6166b3672a3300a43f3a0fd8f624dc:1782821738,112162b3bc2a3300d867846047afcd39:-2024117386</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_restricted_caller_access_423378f7db210010de1cfe1b6896198d</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_restricted_caller_access"><sys_restricted_caller_access action="INSERT_OR_UPDATE"><operation>read</operation><source>2dee8699c332310038e7fe0712d3aeeb</source><source_scope display_value="Global">global</source_scope><source_table>sys_script</source_table><source_type>0</source_type><status>2</status><sys_class_name>sys_restricted_caller_access</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-12-12 19:53:39</sys_created_on><sys_id>423378f7db210010de1cfe1b6896198d</sys_id><sys_mod_count>0</sys_mod_count><sys_name>global</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_restricted_caller_access_423378f7db210010de1cfe1b6896198d</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-12-12 19:53:39</sys_updated_on><target name="sn_hr_core_service" target_table="sys_db_object">af98aec54f303300ad404a10a310c7ae</target><target_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</target_scope><target_table>sys_db_object</target_table><target_type>1</target_type></sys_restricted_caller_access></record_update>]]></payload><payload_hash>287463765</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>1cdac92fdb2600103dd39235ca961955</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16efbac89fd0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>global</target_name><type>Restricted Caller Access Privilege</type><update_domain>global</update_domain><update_guid>ce3378f7e62100107daf036a02c4ed8d</update_guid><update_guid_history>ce3378f7e62100107daf036a02c4ed8d:287463765</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_3a5370019f22120047a2d126c42e7000</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;
  &lt;sys_script_include action="INSERT_OR_UPDATE"&gt;
    &lt;access&gt;public&lt;/access&gt;
    &lt;active&gt;true&lt;/active&gt;
    &lt;api_name&gt;sn_hr_core.GeneralHRForm&lt;/api_name&gt;
    &lt;caller_access&gt;2&lt;/caller_access&gt;
    &lt;client_callable&gt;false&lt;/client_callable&gt;
    &lt;description&gt;Generate employee verification letter from personal information in the HR profile.&lt;/description&gt;
    &lt;name&gt;GeneralHRForm&lt;/name&gt;
    &lt;script&gt;&lt;![CDATA[/**
 * Utility to generate a PDF from a template
 * @param table, table id, target table, target id
 */

var GeneralHRForm = Class.create();

GeneralHRForm.prototype = {
	initialize : function(tableName, tableId, targetTable, targetId, isPortalcontent) {
		
		/*
			REGEX:
			    /                                -     begin regex
				\${                              -     string starting with
				([a-zA-Z0-9_.]+)                 -     field name can contain 1 (+ at the end) or more
				(&amp;nbsp;|&amp;ensp;|&amp;emsp;|\s|\t)*    -     zero or more combination of non-breaking space, en space, em space, space, or tab
				(\-|\+){1}                       -     exactly one occurence of either (-) or (+)
				(&amp;nbsp;|&amp;ensp;|&amp;emsp;|\s|\t)*    -     zero or more combination of non-breaking space, en space, em space, space, or tab
				(\d{1,4})                        -     1 to 4 number long co-efficient for the offset
				([wdm]{1})                       -     exactly one occurence of w(week), d(day) or m(month)
				(&amp;nbsp;|&amp;ensp;|&amp;emsp;|\s|\t)*    -     zero or more combination of non-breaking space, en space, em space, space, or tab
				}                                -     ending with
				/                                -     end regex
		*/
		
		this.ALL_FIELD_REGEX = /\${([a-zA-Z0-9_.]+)(&amp;nbsp;|&amp;ensp;|&amp;emsp;|\s|\t)*([\-|\+]{1})(&amp;nbsp;|&amp;ensp;|&amp;emsp;|\s|\t)*(\d{1,4})([wdm]{1})(&amp;nbsp;|&amp;ensp;|&amp;emsp;|\s|\t)*}/;
		
		
				/*
			REGEX:
			    /                                -     begin regex
				\${                              -     string starting with
				(Date)                           -     current date 'Date'field 
				(&amp;nbsp;|&amp;ensp;|&amp;emsp;|\s|\t)*    -     zero or more combination of non-breaking space, en space, em space, space, or tab
				(\-|\+){1}                       -     exactly one occurence of either (-) or (+)
				(&amp;nbsp;|&amp;ensp;|&amp;emsp;|\s|\t)*    -     zero or more combination of non-breaking space, en space, em space, space, or tab
				(\d{1,4})                        -     1 to 4 number long co-efficient for the offset
				([wdm]{1})                       -     exactly one occurence of w(week), d(day) or m(month)
				(&amp;nbsp;|&amp;ensp;|&amp;emsp;|\s|\t)*    -     zero or more combination of non-breaking space, en space, em space, space, or tab
				}                                -     ending with
				/                                -     end regex
		*/
		
		this.CURRENT_DATE_REGEX = /\${(Date)(&amp;nbsp;|&amp;ensp;|&amp;emsp;|\s|\t)*([\-|\+]{1})(&amp;nbsp;|&amp;ensp;|&amp;emsp;|\s|\t)*(\d{1,4})([wdm]{1})(&amp;nbsp;|&amp;ensp;|&amp;emsp;|\s|\t)*}/;
		
		/* 
			Globally search for current date with offset 
		*/
		
		this.ALL_CURRENT_DATE_REGEX = /\${(Date)(&amp;nbsp;|&amp;ensp;|&amp;emsp;|\s|\t)*([\-|\+]{1})(&amp;nbsp;|&amp;ensp;|&amp;emsp;|\s|\t)*(\d{1,4})([wdm]{1})(&amp;nbsp;|&amp;ensp;|&amp;emsp;|\s|\t)*}/g;
		
		this.tableId = tableId;
		this.tableName = tableName;
		if (this.tableName == hr.TABLE_TASK) {
			var gr = new GlideRecord(this.tableName);
			gr.get(this.tableId);
			this.parent = gr.parent.getRefRecord();
			if (!this.parent) {
				gs.addErrorMessage(gs.getMessage('Parent case cannot be accessed'));
				return;
			}
			this.targetTable = this.parent.sys_class_name;
			this.targetId = this.parent.sys_id;	
		} else {
			this.targetTable = targetTable || tableName;
			this.targetId = targetId || tableId;
		}

        this.unEvaluatedVariable = [];
        this.inaccessibleVariable = [];
        this.customVariables = ["${Signature}", "${Date}"];

		if (!isPortalcontent) {
			this.templateTableName = "sn_hr_core_document_template";

			if (!tableName)   // no point getting the template field
				return;

			this.templateSysId = this._getTemplateSysId();
			if (!this.templateSysId)
				return;

			var instance = gs.getProperty('glide.servlet.uri');
			this.maxImageBytes = 1*1024*1024;
			this._getTemplateInfo(this.templateTableName, this.templateSysId, instance);
			this._getFileName();
		}
	},
	
	generate : function(manual) {
		var generalFormAPI = new global.GeneralFormAPI(this.fileName, this.targetTable, this.targetId);
		generalFormAPI.setDocument(this.headerImage, this.footerImage, this.footnote, this.headerPosition, this.footerPosition, this.pageSize);
		if (!this._all_signatures_collected(this.body) &amp;&amp; !manual) 
			return false;
		this.body = this.remove_all_variables(this.body);
		generalFormAPI.createPDF(this.body);
		if (!manual)
			this.inactivateRelatedDrafts();
		return true;
	},
	
	userHasSignature: function() {
		var regex = /\${(.*?)_signature}/g;
		var matches = this.body.match(regex);
		var match;
		if (matches) {
			for (var i = 0; i &lt; matches.length; ++i) {
				match = matches[i];
				var userName = match.substring(2, match.indexOf('_signature}'));
				if (userName == gs.getUserName())
					return true;
			}
			return false;
		}
		var regexLegacy = /\${Signature\}/gi;
		var matchesLegacy = this.body.match(regexLegacy);
		if (matchesLegacy)
			return true;
		return false;
	},
	
	/**
	 * This is the file name that will be used when creating the PDF file.
	 */
	_getFileName : function() {
		var fileName;
		if (this.parent &amp;&amp; this.parent.pdf_template)        //HR TASK
			fileName = this._getFileNameFromTask(this.parent);
		else if (this.glideRecord.pdf_template)             //HR CASE
			fileName = this._getFileNameFromTask(this.glideRecord);
		else
			fileName = this.glideRecord.short_description;
		this.fileName = fileName;
	},
	
	_getFileNameFromTask : function(glideRecord) {
		var fileName = glideRecord.pdf_template.name;
		if (glideRecord.subject_person)
			fileName += ' - ' + glideRecord.subject_person.name;
		else if (glideRecord.opened_for)
			fileName += ' - ' + glideRecord.opened_for.name;		
		else if (glideRecord.assigned_to)
			fileName += ' - ' + glideRecord.assigned_to.name;
		return fileName;
	},
	
	_getDocumentBody : function() {
		var signature = this._get_signature();  	//for legacy signature variable ${Signature}
		var signatures = this._get_signatures();	
		var instance = gs.getProperty('glide.servlet.uri');
		
		var gr = new GlideRecord("draft_document");
		var tableQuery = gr.addQuery('table', this.tableName);
		var recordQuery = gr.addQuery('document', this.tableId);
		if (this.parent) {
			tableQuery.addOrCondition('table', this.parent.sys_class_name);
			recordQuery.addOrCondition('document', this.parent.sys_id);
		}
		gr.orderByDesc('sys_created_on');
		gr.addActiveQuery();
		gr.query();
		if (gr.next()) {
			var parsedBody = gr.body + '';
			
			if (parsedBody.length &lt; 1)   // The saved template body should not be empty.
				return '';
			
			// after previewing, the signature would be added to the document
			if (signature) {
				parsedBody = parsedBody.replace(/\${Signature\}/gi, signature);
				parsedBody = parsedBody.replace(/\{\{Signature\}\}/gi, signature);
			}
			if (signatures) {
				for (var property in signatures) {
					var escapeProperty = property.replace(/[*$.^+?(){}|[\]\\]/g,'\\$&amp;');		
					var re = new RegExp("\\$\\{"+escapeProperty+"\\}","gi");
					parsedBody = parsedBody.replace(re,  signatures[property]);
				}
			}
			return parsedBody;
		}
		return '';
	},
	
	_getTemplateSysId : function() {
		//If parent is set then this is a HR Task 
		if (this.parent) {
			if (this.parent.pdf_template)
				return this.parent.pdf_template + '';
			else {
				gs.addErrorMessage(gs.getMessage('PDF template cannot be found on parent case'));
				return null;
			}
		}
			
		this.glideRecord = new GlideRecord(this.tableName);
		if (!this.glideRecord.get(this.tableId)) 
			return null; // if the record does not exist, don't need to search the template, simply return null
		
		if (this.glideRecord.pdf_template)
			return this.glideRecord.pdf_template + '';
		else {
			gs.addErrorMessage(gs.getMessage('PDF template cannot be found'));
			return null;
		}
	},
	
	_getTemplateInfo : function(templateTableName, templateSysId, instance) {
		var gr = new GlideRecord(templateTableName);
		gr.get(templateSysId);
		
		var headerAttachmentSysId  = gr.header.getDisplayValue() ? gr.header.getDisplayValue().substring(0, gr.header.getDisplayValue().indexOf('.iix')) : '';
		var footerAttachmentSysId = gr.footer.getDisplayValue() ? gr.footer.getDisplayValue().substring(0, gr.footer.getDisplayValue().indexOf('.iix')) : '';
		this.headerImage = this._getImageUrl(headerAttachmentSysId);
		this.footerImage = this._getImageUrl(footerAttachmentSysId);
		this.footnote    = gr.footnote + '';
		this.headerPosition = gr.header_position + '';
		this.footerPosition = gr.footer_position + '';
		this.pageSize       = gr.page_size  + '';
		
        if (gr.getValue('html_script_body') != null &amp;&amp; gr.getValue('html_script_body').trim().length &gt; -1)
            this.body = this._parseHTMLScriptBody(gr.html_script_body, instance);
        else 
            this.body = this._parseBody(gr.body, instance);
	},
	
	//Legacy parsed body for HTML type body field
	_parseBody : function(docBody, instance) {
		var documentBody = this._getDocumentBody();
		if (documentBody)
			return documentBody;
		
		var parsedBody = docBody + '';
		var tableName = this.tableName; 
		var tableId = this.tableId;
		
		if (this.parent) {
			tableName = this.parent.sys_class_name;
			tableId = this.parent.sys_id;
		}
			
		var gr = new GlideRecord(tableName);
		if (gr.get(tableId)) {
			
			var grProfile = new GlideRecord('sn_hr_core_profile');
			// subject person isn't required though should always have a value for EVL. If it doesn't, we'll show opened for person
			if (gr.subject_person)
				grProfile.addQuery('user', gr.subject_person);
			else
				grProfile.addQuery('user', gr.opened_for);
			grProfile.query();
			if (grProfile.next()) {

				parsedBody = parsedBody.replace(/\{\{Name\}\}/gi, grProfile.user.name);
				parsedBody = parsedBody.replace(/\{\{Position\}\}/gi, grProfile.position.position);
				if (grProfile.employment_type != '')
					parsedBody = parsedBody.replace(/\{\{Time type\}\}/gi, grProfile.employment_type.getDisplayValue());

				parsedBody = parsedBody.replace(/\{\{Employment start date\}\}/gi, grProfile.employment_start_date);
				parsedBody = parsedBody.replace(/\{\{Work email\}\}/gi, grProfile.user.email);
				parsedBody = parsedBody.replace(/\{\{Work phone\}\}/gi, grProfile.work_phone);
				parsedBody = parsedBody.replace(/\{\{Prefix\}\}/gi, grProfile.user.introduction);
				parsedBody = parsedBody.replace(/\{\{Nationality\}\}/gi, grProfile.nationality);
				parsedBody = parsedBody.replace(/\{\{Manager\}\}/gi, grProfile.user.manager.name);
				parsedBody = parsedBody.replace(/\{\{Department\}\}/gi, grProfile.user.department.name);
				parsedBody = parsedBody.replace(/\{\{Employee number\}\}/gi, grProfile.user.employee_number);
				parsedBody = parsedBody.replace(/\{\{Employment status\}\}/gi, grProfile.employment_status);
				parsedBody = parsedBody.replace(/\{\{Employment type\}\}/gi, grProfile.employment_type);
				parsedBody = parsedBody.replace(/\{\{Gender\}\}/gi, grProfile.user.gender);
				
				var date = new GlideDateTime().getLocalDate();
				parsedBody = parsedBody.replace(/\{\{Date\}\}/gi, date.getDisplayValue());

				// convert to the right image path
				parsedBody = parsedBody.replace(/\/sys_attachment.do\?sys_id=(\w{32})/gi, '/$1.iix');
				parsedBody = parsedBody.replace(/\/sys_attachment.do\?sys_id&amp;#61;(\w{32})/gi, '/$1.iix');
				parsedBody = parsedBody.replace(/src="\//gi, 'src="' + instance);
			} else
				this.body = gs.getMessage('HR Profile not found for subject person.');
		} else
			this.body = gs.getMessage('HR Profile not found.');
		
		return parsedBody;
	},
	
	//Parse routine for HTML script type body
	_parseHTMLScriptBody : function(docBody, instance) {
		var documentBody = this._getDocumentBody();
		if(documentBody)
			return documentBody;
		
		var parsedBody = docBody + '';
		parsedBody = this._setTemplateValues(parsedBody);
		
		// convert to the right image path
		parsedBody = parsedBody.replace(/\/sys_attachment.do\?sys_id=(\w{32})/gi, '/$1.iix');
		parsedBody = parsedBody.replace(/\/sys_attachment.do\?sys_id&amp;#61;(\w{32})/gi, '/$1.iix');
		parsedBody = parsedBody.replace(/src="\//gi, 'src="' + instance);
		
		// set signatures
		var signatures = this._get_signatures();
		if (signatures) {
			for (var property in signatures) {
				var escapeProperty = property.replace(/[*$.^+?(){}|[\]\\]/g,'\\$&amp;');	
				var re = new RegExp("\\$\\{"+escapeProperty+"\\}","gi");
				parsedBody = parsedBody.replace(re,  signatures[property]);
			}
		}
		
		return parsedBody;
	},
	
	parseRichTextHtmlBody : function(docBody, tableName, tablesysId) {
		if (this.tableName)	
			this.tableName = tableName;
		if (this.tableId)
			this.tableId = tablesysId;
		var gr = new GlideRecord(tableName);
		if(!gr.get(tablesysId)){
			return;
		}
		
		docBody = this._setTemplateValues(docBody);
		return docBody;
	},
	
	_setTemplateValues: function(parsedBody){

		var regex = /\${([^}]*)}/g;
		var matched = parsedBody.match(regex);
		var date = new GlideDateTime().getLocalDate();
		var tableName = this.tableName;
		var tableId = this.tableId;
		var securityUtil = new global.HRSecurityUtils();
		
		if (this.parent) {
			tableName = this.parent.sys_class_name;
			tableId = this.parent.sys_id;
		}
		var gr = new GlideRecord(tableName);
		if (gr.get(tableId)) {
			for (var i in matched) {
				if (this.unEvaluatedVariable.indexOf(matched[i]) &gt; -1 || this.inaccessibleVariable.indexOf(matched[i]) &gt; -1 || this.customVariables.indexOf(matched[i]) &gt; -1 || this._isCurrentDateWithOffset(matched[i])) 
					continue;
					
                var element = gr;
				var field;
				
				//Date processing
				var isOffsetDate = this._isOffsetDate(matched[i], gr);
				var str = "";
				var offsetData = this._offsetValues(matched[i]);

 				if(isOffsetDate) {
					str = offsetData.reference;
				} else {
					str = matched[i].match(/\${(.*)}/).pop();
				}
				
				str = str.trim();
				
				if (!str)
					continue;
				var references = str.split(/[\.]+/g);

				for (var j=0; j &lt; references.length;j++) {
					field = references[j];
					if ( j == references.length-1)
						break;
					if (element.isValidField(field)) {
						if (element.getElement(field).canRead())
							element = element.getElement(field).getRefRecord();
						else {
							parsedBody = parsedBody.replace(matched[i], "&lt;font color='#ff0000'&gt;"+matched[i]+"&lt;/font&gt;");
							this.inaccessibleVariable.push(matched[i]);
							break;
						}	
					}
					else 
						break;
				}

				if (element.isValidField(field)) { 
					if (element.getElement(field).canRead()) {
						if(isOffsetDate) {
							parsedBody = parsedBody.replace(matched[i], this._applyOffset(element.getDisplayValue(field), offsetData));
						} else {
							if (gs.nil(element.getElement(field)))
								parsedBody = parsedBody.replace(matched[i], '');
							else
								parsedBody = parsedBody.replace(matched[i], securityUtil.escapeHTML(element.getDisplayValue(field)));
						}
						
					}
					else {
						parsedBody = parsedBody.replace(matched[i], "&lt;font color='#ff0000'&gt;"+matched[i]+"&lt;/font&gt;");
						this.inaccessibleVariable.push(matched[i]);
					}
				}
				else {
					if (field == "signature") {
						parsedBody = parsedBody.replace(matched[i], "${"+element.getValue("user_name")+'_signature'+"}");
					}
					else {
						parsedBody = parsedBody.replace(matched[i], "&lt;font color='#ff0000'&gt;"+matched[i]+"&lt;/font&gt;");
						this.unEvaluatedVariable.push(matched[i]);
					}
				}
			}
			
			
			/*
				- Globally search for all the current date occurences (${Date}) with offset
				- Get offsetObject for each occurence
				- Replace each occurence with offset value
		
			*/ 
			
			var allDates = this.ALL_CURRENT_DATE_REGEX;
			var offsetCurrentDateOccurence = parsedBody.match(allDates);
			if(offsetCurrentDateOccurence != null) {
				for(var index in offsetCurrentDateOccurence) {
					var offsetObject = this._offsetValues(offsetCurrentDateOccurence[index]);
					var dateWithOffset = this._applyOffset(date, offsetObject);
					parsedBody = parsedBody.replace(offsetCurrentDateOccurence[index], dateWithOffset);
				}
			}
			
			/*
				- Replace current date tag ${Date} with current date value
			*/
			parsedBody = parsedBody.replace(/\${Date\}/gi, date.getDisplayValue());
		}
		else
			this.body = gs.getMessage('Record not found');
		return parsedBody;
	},
	
	_get_signature : function() {
		var gr = new GlideRecord('signature_image');
		gr.addQuery('user', gs.getUserID());
		gr.addQuery('table', this.tableName);
		gr.addQuery('document', this.tableId);
		gr.orderByDesc('sys_created_on');
		gr.addActiveQuery();
		gr.query();
		if (gr.next()) {
			var base64Image = new global.GeneralFormAPI().getBase64SignatureImage(gr.sys_id);
			if (!gs.nil(base64Image)) 
				return '&lt;img src=\"data:image/png;base64,'+ base64Image +  '" height="40" width="100"/&gt;';
		}
		
		return '';
	},
	
	_getImageUrl : function(attachmentSysId) {
		if(gs.nil(attachmentSysId))
			return '';
		var imageAttachment = new GlideRecord('sys_attachment');
		if(!imageAttachment.get(attachmentSysId))
			return '';
		var base64Image = String(new GlideSysAttachment().getContentBase64(imageAttachment));
		var imageSize = (base64Image.length * 3)/4;
		if (imageSize &gt; this.maxImageBytes) {
			gs.info('Image size is greater than ' + this.maxImageBytes + ' for SYSID ' + attachmentSysId);
			return '';
		}
		return 'data:image/png;base64,'+ base64Image;
	},

	_get_signatures : function() {
		var signMap = {};
		var gr = new GlideRecord('signature_image');
		var query = gr.addQuery('document', this.tableId);
		if (this.parent) {
			query.addOrCondition('document', this.parent.sys_id);
			var siblings = this._get_siblings(this.tableId);
			if (siblings)
				query.addOrCondition('document', 'IN', siblings);
		} else {
			var children = this._get_children(this.tableId);
			if (children)
				query.addOrCondition('document', 'IN', children);
		}
		
		gr.orderByDesc('sys_created_on');
		gr.addQuery('active', 'true');
		gr.query();
		while (gr.next()) {
			var base64Image = new global.GeneralFormAPI().getBase64SignatureImage(gr.sys_id);
			if (!gs.nil(base64Image))
				signMap[gr.user.user_name+'_signature'] = '&lt;img src=\"data:image/png;base64,'+ base64Image +  '" height="40" width="100"/&gt;';
		}
		return signMap;
	},
	
	_get_children: function (parent) {
		var children;
		var gr = new GlideRecord(hr.TABLE_TASK);
		gr.addQuery('parent', parent);
		gr.addQuery('hr_task_type', 'IN', 'sign_document,e_sign');
		gr.query();
		while (gr.next()) {
			if(gr.hr_task_type == 'sign_document' || (gr.hr_task_type == 'e_sign' &amp;&amp; gr.getElement("sn_esign_esignature_configuration").getRefRecord().getValue("document_type") == "document_template"))
				children ? children += ','+gr.getUniqueValue() : children = gr.getUniqueValue();
		}

		return children;
	},
	
	_get_siblings: function (taskId) {
		var siblings;
		var record = new GlideRecord(hr.TABLE_TASK);
		if (record.get(taskId)) {
			var gr = new GlideRecord(hr.TABLE_TASK);
			gr.addQuery('parent', record.parent.sys_id);
			gr.addQuery('hr_task_type', 'IN', 'sign_document,e_sign');
			gr.setWorkflow(false);
			gr.query();
			while (gr.next()) {
				if(gr.hr_task_type == 'sign_document' || (gr.hr_task_type == 'e_sign' &amp;&amp; gr.getElement("sn_esign_esignature_configuration").getRefRecord().getValue("document_type") == "document_template"))
					siblings ? siblings += ','+gr.getUniqueValue() : siblings = gr.getUniqueValue();
			}
		}
		return siblings;
	},
	
	_all_signatures_collected: function (parsedBody) {
		var regex = /\${(.*?)_signature}/g;
		if (parsedBody.match(regex))
			return false;
		return true;
	},
	
	_getAttachment : function(id) {
		var gr = new GlideRecord('sys_attachment');
		gr.addQuery('table_name', 'signature_image');
		gr.addQuery('table_sys_id', id);
		gr.query();

		if (gr.next())
			return gr;
		else 
			return '';
	},
	
	remove_all_variables: function(parsedBody) {
		var regex = /\${(.*?)}/g;
		var matched = parsedBody.match(regex);

		for (var i in matched) 
			parsedBody = parsedBody.replace(matched[i], "");
			
		return parsedBody;
	},

	validateTemplate: function(parsedBody, tableName, isEmailTemplate){
		if (!tableName) 
		  return parsedBody;
		else {
			parsedBody = this.resetErroredSpanInDocument(parsedBody);
			var regex = /\${([^}]*)}/g;
			var matched = parsedBody.match(regex);
			var gr = new GlideRecord(tableName);
			gr.initialize();
			if (gr) {									//if the gliderecord cannot be initialized do not attempt validation 
				for (var i in matched) {
					if (this.unEvaluatedVariable.indexOf(matched[i]) &gt; -1  || this.inaccessibleVariable.indexOf(matched[i]) &gt; -1 || this.customVariables.indexOf(matched[i]) &gt; -1 || this._isCurrentDateWithOffset(matched[i])) 
						continue;
					
					//Ignore special tokens in email templates
					if (isEmailTemplate &amp;&amp; (matched[i] == '${URI_REF}' || (matched[i].startsWith('${mail_script:') &amp;&amp; matched[i].endsWith('}'))))
						continue;
					
					var element = gr;
					var field;
					
					//Date processing
					var isOffsetDate = this._isOffsetDate(matched[i], gr);
					gs.info("PDUBS 548: " + isOffsetDate);
					var str = "";
					
					if (isOffsetDate) {
						var offsetDate = this._offsetValues(matched[i]);
						str = offsetDate.reference; 
					} else {
						str = matched[i].match(/\${(.*)}/).pop();
					}
					str = str.trim();
					
					if (!str)
						continue;
					var references = str.split(/[\.]+/g);
					for (var j=0; j&lt; references.length;j++) {
						field = references[j];
						if ( j == references.length-1)
							break;
						if (element.isValidField(field)) {
							if (element.getElement(field).canRead()) 
								element = element.getElement(field).getRefRecord();
								
							else {
								parsedBody = parsedBody.replace(matched[i], '&lt;span class="errored-field" style="color:#ff0000;"&gt;'+matched[i]+'&lt;/span&gt;');
								this.inaccessibleVariable.push(matched[i]);
								break;
							}	
						}
						else 
							break;
					}
					if (element.isValidField(field)) { 
						if (!element.getElement(field).canRead() &amp;&amp; !isEmailTemplate) {
							parsedBody = parsedBody.replace(matched[i], '&lt;span class="errored-field" style="color:#ff0000;"&gt;'+matched[i]+'&lt;/span&gt;');
							this.inaccessibleVariable.push(matched[i]);
						}
					}
					else {
						if (field == "signature") 
							continue;
						
						parsedBody = parsedBody.replace(matched[i], '&lt;span class="errored-field" style="color:#ff0000;"&gt;' + matched[i] + '&lt;/span&gt;');
						this.unEvaluatedVariable.push(matched[i]);
					}
				}
			}
			return parsedBody;
		}
	},
	
	resetErroredSpanInDocument : function(documentBody) {
		//regular expression that matches all the span pairs in the documentBody with class as errored-field	
		var spanRegex = /&lt;\s*span\s*class="errored-field".*?&gt;/g;
		var matchedSpanTags = documentBody.match(spanRegex);
		for (var i in matchedSpanTags) {
			documentBody = documentBody.replace(matchedSpanTags[i],"&lt;span&gt;");
		}
		return documentBody;
	},
	
	_isOffsetDate: function(field, gr) {
		var re = this.ALL_FIELD_REGEX;
		var dateWithOffset = field.match(re);
		var offsetDate = {};
		var isDateType = false;
		if(dateWithOffset != null &amp;&amp; gr) {
			offsetDate = {
				"reference" : dateWithOffset[1], //field name
				"sign" : dateWithOffset[3], // add (+) or subtract (-) date
				"quantity" : dateWithOffset[5],
				"type" : dateWithOffset[6]
			};
			isDateType = this.isDateType(offsetDate.reference, gr);
		}
		return (dateWithOffset != null &amp;&amp; isDateType);
	},
	
	_isCurrentDateWithOffset: function(field) {
		var re = this.CURRENT_DATE_REGEX;
		return (field.match(re) != null);
	},
	
	_applyOffset : function(elementValue, offsetValue) {
 		if(elementValue &amp;&amp; !this._isOffsetObjectEmpty(offsetValue)) {
			
			var date = new GlideDateTime();
			date.setDisplayValue(elementValue);
			var sign = parseInt(offsetValue.sign + '1');
			var offset = sign * offsetValue.quantity; 
			
			switch(offsetValue.type) {
				case "w" : date.addWeeksLocalTime(offset);
					break;
				case "m" : date.addMonthsLocalTime(offset);
					break;
				case "d" : date.addDaysLocalTime(offset);
					break;
				default : break;
			}
			return date.getLocalDate().getDisplayValue();
		}
		return "";
	},
	
	_offsetValues: function(field) {
		
		var re = this.ALL_FIELD_REGEX;
		var dateWithOffset = field.match(re);
		
		if(dateWithOffset != null) {
			return {
				"reference" : dateWithOffset[1], //field name
				"sign" : dateWithOffset[3], // add (+) or subtract (-) date
				"quantity" : dateWithOffset[5],
				"type" : dateWithOffset[6]
			};
		}
		return {
			"reference" : "", //field name
			"sign" : "", // add (+) or subtract (-) date
			"quantity" : "",
			"type" : ""
		};
	},
	
	_isOffsetObjectEmpty: function(offsetObject) {
		if (offsetObject == null || offsetObject.reference == "" || offsetObject.sign == "" || offsetObject.quantity == "" || offsetObject.type == "") 
			return true;
		return false;
	},
	
	_draftDocumentQuery: function (tableName, tableId) {
		tableName = tableName || this.tableName;
		tableId = tableId || this.tableId;
		var gr = new GlideRecord("draft_document");
		var tableQuery = gr.addQuery('table', tableName);
		var recordQuery = gr.addQuery('document', tableId);
		if (tableName == hr.TABLE_TASK) {
			var task = new GlideRecord('task');
			task.get(tableId);
			tableQuery.addOrCondition('table', task.parent.sys_class_name);
			recordQuery.addOrCondition('document', task.parent.sys_id);
		}
		gr.addActiveQuery();
		gr.orderByDesc('sys_created_on');
		gr.query();
		return gr;
	},
	
	getDraftDocument: function (tableName, tableId) {
		var gr = this._draftDocumentQuery(tableName, tableId);
		if (gr.next())
			return gr;
		else 
			return null;
	},
	
	inactivateRelatedDrafts: function (tableName, tableId) {
		tableName = tableName || this.tableName;
		tableId = tableId || this.tableId;
		var gr = this._draftDocumentQuery(tableName, tableId);
		gr.setValue('active', false);
		gr.updateMultiple();
		if (new sn_hr_core.hr_CoreUtils().isCase(tableName)) {
			var children = this._get_children(tableId);
			gr = new GlideRecord("draft_document");
			gr.addQuery('table', hr.TABLE_TASK);
			gr.addQuery('document', 'IN', children);
			gr.addActiveQuery();
			gr.query();
			gr.setValue('active', false);
			gr.updateMultiple();
		}
	},
	
	// Checks if an element is of known date types i.e. glide_date_time, date, glide_date
	isDateType: function (fieldName, tableGR) {
		var dateTypes = ['glide_date_time', 'date', 'glide_date', 'due_date'];
		var element = tableGR.getElement(fieldName);

		return ((element.toString() != null) &amp;&amp; dateTypes.indexOf(element.getED().getInternalType()) &gt; -1);
	},
	
	hasDraftDocument: function (tableName, tableId) {
		var gr = this._draftDocumentQuery(tableName, tableId);
		return gr.hasNext();
	},

	type : 'GeneralHRForm'
};]]&gt;&lt;/script&gt;
    &lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;
    &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
    &lt;sys_created_on&gt;2015-04-29 17:23:18&lt;/sys_created_on&gt;
    &lt;sys_id&gt;3a5370019f22120047a2d126c42e7000&lt;/sys_id&gt;
    &lt;sys_mod_count&gt;801&lt;/sys_mod_count&gt;
    &lt;sys_name&gt;GeneralHRForm&lt;/sys_name&gt;
    &lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;
    &lt;sys_policy/&gt;
    &lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;
    &lt;sys_update_name&gt;sys_script_include_3a5370019f22120047a2d126c42e7000&lt;/sys_update_name&gt;
    &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
    &lt;sys_updated_on&gt;2019-11-19 04:10:10&lt;/sys_updated_on&gt;
  &lt;/sys_script_include&gt;
&lt;/record_update&gt;</payload><payload_hash>-1021665051</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>true</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>1cdac92fdb2600103dd39235ca961958</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0057861f0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>GeneralHRForm</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>fb66092b4e260010eb5af08ab37d0b53</update_guid><update_guid_history>fb66092b4e260010eb5af08ab37d0b53:-1021665051,42fddd40ce727300ab782d9d7e683ed3:1477007154,8afddd4078727300545a7a4f54cbe0d0:908293107</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_cf9b28bc53321200eb7c0a1806dc341f</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;public&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;sn_hr_core.hr_Login_Authenticator&lt;/api_name&gt;&lt;caller_access&gt;1&lt;/caller_access&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;description/&gt;&lt;name&gt;hr_Login_Authenticator&lt;/name&gt;&lt;script&gt;&lt;![CDATA[var hr_Login_Authenticator = Class.create();
hr_Login_Authenticator.prototype = {
    initialize: function() {
    },
	
	success : function(task_id, table_name, doc_revision_id){
		// this routine adds document to sn_hr_core_task_type and 
		//close the task with status 'closeComplete'
		
		var doc = new GlideRecord('sn_hr_core_document_acknowledgement');
		doc.initialize();
		
		doc.setValue('acknowledgement_type', 'credential');
		doc.setValue('acknowledged','true');
		doc.setValue('table_name', table_name);
		doc.setValue('table_sys_id', task_id);
		doc.setValue('document_revision', doc_revision_id);
		doc.setValue('user', gs.getUserID());
		doc.insert();
	},

    type: 'hr_Login_Authenticator'
};]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2016-04-12 17:47:37&lt;/sys_created_on&gt;&lt;sys_id&gt;cf9b28bc53321200eb7c0a1806dc341f&lt;/sys_id&gt;&lt;sys_mod_count&gt;25&lt;/sys_mod_count&gt;&lt;sys_name&gt;hr_Login_Authenticator&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_cf9b28bc53321200eb7c0a1806dc341f&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 14:30:34&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload><payload_hash>1845008667</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>1cdac92fdb2600103dd39235ca96195b</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00578fc50000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_Login_Authenticator</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>eefd11808472730029fba3ab6b80fc37</update_guid><update_guid_history>eefd11808472730029fba3ab6b80fc37:1845008667,2afd118097727300a09289f8ed814035:17048092</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_security_acl_role_7659e1514f633300ad404a10a310c70b</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl_role"><sys_security_acl_role action="INSERT_OR_UPDATE"><sys_class_name>sys_security_acl_role</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-08-27 19:19:47</sys_created_on><sys_id>7659e1514f633300ad404a10a310c70b</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sn_hr_core_case_asc.sn_hr_core.asc_user</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_security_acl display_value="sn_hr_core_case_asc">f659e1514f633300ad404a10a310c707</sys_security_acl><sys_update_name>sys_security_acl_role_7659e1514f633300ad404a10a310c70b</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-08-27 19:19:47</sys_updated_on><sys_user_role display_value="sn_hr_core.asc_user" name="sn_hr_core.asc_user">2e5921114f633300ad404a10a310c7d8</sys_user_role><transaction_id/></sys_security_acl_role></record_update>]]></payload><payload_hash>-1252884301</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>1cdac92fdb2600103dd39235ca96195e</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16cd48516a60000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case_asc</table><target_name>sn_hr_core_case_asc.sn_hr_core.asc_user</target_name><type>Access Roles</type><update_domain>global</update_domain><update_guid>3659e151526333006068d43110eb460e</update_guid><update_guid_history>3659e151526333006068d43110eb460e:-1252884301</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>asmt_metric_definition_211222f34f2a3300ad404a10a310c7fd</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="asmt_metric_definition"><asmt_metric_definition action="INSERT_OR_UPDATE"><display>8</display><metric display_value="">50e1aeb34f2a3300ad404a10a310c764</metric><order>8</order><selected_image/><sys_class_name>asmt_metric_definition</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:49:39</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>211222f34f2a3300ad404a10a310c7fd</sys_id><sys_mod_count>0</sys_mod_count><sys_name>8</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>asmt_metric_definition_211222f34f2a3300ad404a10a310c7fd</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:49:39</sys_updated_on><unselected_image/><value>8</value></asmt_metric_definition><sys_translated_text action="delete_multiple" query="documentkey=211222f34f2a3300ad404a10a310c7fd"/></record_update>]]></payload><payload_hash>1894041453</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>50dac92fdb2600103dd39235ca96193c</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd67ff480000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>8</target_name><type>Assessment Metric Definition</type><update_domain>global</update_domain><update_guid>211222f3fa2a33008afff2577823c5fe</update_guid><update_guid_history>211222f3fa2a33008afff2577823c5fe:1894041453</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>pa_dashboards_aaed481d9f902200ef4afa7dc67fcf50</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="pa_dashboards">
  <pa_dashboards action="INSERT_OR_UPDATE">
    <active>true</active>
    <breakdown_source/>
    <color/>
    <group/>
    <groups/>
    <is_breakdown>false</is_breakdown>
    <managed_breakdown/>
    <managed_publisher/>
    <name>Usage by Requestor</name>
    <no_tabs>true</no_tabs>
    <order>2010</order>
    <owner/>
    <restrict_to_roles>pa_viewer,pa_contributor</restrict_to_roles>
    <role_override>false</role_override>
    <roles>api_analytics_read</roles>
    <should_migrate_permissions>false</should_migrate_permissions>
    <sys_class_name>pa_dashboards</sys_class_name>
    <sys_created_by>admin</sys_created_by>
    <sys_created_on>2016-06-27 18:20:26</sys_created_on>
    <sys_domain>global</sys_domain>
    <sys_domain_path>/</sys_domain_path>
    <sys_id>aaed481d9f902200ef4afa7dc67fcf50</sys_id>
    <sys_mod_count>1</sys_mod_count>
    <sys_name>Usage by Requestor</sys_name>
    <sys_overrides/>
    <sys_package display_value="API Analytics" source="com.glide.api_analytics">444d9d27bd043300ca74fc31ed06f33b</sys_package>
    <sys_policy/>
    <sys_scope display_value="Global">global</sys_scope>
    <sys_update_name>pa_dashboards_aaed481d9f902200ef4afa7dc67fcf50</sys_update_name>
    <sys_updated_by>admin</sys_updated_by>
    <sys_updated_on>2019-03-18 20:57:19</sys_updated_on>
    <users/>
    <visible_to>2</visible_to>
  </pa_dashboards>
</record_update>]]></payload><payload_hash>1766990459</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>true</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>50dac92fdb2600103dd39235ca96193f</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16ff7f95fe80000000</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>Usage by Requestor</target_name><type>Dashboard</type><update_domain>global</update_domain><update_guid>e766092bcc26001091e3feef63377647</update_guid><update_guid_history>e766092bcc26001091e3feef63377647:1766990459,6f4ff986b1b023000076dec3990a4e10:-1935327863,2f4ff986fcb0230014fd57e8e12ab50f:-119734956</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sysevent_register_c4ac08890b5332008cd6e7ae37673aaf</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sysevent_register"><sysevent_register action="INSERT_OR_UPDATE"><caller_access>1</caller_access><description>Send email notification to newly added collaborators</description><event_name>sn_hr_core.collaborator_notification</event_name><fired_by/><queue/><suffix>collaborator_notification</suffix><sys_class_name>sysevent_register</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-06-09 22:56:27</sys_created_on><sys_id>c4ac08890b5332008cd6e7ae37673aaf</sys_id><sys_mod_count>3</sys_mod_count><sys_name>sn_hr_core.collaborator_notification</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sysevent_register_c4ac08890b5332008cd6e7ae37673aaf</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:35</sys_updated_on><table>sn_hr_core_case</table></sysevent_register></record_update>]]></payload><payload_hash>549197754</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>50dac92fdb2600103dd39235ca961942</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005796d70000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case</table><target_name>sn_hr_core.collaborator_notification</target_name><type>Event Registration</type><update_domain>global</update_domain><update_guid>cbfd1180d9727300d3c9f2b122e5e688</update_guid><update_guid_history>cbfd1180d9727300d3c9f2b122e5e688:549197754,4ffd1180c07273004490bad700aa7687:2031221179</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_11b8ea094f303300ad404a10a310c776</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>Bulk Case Request</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_bulk_case_request</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2019-04-12 12:25:25</sys_created_on><sys_id>11b8ea094f303300ad404a10a310c776</sys_id><sys_mod_count>1</sys_mod_count><sys_name>Bulk Case Request</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_11b8ea094f303300ad404a10a310c776</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:07</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>1978957709</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>50dac92fdb2600103dd39235ca961945</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005729960000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_bulk_case_request</table><target_name>Bulk Case Request</target_name><type>Table</type><update_domain>global</update_domain><update_guid>5ced5d403e7273002c2a7846e9e59458</update_guid><update_guid_history>5ced5d403e7273002c2a7846e9e59458:1978957709,18ed5d404b727300f52671264474cd55:-2140198740</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_4aa8e2094f303300ad404a10a310c7b1</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Retirement Benefit</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_retirement_benefit</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="HR Benefit" name="sn_hr_core_benefit">9ca8eec54f303300ad404a10a310c7c0</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:37</sys_created_on><sys_id>4aa8e2094f303300ad404a10a310c7b1</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Retirement Benefit</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_4aa8e2094f303300ad404a10a310c7b1</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:13</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>631087808</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>50dac92fdb2600103dd39235ca961948</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005741a50000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_retirement_benefit</table><target_name>HR Retirement Benefit</target_name><type>Table</type><update_domain>global</update_domain><update_guid>35ed5d4083727300e921fe855090befd</update_guid><update_guid_history>35ed5d4083727300e921fe855090befd:631087808,b9ed5d408a727300acdb01fe799829f9:1117503071</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_79a8e2094f303300ad404a10a310c769</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>Substitute Approver</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_substitute_approver</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2019-04-12 12:25:11</sys_created_on><sys_id>79a8e2094f303300ad404a10a310c769</sys_id><sys_mod_count>1</sys_mod_count><sys_name>Substitute Approver</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_79a8e2094f303300ad404a10a310c769</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:19</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-182425142</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>50dac92fdb2600103dd39235ca96194b</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0057564a0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_substitute_approver</table><target_name>Substitute Approver</target_name><type>Table</type><update_domain>global</update_domain><update_guid>c3ed9d408b727300a1ecf44d25195392</update_guid><update_guid_history>c3ed9d408b727300a1ecf44d25195392:-182425142,8fed9d4059727300bef9c8a91724848e:747120979</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_bb98aec54f303300ad404a10a310c7ed</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>Compensation Stocks</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_stocks</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="Compensation" name="sn_hr_core_compensation">4f986ec54f303300ad404a10a310c7c2</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:31</sys_created_on><sys_id>bb98aec54f303300ad404a10a310c7ed</sys_id><sys_mod_count>3</sys_mod_count><sys_name>Compensation Stocks</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_bb98aec54f303300ad404a10a310c7ed</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:24</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>896049857</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>50dac92fdb2600103dd39235ca96194e</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00576bc30000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_stocks</table><target_name>Compensation Stocks</target_name><type>Table</type><update_domain>global</update_domain><update_guid>1cfddd40b1727300a4e1f49121f35c0d</update_guid><update_guid_history>1cfddd40b1727300a4e1f49121f35c0d:896049857,5cfd9d4044727300cf058b3ec5667ffd:1867655234</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_ee29eddd4f233300ad404a10a310c7c3</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access>public</access><actions_access>false</actions_access><alter_access>false</alter_access><caller_access/><client_scripts_access>false</client_scripts_access><configuration_access>false</configuration_access><create_access>false</create_access><create_access_controls>true</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>ASC</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_case_asc</name><number_ref/><provider_class/><read_access>true</read_access><scriptable_table>false</scriptable_table><super_class display_value="HR Case" name="sn_hr_core_case">26986ec54f303300ad404a10a310c747</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-08-27 19:19:46</sys_created_on><sys_id>ee29eddd4f233300ad404a10a310c7c3</sys_id><sys_mod_count>0</sys_mod_count><sys_name>ASC</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_ee29eddd4f233300ad404a10a310c7c3</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-08-27 19:19:46</sys_updated_on><update_access>false</update_access><user_role display_value="sn_hr_core.asc_user" name="sn_hr_core.asc_user">2e5921114f633300ad404a10a310c7d8</user_role><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>1207090350</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>50dac92fdb2600103dd39235ca961951</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16cd4851a6a0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case_asc</table><target_name>ASC</target_name><type>Table</type><update_domain>global</update_domain><update_guid>4359e1512a633300545f78dc5dc6fb26</update_guid><update_guid_history>4359e1512a633300545f78dc5dc6fb26:1207090350</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_documentation_sn_hr_core_nps_score_u_rating_en</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update><sys_documentation element="u_rating" label="Rating" language="en" table="sn_hr_core_nps_score"><sys_documentation action="INSERT_OR_UPDATE"><element>u_rating</element><help/><hint/><label>Rating</label><language>en</language><name>sn_hr_core_nps_score</name><plural>Ratings</plural><sys_class_name>sys_documentation</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:45:35</sys_created_on><sys_id>312162b34f2a3300ad404a10a310c79a</sys_id><sys_mod_count>0</sys_mod_count><sys_name>Rating</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_documentation_sn_hr_core_nps_score_u_rating_en</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:45:35</sys_updated_on><url/><url_target/></sys_documentation></sys_documentation></record_update>]]></payload><payload_hash>1318600876</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>50dac92fdb2600103dd39235ca961954</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd6446060000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>HR NPS Score.Rating</target_name><type>Field Label</type><update_domain>global</update_domain><update_guid>462162b35d2a3300605120da9abbd7c0</update_guid><update_guid_history>462162b35d2a3300605120da9abbd7c0:1318600876</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_58926af34f2a3300ad404a10a310c76c</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="sys_script"&gt;&lt;sys_script action="INSERT_OR_UPDATE"&gt;&lt;abort_action&gt;false&lt;/abort_action&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;action_delete&gt;false&lt;/action_delete&gt;&lt;action_insert&gt;true&lt;/action_insert&gt;&lt;action_query&gt;false&lt;/action_query&gt;&lt;action_update&gt;true&lt;/action_update&gt;&lt;active&gt;true&lt;/active&gt;&lt;add_message&gt;false&lt;/add_message&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;change_fields&gt;false&lt;/change_fields&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;collection&gt;asmt_metric_result&lt;/collection&gt;&lt;condition/&gt;&lt;description/&gt;&lt;execute_function&gt;false&lt;/execute_function&gt;&lt;filter_condition table="asmt_metric_result"&gt;metric.name=nps^source_id=730330019f22120047a2d126c42e70e5^EQ&lt;item endquery="false" field="metric.name" goto="false" newquery="false" operator="=" or="false" value="nps"/&gt;&lt;item endquery="false" field="source_id" goto="false" newquery="false" operator="=" or="false" value="730330019f22120047a2d126c42e70e5"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/filter_condition&gt;&lt;is_rest&gt;false&lt;/is_rest&gt;&lt;message/&gt;&lt;name&gt;Set NPS &lt;/name&gt;&lt;order&gt;100&lt;/order&gt;&lt;priority&gt;100&lt;/priority&gt;&lt;rest_method/&gt;&lt;rest_method_text/&gt;&lt;rest_service/&gt;&lt;rest_service_text/&gt;&lt;rest_variables/&gt;&lt;role_conditions/&gt;&lt;script&gt;&lt;![CDATA[(function executeRule(current, previous /*null when async*/) {

	var nps = new GlideRecord('sn_hr_core_nps_score');
	nps.addQuery('u_case', current.instance.trigger_id);
	nps.addQuery('u_employee', current.user);
	nps.query();

	if (!nps.next()) {
		nps.initialize();
		nps.setValue('u_employee', current.user);
		nps.setValue('u_case', current.reference_value);
	} 
	
	nps.u_date = new GlideDate();
	nps.setValue('u_score', current.actual_value);
	nps.setValue('u_rating', getRating(current.actual_value));
	nps.setValue('u_latest', true);
	var newNps = nps.update();
	
	var oldNps = new GlideRecord('sn_hr_core_nps_score');
	oldNps.addQuery('u_employee', current.user);
	oldNps.addQuery('u_latest', true);
	oldNps.addQuery('sys_id', '!=', newNps);
	oldNps.query();
	oldNps.setValue('u_latest', false);
	oldNps.updateMultiple();

	function getRating(val) {
		if (val &lt;= 6) {
			return '-1';
		} else if (val == 7 || val == 8) {
			return 0;
		} else if (val == 9 || val == 10) {
			return 1;
		} else {
			return null;
		}
	}
})(current, previous);]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script&lt;/sys_class_name&gt;&lt;sys_created_by&gt;tim_deniston&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2019-07-17 00:57:36&lt;/sys_created_on&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;58926af34f2a3300ad404a10a310c76c&lt;/sys_id&gt;&lt;sys_mod_count&gt;6&lt;/sys_mod_count&gt;&lt;sys_name&gt;Set NPS &lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_58926af34f2a3300ad404a10a310c76c&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 12:14:06&lt;/sys_updated_on&gt;&lt;template/&gt;&lt;when&gt;after&lt;/when&gt;&lt;/sys_script&gt;&lt;sys_translated_text action="delete_multiple" query="documentkey=58926af34f2a3300ad404a10a310c76c"/&gt;&lt;/record_update&gt;</payload><payload_hash>-51705403</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>50dac92fdb2600103dd39235ca961957</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bffdaa2180000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>asmt_metric_result</table><target_name>Set NPS </target_name><type>Business Rule</type><update_domain>global</update_domain><update_guid>73be74c435fe33000c9dc3397bb2604e</update_guid><update_guid_history>73be74c435fe33000c9dc3397bb2604e:-51705403,eeaa78c01efe33008fea0dbae1cbd476:-1739644797,6cf83440bffe3300b5ea67569ac8bbe0:-404498590,c297bc0c0dbe33002ec48961cbe90cff:405838669,4c57784c07be3300f3a04b0876e0de56:2047977426,3b94a2779b2a33009a437b5e86150e1f:1795134132,cee3a6f3ed2a33003fc7547c1363988d:-2114158637</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_61e193eb2f032200a9e7a310c18c958b</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;sn_hr_core.hr_ServiceTemplateBase&lt;/api_name&gt;&lt;caller_access&gt;1&lt;/caller_access&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;description&gt;Base class of methods used for the Ordered Task [sn_hr_core_service_activity] table.&amp;#13;
&amp;#13;
Extend this class (or use Script Include 'hr_ServiceTemplate') to override specific methods and add custom functionality.&amp;#13;
&amp;#13;
   var hr_ServiceTemplate = Class.create();&amp;#13;
   hr_ServiceTemplate.prototype = Object.extendsObject(hr_ServiceTemplateBase, {&amp;#13;
      ...&amp;#13;
   });&lt;/description&gt;&lt;name&gt;hr_ServiceTemplateBase&lt;/name&gt;&lt;script&gt;&lt;![CDATA[var hr_ServiceTemplateBase = Class.create();
hr_ServiceTemplateBase.prototype = {
    initialize: function() {
    },
	
	/**
	  * Generate a service template
	  *
	  * @param serviceTemplate GlideRecord for the sn_hr_core_service_activity
	  * @param parent GlideRecord of the parent record for this activity
	  */
	generateServiceTemplate: function(serviceTemplate, parent) {
		if (!serviceTemplate || !serviceTemplate.isValid() || !parent || !parent.isValid())
			return false;
		
		if (serviceTemplate.getValue("child_template"))
			return this._generateTemplate(serviceTemplate, parent);
		
		return false;
	},
	
	_generateTemplate: function(serviceTemplate, parent) {
		var recordSysId = new sn_hr_core.hr_TemplateUtils()._applyChildren(parent.getRecordClassName(), parent.getUniqueValue(), serviceTemplate.getValue("child_template"));
		
		return recordSysId != null;
	},

    type: 'hr_ServiceTemplateBase'
};]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2016-11-19 01:22:48&lt;/sys_created_on&gt;&lt;sys_id&gt;61e193eb2f032200a9e7a310c18c958b&lt;/sys_id&gt;&lt;sys_mod_count&gt;9&lt;/sys_mod_count&gt;&lt;sys_name&gt;hr_ServiceTemplateBase&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_61e193eb2f032200a9e7a310c18c958b&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 14:30:32&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload><payload_hash>1209649947</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>50dac92fdb2600103dd39235ca96195a</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00578a940000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_ServiceTemplateBase</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>5afd11801d727300e810dfb8a2779a07</update_guid><update_guid_history>5afd11801d727300e810dfb8a2779a07:1209649947,dafddd40ff7273003bedbbd3934ec3f8:-970238534</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_security_acl_312162b34f2a3300ad404a10a310c769</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl"><sys_security_acl action="INSERT_OR_UPDATE"><active>true</active><admin_overrides>true</admin_overrides><advanced>false</advanced><condition/><description>Default access control on sn_hr_core_nps_score</description><name>sn_hr_core_nps_score</name><operation display_value="read">read</operation><script/><sys_class_name>sys_security_acl</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:45:34</sys_created_on><sys_id>312162b34f2a3300ad404a10a310c769</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sn_hr_core_nps_score</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_security_acl_312162b34f2a3300ad404a10a310c769</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:45:34</sys_updated_on><type display_value="record">record</type></sys_security_acl></record_update>]]></payload><payload_hash>-46754264</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>50dac92fdb2600103dd39235ca96195d</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd6440990000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>sn_hr_core_nps_score</target_name><type>Access Control</type><update_domain>global</update_domain><update_guid>712162b3d82a3300e3f37b36d47a546c</update_guid><update_guid_history>712162b3d82a3300e3f37b36d47a546c:-46754264</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_ui_list_sn_hr_core_nps_score_null</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update><sys_ui_list parent="" relationship="" sys_domain="global" table="sn_hr_core_nps_score" version="2" view=""><sys_ui_list_element action="INSERT_OR_UPDATE"><average_value>false</average_value><element>u_date</element><list_id display_value="sn_hr_core_nps_score" element="NULL" name="sn_hr_core_nps_score" parent="NULL" relationship="NULL" sys_domain="global" view="Default view">6941e2b34f2a3300ad404a10a310c7cc</list_id><max_value>false</max_value><min_value>false</min_value><position>0</position><sum>false</sum><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:46:06</sys_created_on><sys_id>2541e2b34f2a3300ad404a10a310c7cd</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:46:06</sys_updated_on></sys_ui_list_element><sys_ui_list_element action="INSERT_OR_UPDATE"><average_value>false</average_value><element>u_employee</element><list_id display_value="sn_hr_core_nps_score" element="NULL" name="sn_hr_core_nps_score" parent="NULL" relationship="NULL" sys_domain="global" view="Default view">6941e2b34f2a3300ad404a10a310c7cc</list_id><max_value>false</max_value><min_value>false</min_value><position>1</position><sum>false</sum><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:46:06</sys_created_on><sys_id>a941e2b34f2a3300ad404a10a310c7cd</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:46:06</sys_updated_on></sys_ui_list_element><sys_ui_list_element action="INSERT_OR_UPDATE"><average_value>false</average_value><element>u_latest</element><list_id display_value="sn_hr_core_nps_score" element="NULL" name="sn_hr_core_nps_score" parent="NULL" relationship="NULL" sys_domain="global" view="Default view">6941e2b34f2a3300ad404a10a310c7cc</list_id><max_value>false</max_value><min_value>false</min_value><position>2</position><sum>false</sum><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:46:06</sys_created_on><sys_id>2d41e2b34f2a3300ad404a10a310c7cd</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:46:06</sys_updated_on></sys_ui_list_element><sys_ui_list_element action="INSERT_OR_UPDATE"><average_value>false</average_value><element>u_rating</element><list_id display_value="sn_hr_core_nps_score" element="NULL" name="sn_hr_core_nps_score" parent="NULL" relationship="NULL" sys_domain="global" view="Default view">6941e2b34f2a3300ad404a10a310c7cc</list_id><max_value>false</max_value><min_value>false</min_value><position>3</position><sum>true</sum><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:46:06</sys_created_on><sys_id>ad41e2b34f2a3300ad404a10a310c7cd</sys_id><sys_mod_count>1</sys_mod_count><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 12:18:20</sys_updated_on></sys_ui_list_element><sys_ui_list_element action="INSERT_OR_UPDATE"><average_value>false</average_value><element>u_score</element><list_id display_value="sn_hr_core_nps_score" element="NULL" name="sn_hr_core_nps_score" parent="NULL" relationship="NULL" sys_domain="global" view="Default view">6941e2b34f2a3300ad404a10a310c7cc</list_id><max_value>false</max_value><min_value>false</min_value><position>4</position><sum>false</sum><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:46:06</sys_created_on><sys_id>2141e2b34f2a3300ad404a10a310c7ce</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:46:06</sys_updated_on></sys_ui_list_element><sys_ui_list action="INSERT_OR_UPDATE"><average_value>false</average_value><element/><max_value>false</max_value><min_value>false</min_value><name>sn_hr_core_nps_score</name><parent/><position/><relationship/><sum>false</sum><sys_class_name>sys_ui_list</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:46:06</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>6941e2b34f2a3300ad404a10a310c7cc</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sn_hr_core_nps_score</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_ui_list_sn_hr_core_nps_score_null</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:46:06</sys_updated_on><sys_user/><view display_value="Default view" name="NULL">Default view</view><view_name/></sys_ui_list></sys_ui_list></record_update>]]></payload><payload_hash>-2029221968</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>50dac92fdb2600103dd39235ca961960</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bffde80280000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>HR NPS Score</target_name><type>List Layout</type><update_domain>global</update_domain><update_guid>f9bff0c8f7fe3300e832355a2c4b7aef</update_guid><update_guid_history>f9bff0c8f7fe3300e832355a2c4b7aef:-2029221968,ed41e2b3be2a3300ed6ebb45e7fe33cf:1782486317</update_guid_history><update_set/><view>Default view</view></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>db_image_1067ad084f727300ad404a10a310c7a6</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="db_image"><db_image action="INSERT_OR_UPDATE"><active>true</active><category>general</category><format>png</format><height>70</height><image>bb67e9084f727300ad404a10a310c75f</image><name>indifferent.png</name><size_bytes>2701</size_bytes><sys_class_name>db_image</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 15:11:48</sys_created_on><sys_id>1067ad084f727300ad404a10a310c7a6</sys_id><sys_mod_count>2</sys_mod_count><sys_name>indifferent.png</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>db_image_1067ad084f727300ad404a10a310c7a6</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 15:11:53</sys_updated_on><thumbnail/><width>72</width></db_image><sys_attachment action="INSERT_OR_UPDATE"><average_image_color>#ffffff</average_image_color><chunk_size_bytes>734003</chunk_size_bytes><compressed>true</compressed><content_type>image/png</content_type><encryption_context/><file_name>image</file_name><image_height>70</image_height><image_width>72</image_width><size_bytes>2701</size_bytes><size_compressed>2724</size_compressed><state/><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 15:11:52</sys_created_on><sys_id>bb67e9084f727300ad404a10a310c75f</sys_id><sys_mod_count>2</sys_mod_count><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 15:11:53</sys_updated_on><table_name>ZZ_YYdb_image</table_name><table_sys_id>1067ad084f727300ad404a10a310c7a6</table_sys_id></sys_attachment><sys_attachment_doc action="INSERT_OR_UPDATE"><data>H4sIAAAAAAAAAA==</data><length>16</length><position>0</position><sys_attachment display_value="image" sys_id="bb67e9084f727300ad404a10a310c75f">bb67e9084f727300ad404a10a310c75f</sys_attachment><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 15:11:52</sys_created_on><sys_id>fb67e9084f727300ad404a10a310c75f</sys_id></sys_attachment_doc><sys_attachment_doc action="INSERT_OR_UPDATE"><data>AY0KcvWJUE5HDQoaCgAAAA1JSERSAAAASAAAAEYIAwAAAFg5IgUAAALfUExURQAAAAICAgMDAwQEBAUFBQYGBgcHBwgICAkJCQoKCgsLCw0NDQ4ODg8PDxAQEBERERISEhMTExQUFBUVFRYWFhcXFxgYGBkZGRoaGhsbGxwcHB0dHR4eHh8fHyAgICEhISIiIiMjIyQkJCUlJSYmJicnJygoKCkpKSoqKisrKywsLC4uLi8vLzAwMDExMTIyMjMzMzQ0NDU1NTc3Nzg4ODk5OTs7Ozw8PD09PT4+Pj8/P0BAQEFBQUJCQkNDQ0REREZGRkdHR0hISElJSUpKSktLS0xMTE1NTU9PT1BQUFJSUlRTVFRUVFZWVldWV1dXV1hYWFlZWVpaWltbW1xcXF1dXV5eXl9fX2BgYGFhYWJiYmRkZGVlZWZmZmhoaGlpaWpqamxrbGxsbG1tbW5ubm9vb3BwcHFxcXJycnNzc3R0dHZ2dnd3d3h4eHl5eXp6ent7e3x8fH19fX5+fn9/f4GBgYKCgoODg4SEhIWFhYiIiImJiYqKioyMjI2NjY+Pj5CQkJGRkZKSkpOTk5aWlpeXl5iYmJmZmZqampubm5ycnJ2dnZ6enp+fn6CgoKGhoaKioqSjpKSkpKWlpaampqenp6ioqKmpqaqqqqurq6ysrK2tra6urq+vr7CwsLGxsbKysrOzs7S0tLW1tba2tre3t7i3uLm5ubq6uru7u7y8vL29vb6+vr+/v8DAwMHBwcPDw8TExMXFxcbGxsfHx8nJycrKysvLy83Nzc7Ozs/Pz9DQ0NHR0dLS0tPT09TU1NXV1dbW1tfX19jY2NnZ2dvb29zc3N3d3d7e3t/f3+Dg4OHh4eLi4uPj4+Tj5OTk5OXl5ebm5ufn5+jo6Ono6enp6erq6uvr6+zs7O3t7e7u7u/v7/Dv8PDw8PHx8fLy8vPy8/Pz8/T09PX19fb19vb29vf39/j4+Pn4+fn5+fr5+vr6+vv7+/z7/Pz8/P38/f39/f79/v7+/v/+/////0CNwPQAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wcRDwYxClnP5wAAACZpVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVAgb24gYSBNYWOV5F9bAAAHAklEQVRYw62Y+3sU1RnHyW72Ojuzs7OX2QuJ2aBGFLmKSLwA0galtl5QBC9YE63SiiAGW0UMWFtES8VWWqC0XLwAChptSaIoQigYxTTGSEISSdzd7kync3Jy8jJ/QGd3w96ym92sfX/YfZ7Zs595z3ve9/uec8YpuQyGCMYk57BxGZ8m/S/Y3dneevqbcGEgqR8BDpP+42/++tFrKZ3RqJm6ZNWrx8MEVA/HAlJA7jq6aeVkM83QegvLcUYTa6WoGcu2fNodRmMBtW2fM4Wf4DDTFOWcMb+q6iq7xUbp2EtcE+fvDOQLCoH4+vWmi5wWvWfBM+982CaEJTjT0tK0fjqlN1cYqXnvS5APCAfevNltdZmn3vfHlv5I4DGOLYAknNh72ySbi6GXvP2dNCoo+qIzt0xw88bKl1qCaMSLSeDYy7MMLnr84tbRPRJQ6Mh1xaWsdWco+0LvYdhy09VNSM4KIgBd610843y8Y7QMJG2rfVZPRV0HyQZCpGOVx+v/wcE+CEP2TEdwdvdc0wSqtj+rR9JjjL14ydfnh3IWRM9SO1O0SkIEMoBI95OsS/NAOyi5Dc48YrHpa88RNRzpIEDPl9CaX5wj5/PgSMGzv6IcprUiGeERRltNfPEKQZAgt0swqAjhahtnfxdL6SBy9ArOUt0FStayTLfOB1nHrFMkFQTK2SrasjQoE5Dzw4Ain7vLYbulJxWEyGanf9KRyACcL0iBjyrs7FaSAsKt0zyOF/6tDOY5rZhqoY0+5zVtqVNbbjD/sO+/Ms7pRlIIQemdpqc3KtFkGgY1GUudjRiSNIuQDAI2AAoJJovIIRtffFpOgAL327ifh5KXCwRh5OqBmhkQ/YxX+c+sxU9I8alB86UlF9Wj5ATqeG3t38mIyhUPvbyvi5BEYcCnZSUTW+Mg/Du2ZOm3Axjik/9ink6nX5OuJX2PU7R27ueQFMrAnX7vjvjUxCUO9tWBZJfXGa1WXv+XNNA2rZM2UBtwQvEGcZ3Vu0yMgQgEZ/jZzyEBQniBRqeji55OAz1hNhvGFS1ObnuhL3zuG3phIAY6zJjuFiJTv4CSf8rQGqvmN2nhfkZnNlKeR1PaiDyLY94AMTo1eJpn/5TkkCoE9ZdzJlPlv9JA/5zJ6m2TD6Qm2ybO/ZyCoyA0h9KfwskgBX/wk8seaYXz6Sq0yntrvZj6sNHA3S/Hgv2lyTyhY4RQZKwWKTyY/ui0wz69PxAFHdfbb5VGJl+eFde1kKOahyIgaCwuW6sUDILlvO4jKQrarvHUKVgp0PCzHt3+WLB3aLzr1SYDAAWDSAIkk/8biBSGSgOpYvu9QWqwVRD+PqADsaJt0PpXRuSqsHDjZbzuGESn1qznKqVCV1/pnc1QJ6XhEtGbugvOow4Dd1VnLI96FlKWw7iApI4OPmgwVQ9FYwThV1i2Lql/9PUGR7NQSMKJVw2tMXr+rERjhIPvWQ2VgbiiiycaDo9mDQ0N3RcERhWci7Xmt2NSi8O98/zuRnG46ZN9HEOrZqGy2/QmHCNJ8mHeM7crBgIJPeY3rpOGlRi/oqFzgYzvCcNCK63muIekYRAmf+DKb+4cuBC+2nsfVu2hmprqjFZTU/NiXygWpv7uqunudy+0I4D2GY7Sd4TUxQJCBjLaoFoDBMX2fPJulrmmV4mDUB3D35W26mqak7jhJBCJ/hCrgs4FjHaTQOIg6Ka91D4CWUGDSaChBIi8QRstX+NE78cD20zOyS3phxWATBWYeCqdKrPRu1DS/kgMBavGe2uFvNM5si0BFFjuL7upJ3XrB285ed/u/EGRDRTeW+Tz7MGpOzbor+bs046NocxAbpjiNNUE03a1gNtvZG1TPstP3CJDyGeVl7irzoUhDST3nvS4rfd0kXx8igw6vdTsqGhEI88iQ+IunmVvasmDBAgrX/6Iczi2ooyno//8VcvaZp5AuUkIHZ/t9bu2i1lOkIN7eNZ2wwdyrjgB2j/LxZVuCcjZTpB4u50qqXiqHQmjdAJQWn853mPnNkujnLJx05WWcvv8eiRlXz58ZI6vhLvuUGodpJ6yiYhP3ma0mnS1R/oQkOFyiCdzxOtQ80rK5mYWnwI0yilbVU70zQvX2njKf/veM2Lkpia22VbrVBJBEdp3LvbzXn72xp7cFwgSalvDGi+exPmePBCInIEGZFEUwmEUOrl/hYsqL7MyT301ci+f6W4Ek0+qS23jnZTet2jDb7cd/EdT/d4dr61bVMJRVm9R2YpmyP+Spf/D5xb6nBYLa/f53OVTJzrVb95opZ2LVn8sZWx9WUCKjL89+vs7rBpNsVZjY0yGYp1W67hzS5s6wzFd+0SiSxT8VdOuF1f/ePbMuffVbv5bUzeWhxQIjukiKsETAhFDBd6xFWD/A839DutaZ3PpAAAAAElFTkSuQmCCMUR5w40KAAA=</data><length>3620</length><position>1</position><sys_attachment display_value="image" sys_id="bb67e9084f727300ad404a10a310c75f">bb67e9084f727300ad404a10a310c75f</sys_attachment><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 15:11:52</sys_created_on><sys_id>7f67e9084f727300ad404a10a310c75f</sys_id></sys_attachment_doc></record_update>]]></payload><payload_hash>1383613019</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>54dac92fdb2600103dd39235ca96193e</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c007d632e0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>indifferent.png</target_name><type>Images</type><update_domain>global</update_domain><update_guid>7f67a1c85572730064c8c560fe86aa9d</update_guid><update_guid_history>7f67a1c85572730064c8c560fe86aa9d:1383613019,b767e9082a727300a02c264b9e4a1864:-94703532,3f67e908d0727300307c3f4e71bee462:-94703532,e66761c8ef727300b60938150ebe6cd5:1530591211</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sysevent_register_7e5370019f22120047a2d126c42e7063</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sysevent_register"><sysevent_register action="INSERT_OR_UPDATE"><caller_access>1</caller_access><description>No more open tasks for this Case</description><event_name>sn_hr_core_task.allClosed</event_name><fired_by>All Tasks are closed or cancelled</fired_by><queue/><suffix/><sys_class_name>sysevent_register</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2015-08-31 21:20:36</sys_created_on><sys_id>7e5370019f22120047a2d126c42e7063</sys_id><sys_mod_count>3</sys_mod_count><sys_name>sn_hr_core_task.allClosed</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sysevent_register_7e5370019f22120047a2d126c42e7063</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:35</sys_updated_on><table>sn_hr_core_task</table></sysevent_register></record_update>]]></payload><payload_hash>-1622676286</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>54dac92fdb2600103dd39235ca961941</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005795e10000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_task</table><target_name>sn_hr_core_task.allClosed</target_name><type>Event Registration</type><update_domain>global</update_domain><update_guid>cbfd11800c72730098da7c7f9c1f937f</update_guid><update_guid_history>cbfd11800c72730098da7c7f9c1f937f:-1622676286,4ffd1180bf727300a998efa4df26207e:1272844995</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_choice_sn_hr_core_nps_score_u_score</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update><sys_choice action="INSERT_OR_UPDATE" field="u_score" table="sn_hr_core_nps_score" version="3"><sys_choice action="INSERT_OR_UPDATE"><dependent_value/><element>u_score</element><hint/><inactive>false</inactive><label>1</label><language>en</language><name>sn_hr_core_nps_score</name><sequence>0</sequence><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:47:52</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>67a166b34f2a3300ad404a10a310c786</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:47:52</sys_updated_on><value>1</value></sys_choice><sys_choice action="INSERT_OR_UPDATE"><dependent_value/><element>u_score</element><hint/><inactive>false</inactive><label>2</label><language>en</language><name>sn_hr_core_nps_score</name><sequence>1</sequence><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:47:52</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>2ba166b34f2a3300ad404a10a310c787</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:47:52</sys_updated_on><value>2</value></sys_choice><sys_choice action="INSERT_OR_UPDATE"><dependent_value/><element>u_score</element><hint/><inactive>false</inactive><label>3</label><language>en</language><name>sn_hr_core_nps_score</name><sequence>2</sequence><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:47:52</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>e7a166b34f2a3300ad404a10a310c788</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:47:52</sys_updated_on><value>3</value></sys_choice><sys_choice action="INSERT_OR_UPDATE"><dependent_value/><element>u_score</element><hint/><inactive>false</inactive><label>4</label><language>en</language><name>sn_hr_core_nps_score</name><sequence>3</sequence><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:47:52</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>a7a166b34f2a3300ad404a10a310c789</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:47:52</sys_updated_on><value>4</value></sys_choice><sys_choice action="INSERT_OR_UPDATE"><dependent_value/><element>u_score</element><hint/><inactive>false</inactive><label>5</label><language>en</language><name>sn_hr_core_nps_score</name><sequence>4</sequence><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:47:52</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>67a166b34f2a3300ad404a10a310c78a</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:47:52</sys_updated_on><value>5</value></sys_choice><sys_choice action="INSERT_OR_UPDATE"><dependent_value/><element>u_score</element><hint/><inactive>false</inactive><label>6</label><language>en</language><name>sn_hr_core_nps_score</name><sequence>5</sequence><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:47:52</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>27a166b34f2a3300ad404a10a310c78b</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:47:52</sys_updated_on><value>6</value></sys_choice><sys_choice action="INSERT_OR_UPDATE"><dependent_value/><element>u_score</element><hint/><inactive>false</inactive><label>7</label><language>en</language><name>sn_hr_core_nps_score</name><sequence>6</sequence><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:47:52</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>e3a166b34f2a3300ad404a10a310c78c</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:47:52</sys_updated_on><value>7</value></sys_choice><sys_choice action="INSERT_OR_UPDATE"><dependent_value/><element>u_score</element><hint/><inactive>false</inactive><label>8</label><language>en</language><name>sn_hr_core_nps_score</name><sequence>7</sequence><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:47:52</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>a3a166b34f2a3300ad404a10a310c78d</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:47:52</sys_updated_on><value>8</value></sys_choice><sys_choice action="INSERT_OR_UPDATE"><dependent_value/><element>u_score</element><hint/><inactive>false</inactive><label>9</label><language>en</language><name>sn_hr_core_nps_score</name><sequence>8</sequence><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:47:52</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>63a166b34f2a3300ad404a10a310c78e</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:47:52</sys_updated_on><value>9</value></sys_choice><sys_choice action="INSERT_OR_UPDATE"><dependent_value/><element>u_score</element><hint/><inactive>false</inactive><label>10</label><language>en</language><name>sn_hr_core_nps_score</name><sequence>9</sequence><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:47:52</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>23a166b34f2a3300ad404a10a310c78f</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:47:52</sys_updated_on><value>10</value></sys_choice><sys_choice_set action="INSERT_OR_UPDATE"><element>u_score</element><name>sn_hr_core_nps_score</name><sys_class_name>sys_choice_set</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:47:52</sys_created_on><sys_id>efa166b34f2a3300ad404a10a310c786</sys_id><sys_mod_count>0</sys_mod_count><sys_name>u_score</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_choice_sn_hr_core_nps_score_u_score</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:47:52</sys_updated_on></sys_choice_set></sys_choice></record_update>]]></payload><payload_hash>948796801</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>54dac92fdb2600103dd39235ca961944</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd665d1a0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>HR NPS Score.Score</target_name><type>Choice list</type><update_domain>global</update_domain><update_guid>23a1aab3a32a330024c23ca1bf22276d</update_guid><update_guid_history>23a1aab3a32a330024c23ca1bf22276d:948796801</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_39b82e094f303300ad404a10a310c7f0</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access>public</access><actions_access>false</actions_access><alter_access>false</alter_access><caller_access>1</caller_access><client_scripts_access>false</client_scripts_access><configuration_access>false</configuration_access><create_access>false</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Template</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_template</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="Template" name="sys_template">8c22f32181131300aadba4a47c598e77</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2018-02-27 18:42:40</sys_created_on><sys_id>39b82e094f303300ad404a10a310c7f0</sys_id><sys_mod_count>2</sys_mod_count><sys_name>HR Template</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_39b82e094f303300ad404a10a310c7f0</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:12</sys_updated_on><update_access>false</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>439718098</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>54dac92fdb2600103dd39235ca961947</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00573b9b0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_template</table><target_name>HR Template</target_name><type>Table</type><update_domain>global</update_domain><update_guid>59ed5d40f272730059bc58d4182104db</update_guid><update_guid_history>59ed5d40f272730059bc58d4182104db:439718098,9ded5d404b727300997d700fdef951d7:1125545363</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_65b82e094f303300ad404a10a310c726</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Workforce Administration Case</label><live_feed_enabled>true</live_feed_enabled><name>sn_hr_core_case_workforce_admin</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="HR Case" name="sn_hr_core_case">26986ec54f303300ad404a10a310c747</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-09-21 07:47:49</sys_created_on><sys_id>65b82e094f303300ad404a10a310c726</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Workforce Administration Case</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_65b82e094f303300ad404a10a310c726</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:18</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-321673786</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>54dac92fdb2600103dd39235ca96194a</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005752390000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case_workforce_admin</table><target_name>HR Workforce Administration Case</target_name><type>Table</type><update_domain>global</update_domain><update_guid>32ed9d40c37273002ac071a98ba4c07f</update_guid><update_guid_history>32ed9d40c37273002ac071a98ba4c07f:-321673786,36ed9d4087727300baad48af54d2db7b:621435911</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_a2a826094f303300ad404a10a310c7d6</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>Tuition Reimbursement</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_tuition_reimbursement</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:38</sys_created_on><sys_id>a2a826094f303300ad404a10a310c7d6</sys_id><sys_mod_count>3</sys_mod_count><sys_name>Tuition Reimbursement</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_a2a826094f303300ad404a10a310c7d6</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:23</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>1862872757</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>54dac92fdb2600103dd39235ca96194d</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005765c50000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_tuition_reimbursement</table><target_name>Tuition Reimbursement</target_name><type>Table</type><update_domain>global</update_domain><update_guid>40fd9d4068727300c90a0fa707d221d4</update_guid><update_guid_history>40fd9d4068727300c90a0fa707d221d4:1862872757,0cfd9d40ae72730042f93f8fec623ad0:486167286</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_eb98aec54f303300ad404a10a310c76b</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Operations System to Report Type</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_op_system_to_report_type</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:30</sys_created_on><sys_id>eb98aec54f303300ad404a10a310c76b</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Operations System to Report Type</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_eb98aec54f303300ad404a10a310c76b</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:28</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>525719725</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>54dac92fdb2600103dd39235ca961950</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00577b660000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_op_system_to_report_type</table><target_name>HR Operations System to Report Type</target_name><type>Table</type><update_domain>global</update_domain><update_guid>15fddd4037727300cfbd575e680b2a97</update_guid><update_guid_history>15fddd4037727300cfbd575e680b2a97:525719725,19fddd4088727300f55331dd2ea70087:1350593612</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_documentation_sn_hr_core_nps_score_u_case_en</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update><sys_documentation element="u_case" label="Case" language="en" table="sn_hr_core_nps_score"><sys_documentation action="INSERT_OR_UPDATE"><element>u_case</element><help/><hint/><label>Case</label><language>en</language><name>sn_hr_core_nps_score</name><plural>Cases</plural><sys_class_name>sys_documentation</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:54:35</sys_created_on><sys_id>c63362374f2a3300ad404a10a310c7d1</sys_id><sys_mod_count>0</sys_mod_count><sys_name>Case</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_documentation_sn_hr_core_nps_score_u_case_en</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:54:35</sys_updated_on><url/><url_target/></sys_documentation></sys_documentation></record_update>]]></payload><payload_hash>-1276465838</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>54dac92fdb2600103dd39235ca961953</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd6c867f0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>HR NPS Score.Case</target_name><type>Field Label</type><update_domain>global</update_domain><update_guid>02336237e32a3300a40ba4f574a009e1</update_guid><update_guid_history>02336237e32a3300a40ba4f574a009e1:-1276465838</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_restricted_caller_access_9747416bdb2600103dd39235ca96192b</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_restricted_caller_access"><sys_restricted_caller_access action="INSERT_OR_UPDATE"><operation>execute</operation><source>f9e232209f22120047a2d126c42e70b0</source><source_scope display_value="Human Resources: Service Portal">3d1da2705b021200a4656ede91f91ab6</source_scope><source_table>sp_widget</source_table><source_type>6</source_type><status>2</status><sys_class_name>sys_restricted_caller_access</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2020-01-30 19:45:42</sys_created_on><sys_id>9747416bdb2600103dd39235ca96192b</sys_id><sys_mod_count>0</sys_mod_count><sys_name>3d1da2705b021200a4656ede91f91ab6</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_restricted_caller_access_9747416bdb2600103dd39235ca96192b</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2020-01-30 19:45:42</sys_updated_on><target>fe5330019f22120047a2d126c42e70ff</target><target_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</target_scope><target_table>sys_script_include</target_table><target_type>2</target_type></sys_restricted_caller_access></record_update>]]></payload><payload_hash>-746849549</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>54dac92fdb2600103dd39235ca961956</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16ff7fcdf960000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>3d1da2705b021200a4656ede91f91ab6</target_name><type>Restricted Caller Access Privilege</type><update_domain>global</update_domain><update_guid>2f470d6bae260010489231d99254bdc9</update_guid><update_guid_history>2f470d6bae260010489231d99254bdc9:-746849549</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_4752335353a03200d901a7e6a11c08b6</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;public&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;sn_hr_core.hr_TemplateOwnership&lt;/api_name&gt;&lt;caller_access&gt;1&lt;/caller_access&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;description&gt;Helps in determining who can edit templates&lt;/description&gt;&lt;name&gt;hr_TemplateOwnership&lt;/name&gt;&lt;script&gt;&lt;![CDATA[var hr_TemplateOwnership = Class.create();
hr_TemplateOwnership.prototype = {
    initialize: function() {
    },
	
	canCreateTemplate: function(template) {
		var roles = new hr_Utils();
		// if a life cycle admin, can edit regardless of owning group
		var isHrAdmin = roles.checkUserHasRole('sn_hr_core.admin');
		if (isHrAdmin)
			return true;
		
		var isActivityWriter = roles.checkUserHasRole('sn_hr_le.activity_writer');
		return isActivityWriter;
	},
	
	canEditTemplate: function(template) {
		var roles = new hr_Utils();
		// if a life cycle admin, can edit regardless of owning group
		var isHrAdmin = roles.checkUserHasRole('sn_hr_core.admin');
		if (isHrAdmin)
			return true;
		
		// if not an activity writer, then cannot edit, regardless of owning group
		var isActivityWriter = roles.checkUserHasRole('sn_hr_le.activity_writer');
		if (!isActivityWriter)
			return false;
		
		// has activity writer, but must be in group too
		if (template.owning_group) {
			var grGroups = new GlideRecord('sys_user_grmember');
			grGroups.addQuery('user', gs.getUserID());
			grGroups.addQuery('group', template.getValue('owning_group'));
			grGroups.query();
			var isMemberOf = grGroups.next();
			return isMemberOf;
		} 
		
		return template.isNewRecord();
	},
	
	getAllowableGroups : function() {
		var groups = [];
		// if has role sn_hr_core.admin, return all active groups
		// otherwise return groups that user is a direct member of
		var roles = new hr_Utils();
		var isHrAdmin = roles.checkUserHasRole('sn_hr_core.admin');
		
		if (isHrAdmin) 
			return 'active=true';
		
		var grGroupMember = new GlideRecord('sys_user_grmember');
		grGroupMember.addQuery('group.active', true);
		grGroupMember.addQuery('user', gs.getUserID());
		grGroupMember.query();
		while (grGroupMember.next())
			groups.push(grGroupMember.getValue('group'));
		
		return 'sys_idIN' + groups.join(',');
	},

    type: 'hr_TemplateOwnership'
};]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-01-31 22:33:20&lt;/sys_created_on&gt;&lt;sys_id&gt;4752335353a03200d901a7e6a11c08b6&lt;/sys_id&gt;&lt;sys_mod_count&gt;16&lt;/sys_mod_count&gt;&lt;sys_name&gt;hr_TemplateOwnership&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_4752335353a03200d901a7e6a11c08b6&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 14:30:32&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload><payload_hash>1275204513</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>54dac92fdb2600103dd39235ca961959</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005787ee0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_TemplateOwnership</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>4afddd4000727300a22fd81a70b7abeb</update_guid><update_guid_history>4afddd4000727300a22fd81a70b7abeb:1275204513,82fddd4038727300cef47f21e7ee3de9:-511453824</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_f25370019f22120047a2d126c42e7000</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;sn_hr_core.hr_Configuration&lt;/api_name&gt;&lt;caller_access&gt;1&lt;/caller_access&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;description/&gt;&lt;name&gt;hr_Configuration&lt;/name&gt;&lt;script&gt;&lt;![CDATA[var hr_Configuration = Class.create();
hr_Configuration.prototype = {
	initialize: function() {
	},
	
	getProperty : function(propertyName, defaultValue) {
		var gr = new GlideRecord("sys_properties");
		gr.addQuery("name", propertyName);
		gr.query();
		if (gr.next())
			return gr.getValue("value");
		
		// Check if no default value is provided
		if (defaultValue != undefined)
			return defaultValue;
		
		return null;		
	},
	
	getBooleanProperty : function(propertyName, defaultValue) {
		var gr = new GlideRecord("sys_properties");
		gr.addQuery("name", propertyName);
		gr.query();
		if (gr.next())
			return gr.getValue("value") == true || gr.getValue("value") == "true";
		
		// Check if no default value is provided
		if (defaultValue != undefined)
			return defaultValue;
		
		return null;		
	},
	
	getIntProperty : function(propertyName, defaultValue) {
		var gr = new GlideRecord("sys_properties");
		gr.addQuery("name", propertyName);
		gr.query();
		if (gr.next() &amp;&amp; !isNaN(gr.getValue("value")))
			return Number(gr.getValue("value"));
		
		// Check if no default value is provided
		if (defaultValue != undefined)
			return defaultValue;
		
		return null;		
	},
	
	type: 'hr_Configuration'
};

]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2015-10-08 15:32:17&lt;/sys_created_on&gt;&lt;sys_id&gt;f25370019f22120047a2d126c42e7000&lt;/sys_id&gt;&lt;sys_mod_count&gt;15&lt;/sys_mod_count&gt;&lt;sys_name&gt;hr_Configuration&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_f25370019f22120047a2d126c42e7000&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 14:30:34&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload><payload_hash>-164671648</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>54dac92fdb2600103dd39235ca96195c</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005791a10000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_Configuration</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>bafd1180ca72730079508fd8bd098e43</update_guid><update_guid_history>bafd1180ca72730079508fd8bd098e43:-164671648,f2fd1180cf7273000bd41ceb9ffc1141:1059802913</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_security_acl_role_bd2162b34f2a3300ad404a10a310c76c</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl_role"><sys_security_acl_role action="INSERT_OR_UPDATE"><sys_class_name>sys_security_acl_role</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:45:34</sys_created_on><sys_id>bd2162b34f2a3300ad404a10a310c76c</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sn_hr_core_nps_score.sn_hr_core.hr_nps_score_user</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_security_acl display_value="sn_hr_core_nps_score">312162b34f2a3300ad404a10a310c769</sys_security_acl><sys_update_name>sys_security_acl_role_bd2162b34f2a3300ad404a10a310c76c</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:45:34</sys_updated_on><sys_user_role display_value="sn_hr_core.hr_nps_score_user" name="sn_hr_core.hr_nps_score_user">c1216a334f2a3300ad404a10a310c71d</sys_user_role><transaction_id/></sys_security_acl_role></record_update>]]></payload><payload_hash>971923884</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>54dac92fdb2600103dd39235ca96195f</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd6440ce0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>sn_hr_core_nps_score.sn_hr_core.hr_nps_score_user</target_name><type>Access Roles</type><update_domain>global</update_domain><update_guid>b52162b3d82a3300dcaed2b2f2fdc37c</update_guid><update_guid_history>b52162b3d82a3300dcaed2b2f2fdc37c:971923884</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>asmt_metric_definition_a51222f34f2a3300ad404a10a310c7fb</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="asmt_metric_definition"><asmt_metric_definition action="INSERT_OR_UPDATE"><display>7</display><metric display_value="">50e1aeb34f2a3300ad404a10a310c764</metric><order>7</order><selected_image/><sys_class_name>asmt_metric_definition</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:49:39</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>a51222f34f2a3300ad404a10a310c7fb</sys_id><sys_mod_count>0</sys_mod_count><sys_name>7</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>asmt_metric_definition_a51222f34f2a3300ad404a10a310c7fb</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:49:39</sys_updated_on><unselected_image/><value>7</value></asmt_metric_definition><sys_translated_text action="delete_multiple" query="documentkey=a51222f34f2a3300ad404a10a310c7fb"/></record_update>]]></payload><payload_hash>1452988145</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>58dac92fdb2600103dd39235ca96193d</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd67ff290000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>7</target_name><type>Assessment Metric Definition</type><update_domain>global</update_domain><update_guid>a51222f32a2a33003e5be88f7b7edafc</update_guid><update_guid_history>a51222f32a2a33003e5be88f7b7edafc:1452988145</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sysevent_register_725370019f22120047a2d126c42e7065</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sysevent_register"><sysevent_register action="INSERT_OR_UPDATE"><caller_access>1</caller_access><description>Event to be fired to send the feedback email to the requestor</description><event_name>sn_hr_core_case.feedback</event_name><fired_by>HR Case User Acceptance</fired_by><queue/><suffix/><sys_class_name>sysevent_register</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2016-01-25 23:08:14</sys_created_on><sys_id>725370019f22120047a2d126c42e7065</sys_id><sys_mod_count>2</sys_mod_count><sys_name>sn_hr_core_case.feedback</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sysevent_register_725370019f22120047a2d126c42e7065</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:35</sys_updated_on><table>sn_hr_core_case</table></sysevent_register></record_update>]]></payload><payload_hash>-1629996420</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>58dac92fdb2600103dd39235ca961940</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005794da0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case</table><target_name>sn_hr_core_case.feedback</target_name><type>Event Registration</type><update_domain>global</update_domain><update_guid>cbfd118048727300b7897ad808d9bd76</update_guid><update_guid_history>cbfd118048727300b7897ad808d9bd76:-1629996420,87fd118037727300e21bfe4150999e69:1562687131</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sysevent_register_fe5370019f22120047a2d126c42e7064</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sysevent_register"><sysevent_register action="INSERT_OR_UPDATE"><caller_access>1</caller_access><description/><event_name>sn_hr_core_task.changed</event_name><fired_by>When the state, assignee, assignment group and work notes are changed</fired_by><queue/><suffix/><sys_class_name>sysevent_register</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2015-03-20 20:16:35</sys_created_on><sys_id>fe5370019f22120047a2d126c42e7064</sys_id><sys_mod_count>3</sys_mod_count><sys_name>sn_hr_core_task.changed</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sysevent_register_fe5370019f22120047a2d126c42e7064</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:36</sys_updated_on><table>sn_hr_core_task</table></sysevent_register></record_update>]]></payload><payload_hash>444691212</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>58dac92fdb2600103dd39235ca961943</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005798960000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_task</table><target_name>sn_hr_core_task.changed</target_name><type>Event Registration</type><update_domain>global</update_domain><update_guid>dbfd11809972730049365d2bdcc7959a</update_guid><update_guid_history>dbfd11809972730049365d2bdcc7959a:444691212,5ffd118011727300e4bb4ed598dcd199:1816174443</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_2da8a2094f303300ad404a10a310c77b</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access>public</access><actions_access>false</actions_access><alter_access>false</alter_access><caller_access>1</caller_access><client_scripts_access>false</client_scripts_access><configuration_access>false</configuration_access><create_access>false</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Service Option</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_service_option</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="Application File" name="sys_metadata">8a12332181131300aadba4a47c598e5e</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:35</sys_created_on><sys_id>2da8a2094f303300ad404a10a310c77b</sys_id><sys_mod_count>5</sys_mod_count><sys_name>HR Service Option</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_2da8a2094f303300ad404a10a310c77b</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:10</sys_updated_on><update_access>false</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>1460603024</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>58dac92fdb2600103dd39235ca961946</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005736460000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_service_option</table><target_name>HR Service Option</target_name><type>Table</type><update_domain>global</update_domain><update_guid>05ed5d4081727300dae092d8ea7fb8bb</update_guid><update_guid_history>05ed5d4081727300dae092d8ea7fb8bb:1460603024,0ded5d40587273009720ae7021f71db7:-1862758895</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_5aa826094f303300ad404a10a310c76f</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Criteria</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_criteria</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:38</sys_created_on><sys_id>5aa826094f303300ad404a10a310c76f</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Criteria</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_5aa826094f303300ad404a10a310c76f</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:16</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-1632186825</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>58dac92fdb2600103dd39235ca961949</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00574d310000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_criteria</table><target_name>HR Criteria</target_name><type>Table</type><update_domain>global</update_domain><update_guid>e6ed9d402e72730009f03486d2f4982a</update_guid><update_guid_history>e6ed9d402e72730009f03486d2f4982a:-1632186825,a2ed9d4058727300b6dc81738f8c8327:-2083661354</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_93a8a6094f303300ad404a10a310c7fa</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access>public</access><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Task</label><live_feed_enabled>true</live_feed_enabled><name>sn_hr_core_task</name><number_ref display_value="HRT">af89e8a5531312002b76da86a11c087c</number_ref><provider_class/><read_access>true</read_access><super_class display_value="Task" name="task">32b2bf6581131300aadba4a47c598e1b</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2016-05-06 22:40:45</sys_created_on><sys_id>93a8a6094f303300ad404a10a310c7fa</sys_id><sys_mod_count>4</sys_mod_count><sys_name>HR Task</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_93a8a6094f303300ad404a10a310c7fa</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:21</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>1810363097</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>58dac92fdb2600103dd39235ca96194c</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0057602d0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_task</table><target_name>HR Task</target_name><type>Table</type><update_domain>global</update_domain><update_guid>bfed9d409d727300840ed651f4d6c5b9</update_guid><update_guid_history>bfed9d409d727300840ed651f4d6c5b9:1810363097,27ed9d406e72730095b51430cd1f58b6:-290632934</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_e1b82e094f303300ad404a10a310c751</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>Bulk Case Creation Data</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_bulk_case_creation_data</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:46</sys_created_on><sys_id>e1b82e094f303300ad404a10a310c751</sys_id><sys_mod_count>3</sys_mod_count><sys_name>Bulk Case Creation Data</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_e1b82e094f303300ad404a10a310c751</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:27</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>557067592</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>58dac92fdb2600103dd39235ca96194f</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0057768b0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_bulk_case_creation_data</table><target_name>Bulk Case Creation Data</target_name><type>Table</type><update_domain>global</update_domain><update_guid>cdfddd4021727300b778accb30bd1374</update_guid><update_guid_history>cdfddd4021727300b778accb30bd1374:557067592,89fddd40217273001b732b7c791d5c71:-1523622711</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_dictionary_sn_hr_core_nps_score_u_latest</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update&gt;&lt;sys_dictionary action="INSERT_OR_UPDATE" element="u_latest" table="sn_hr_core_nps_score"&gt;&lt;active&gt;true&lt;/active&gt;&lt;array&gt;false&lt;/array&gt;&lt;array_denormalized&gt;false&lt;/array_denormalized&gt;&lt;attributes/&gt;&lt;audit&gt;false&lt;/audit&gt;&lt;calculation&gt;&lt;![CDATA[(function calculatedFieldValue(current) {

	// Add your code here
	return '';  // return the calculated value

})(current);]]&gt;&lt;/calculation&gt;&lt;choice/&gt;&lt;choice_field/&gt;&lt;choice_table/&gt;&lt;column_label&gt;Latest&lt;/column_label&gt;&lt;comments/&gt;&lt;create_roles/&gt;&lt;default_value&gt;false&lt;/default_value&gt;&lt;defaultsort/&gt;&lt;delete_roles/&gt;&lt;dependent/&gt;&lt;dependent_on_field/&gt;&lt;display&gt;false&lt;/display&gt;&lt;dynamic_creation&gt;false&lt;/dynamic_creation&gt;&lt;dynamic_creation_script/&gt;&lt;dynamic_default_value/&gt;&lt;dynamic_ref_qual/&gt;&lt;element&gt;u_latest&lt;/element&gt;&lt;element_reference&gt;false&lt;/element_reference&gt;&lt;foreign_database/&gt;&lt;function_definition/&gt;&lt;function_field&gt;false&lt;/function_field&gt;&lt;internal_type display_value=""&gt;boolean&lt;/internal_type&gt;&lt;mandatory&gt;false&lt;/mandatory&gt;&lt;max_length&gt;40&lt;/max_length&gt;&lt;name&gt;sn_hr_core_nps_score&lt;/name&gt;&lt;next_element/&gt;&lt;primary&gt;false&lt;/primary&gt;&lt;read_only&gt;false&lt;/read_only&gt;&lt;read_roles/&gt;&lt;reference/&gt;&lt;reference_cascade_rule/&gt;&lt;reference_floats&gt;false&lt;/reference_floats&gt;&lt;reference_key/&gt;&lt;reference_qual/&gt;&lt;reference_qual_condition/&gt;&lt;reference_type/&gt;&lt;sizeclass/&gt;&lt;spell_check&gt;false&lt;/spell_check&gt;&lt;staged&gt;false&lt;/staged&gt;&lt;sys_class_name&gt;sys_dictionary&lt;/sys_class_name&gt;&lt;sys_created_by&gt;tim_deniston&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2019-07-17 00:45:32&lt;/sys_created_on&gt;&lt;sys_id&gt;a0f06a334f2a3300ad404a10a310c71b&lt;/sys_id&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_name&gt;Latest&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_dictionary_sn_hr_core_nps_score_u_latest&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 00:45:32&lt;/sys_updated_on&gt;&lt;table_reference&gt;false&lt;/table_reference&gt;&lt;text_index&gt;false&lt;/text_index&gt;&lt;unique&gt;false&lt;/unique&gt;&lt;use_dependent_field&gt;false&lt;/use_dependent_field&gt;&lt;use_dynamic_default&gt;false&lt;/use_dynamic_default&gt;&lt;use_reference_qualifier&gt;simple&lt;/use_reference_qualifier&gt;&lt;virtual&gt;false&lt;/virtual&gt;&lt;widget/&gt;&lt;write_roles/&gt;&lt;xml_view&gt;false&lt;/xml_view&gt;&lt;/sys_dictionary&gt;&lt;/record_update&gt;</payload><payload_hash>1805303396</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>58dac92fdb2600103dd39235ca961952</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd643b820000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>sn_hr_core_nps_score.u_latest</target_name><type>Dictionary</type><update_domain>global</update_domain><update_guid>d52162b3b62a3300e9393b54df9b6d47</update_guid><update_guid_history>d52162b3b62a3300e9393b54df9b6d47:1805303396</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_restricted_caller_access_3b470d6bdb2600103dd39235ca9619e2</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_restricted_caller_access"><sys_restricted_caller_access action="INSERT_OR_UPDATE"><operation>read</operation><source>e158e26d537322003585c3c606dc340a</source><source_scope display_value="Human Resources: Service Portal">3d1da2705b021200a4656ede91f91ab6</source_scope><source_table>sp_widget</source_table><source_type>6</source_type><status>2</status><sys_class_name>sys_restricted_caller_access</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2020-01-30 19:45:43</sys_created_on><sys_id>3b470d6bdb2600103dd39235ca9619e2</sys_id><sys_mod_count>0</sys_mod_count><sys_name>3d1da2705b021200a4656ede91f91ab6</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_restricted_caller_access_3b470d6bdb2600103dd39235ca9619e2</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2020-01-30 19:45:43</sys_updated_on><target name="sn_hr_core_case" target_table="sys_db_object">26986ec54f303300ad404a10a310c747</target><target_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</target_scope><target_table>sys_db_object</target_table><target_type>1</target_type></sys_restricted_caller_access></record_update>]]></payload><payload_hash>1367703088</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>58dac92fdb2600103dd39235ca961955</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16ff7fce4240000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>3d1da2705b021200a4656ede91f91ab6</target_name><type>Restricted Caller Access Privilege</type><update_domain>global</update_domain><update_guid>f3470d6b9d260010f81580f0ba5269e3</update_guid><update_guid_history>f3470d6b9d260010f81580f0ba5269e3:1367703088</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_365370019f22120047a2d126c42e7000</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;
  &lt;sys_script_include action="INSERT_OR_UPDATE"&gt;
    &lt;access&gt;public&lt;/access&gt;
    &lt;active&gt;true&lt;/active&gt;
    &lt;api_name&gt;sn_hr_core.hr_SysUser&lt;/api_name&gt;
    &lt;caller_access&gt;2&lt;/caller_access&gt;
    &lt;client_callable&gt;false&lt;/client_callable&gt;
    &lt;description&gt;Handler for HR functionality on sys_user records&amp;#13;
&lt;/description&gt;
    &lt;name&gt;hr_SysUser&lt;/name&gt;
    &lt;script&gt;&lt;![CDATA[var hr_SysUser = Class.create();

hr_SysUser.rpToUserMap = {
			"personal_email": "email",
			"work_email": "email",
			"work_phone": "phone",
			"work_mobile": "mobile_phone",
			"address": "ignore",
			"city": "ignore",
			"state": "ignore",
			"zip": "ignore"
};

hr_SysUser.userProfileWhitelist = {
			"first_name" : "", 
			"middle_name":"", 
			"last_name":"" , 
			"employee_number":"",
			"introduction":"", 
			"gender":"", 
			"department":"", 
			"manager":"", 
			"location":"", 
			"phone":"", 
			"email":"", 
			"home_phone":"", 
			"mobile_phone":""
};

hr_SysUser.userProfileLabelsMap = {
			"work_email": "Work email",
			"work_phone": "Work phone",
			"work_mobile": "Work mobile"
};

hr_SysUser.prototype = {
	initialize: function(_gr, _gs) {
		this._gr = _gr;
        this._gs = _gs || gs;
    },
	
	createUserRecordFromParameters: function(parameters, setUserCredentials) {
		// (0) Adjust the data by dereferencing fields to get at the right column
		parameters['title'] = hr_Utils.instance.dereferenceField(parameters['position'], 'sn_hr_core_position', 'position');
		parameters['country_code'] = hr_Utils.instance.dereferenceField(parameters['country'], 'core_country', 'iso3166_2');

	    // (1) Create a new user record	
    	var grUser = new GlideRecord(hr.TABLE_USER);
    	grUser.initialize();
		
		// (2) Store questions/answers in user record
		hr_Utils.instance.fillInFromMap(grUser, parameters, hr_SysUser.rpToUserMap);

		// (3) parameters[country_code] has the code we want to put into 'country' field
		// and country also has sys_id of country (needed elsewhere), adjust manually.
		if(parameters['country_code'])
			grUser.country = parameters['country_code'];

		if(setUserCredentials) {
			// (4) Generate an appropriate username for the user
			grUser.user_name = this.generateUserName(grUser.first_name, grUser.last_name);

			// (5) Indicate that the user password needs a reset
			grUser.password_needs_reset = "true";

			//(6) Set the password to user's email
			var glideElement = grUser.getElement("user_password");
			glideElement.setDisplayValue(parameters['personal_email'] + ""); 
		}
		
    	// (7) Return sys_id of user record
    	return grUser.insert();
	},
	
	updateUserRecordFromParameters: function(user, parameters) {
		var grUser = new GlideRecord(hr.TABLE_USER);
		grUser.get(user);
		
		// (1) Store questions/answers in user record
		hr_Utils.instance.fillInFromMap(grUser, parameters, hr_SysUser.rpToUserMap);

		// (2) parameters[country_code] has the code we want to put into 'country' field
		// and country also has sys_id of country (needed elsewhere), adjust manually.
		if(parameters['country_code'])
			grUser.setValue('country', parameters['country_code']);
    
    	// (3) Return sys_id of user record
    	return grUser.update();
	},
			
	generateUserName: function(first_name, last_name) {
		var userName = first_name + "." + last_name;
		var record = new GlideRecord(hr.TABLE_USER);
		if (!record.get("user_name", userName))
        	return userName.toLowerCase();

        var count = (gs.getProperty("sn_hr_core.profile.max.tries", 50));
        for (var suffix = 0; suffix &lt; count; ++suffix) {
        	record = new GlideRecord("sys_user");
            userName = first_name + "." + last_name + suffix;
            if (!record.get("user_name", userName))
                return userName.toLowerCase(); 
    	}
		gs.debug("[hr_SysUser] Cannot generate user name for " + first_name + ", " + last_name);
    	return null;
    },
	
	getDisplayValue: function(userId, fieldName, display) {
		var user = new GlideRecord(hr.TABLE_USER);
		if (!user.get(userId))
			return '';
		
		var translatedField = hr_SysUser.rpToUserMap[fieldName] || fieldName;
		var userDisplayValue = (display) ? 
			user.getDisplayValue(translatedField) : 
			user.getValue(translatedField);
		
		return userDisplayValue || '';
	},
	
	// returns a comma separated list of user sys_ids of direct reports to a manager
	getDirectReports: function(managerId) {
		var users = '';
		var gr = new GlideRecord(hr.TABLE_USER);
		gr.addQuery('manager', managerId);
		gr.addActiveQuery();
		gr.query();
		while (gr.next()) {
			if (users == '')
				users += gr.sys_id;
			if (users.indexOf(gr.sys_id) == -1)
				users += ',' + gr.sys_id;
		}
		return users;
	},
	
	// returns a comma separated list of sys_ids of users under a manager (all reports)
	getAllReports: function(managerId) {
		var managers = [managerId];
		var users = '';
		while (managers.length) {
			managerId = managers.shift();
			var gr = new GlideRecord(hr.TABLE_USER);
			gr.addQuery('manager', managerId);
			gr.addActiveQuery();
			gr.query();
			while (gr.next()) {
				if (users == '') {
					users += gr.sys_id;
					managers.push(users);
				}
				if (users.indexOf(gr.sys_id) == -1) {
					users += ',' + gr.sys_id;
					managers.push(gr.sys_id + '');
				}
			}
		}
		return users;
	},
	
	getRPFieldsFromId: function(userId) {
		var rpFields = {};
		var grUser = new GlideRecordSecure(hr.TABLE_USER);
        if (grUser.get(userId)) {
			if (!hr_SysUser.userToRPMap)
				hr_SysUser.userToRPMap = hr_Utils.instance.invertMap(hr_SysUser.rpToUserMap);
			
			if (!hr_SysUser.tableFields)
				hr_SysUser.tableFields = hr_Utils.instance.getFieldsFromTable(hr.TABLE_USER);
			
			for(var field in hr_SysUser.tableFields) {
				var translatedField = hr_SysUser.userToRPMap[field] || field;
				
				var value = grUser.getValue(field);
				if (value == null || value === 'null')
					continue;
				
				rpFields[translatedField] = {};
				rpFields[translatedField].value = value;
				rpFields[translatedField].displayValue = grUser.getDisplayValue(field);
			}
		}
		return rpFields;
	},

	getUserProfileFields: function() {
		if (!hr_SysUser.userProfileFields) {
			var fields = hr_Utils.instance.getFieldsFromTable(hr.TABLE_USER, hr_SysUser.userProfileWhitelist);
			hr_SysUser.userProfileFields = hr_Utils.instance.translateFieldFromMap(fields, hr_SysUser.rpToUserMap, hr_SysUser.userProfileLabelsMap);
		}
		return hr_SysUser.userProfileFields;
	},
	
	getSysUserRecordFromNames : function(firstName, lastName) {
		var grUser = new GlideRecord(sn_hr_core.hr.TABLE_USER);
		grUser.addQuery('first_name',firstName);
		grUser.addQuery('last_name',lastName);
		grUser.query();
		return grUser.next() ? grUser : null;
	},
	
	getSysUser : function(userSysId){
		var grUser = new GlideRecord(sn_hr_core.hr.TABLE_USER);
		grUser.get(userSysId);
		return grUser;
		
	},
	
	updateSysUserFromParams : function(userSysId, jsonParams){
		var grUser = new GlideRecord(sn_hr_core.hr.TABLE_USER);
		grUser.get(userSysId);
		for (var prop in jsonParams)
			grUser[prop] = jsonParams[prop];

		grUser.update();
	},
	
	updateSysUser: function(caseId, userId) {		
		var grUser = new GlideRecord(sn_hr_core.hr.TABLE_USER);
        if (grUser.get(userId)) {
			var qa = new GlideRecord('question_answer');
			qa.addQuery("table_name", 'IN', hr.TABLE_CASE_EXTENSIONS);
            qa.addQuery('table_sys_id', caseId);
            qa.query();
            while (qa.next()) {
				var translatedField = hr_SysUser.rpToUserMap[qa.question.name] || qa.question.name;
                if (translatedField!='country' &amp;&amp; grUser.isValidField(translatedField)) {
					//Is the new value is changed
					if (grUser.getValue(translatedField) != qa.getValue("value")) {
						//Query fails if newValue is null
						var newValue = qa.getValue("value")? qa.getValue("value") : "";
						grUser.setValue(translatedField, newValue);
					} 
				}
            }
            grUser.update();
        }
	},
	
	generatePassword: function() {
		var utils = new global.HRSecurityUtils();
		var pwd = utils.generatePassword();
		return pwd;
	},
	
    type: 'hr_SysUser'
};

hr_SysUser.instance = new hr_SysUser();]]&gt;&lt;/script&gt;
    &lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;
    &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
    &lt;sys_created_on&gt;2013-12-23 13:44:58&lt;/sys_created_on&gt;
    &lt;sys_id&gt;365370019f22120047a2d126c42e7000&lt;/sys_id&gt;
    &lt;sys_mod_count&gt;181&lt;/sys_mod_count&gt;
    &lt;sys_name&gt;hr_SysUser&lt;/sys_name&gt;
    &lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;
    &lt;sys_policy/&gt;
    &lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;
    &lt;sys_update_name&gt;sys_script_include_365370019f22120047a2d126c42e7000&lt;/sys_update_name&gt;
    &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
    &lt;sys_updated_on&gt;2019-07-19 21:32:00&lt;/sys_updated_on&gt;
  &lt;/sys_script_include&gt;
&lt;/record_update&gt;</payload><payload_hash>277787289</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>true</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>58dac92fdb2600103dd39235ca961958</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005785680000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_SysUser</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>7646c9e749260010393895071f4fb17c</update_guid><update_guid_history>7646c9e749260010393895071f4fb17c:277787289,c2fddd407d727300a6c42e45ff04e2cf:-1629051924,0efddd404f727300d18b359c135d5fcc:1470784621</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_ba5370019f22120047a2d126c42e7000</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;
  &lt;sys_script_include action="INSERT_OR_UPDATE"&gt;
    &lt;access&gt;public&lt;/access&gt;
    &lt;active&gt;true&lt;/active&gt;
    &lt;api_name&gt;sn_hr_core.hr_Profile&lt;/api_name&gt;
    &lt;caller_access&gt;2&lt;/caller_access&gt;
    &lt;client_callable&gt;false&lt;/client_callable&gt;
    &lt;description&gt;Handles HR Profile records&lt;/description&gt;
    &lt;name&gt;hr_Profile&lt;/name&gt;
    &lt;script&gt;&lt;![CDATA[var hr_Profile = Class.create();

// Place field names that do not map directly from the Record Producer to the HR Profile.
// example:
//     	"work_email": "email"
//      - maps value in RP:parameters[work_email] into new gr:profile[email]
hr_Profile.rpToProfileMap = {
			"change_date": "employment_start_date"
};
				
// Do not show these fields in the approval list, and in profile/user updates; users
// do not get to change these.
hr_Profile.userProfileBlacklist = {
			"active" : "",
			"user": "",
			"name": "" ,
			"workday_transaction_log": "", // This line of code is required for customers upgrading to Madrid from a previous version. If you upgrade your instance, do not delete this line.
			"number": "",
			"offboard_type": "",
			"ssn_display": ""
};

hr_Profile.userExclusionList = [ "country", "title", "mobile_phone", "home_phone" ];
	
hr_Profile.userFieldMap = {
			"work_email"  : "email",
			"work_phone"  : "phone",
			"work_mobile" : "mobile_phone",
			"address"     : "street",
			"personal_email" : "email"
};

hr_Profile.usaEmployeeFieldMap = {
			"user.employee_number"  : "EmployeeIdentifier",
			"user.first_name"       : "FirstName",
			"user.middle_name"      : "MiddleName",
			"user.last_name"        : "LastName",
			"user.introduction"     : "Suffix",
			"user.email"            : "Email",
			"date_of_birth"         : "BirthDate",
			"employment_start_date" : "HireDate",
			"user.company"          : "Company",
			"address"               : "ResidenceAddress",
			"city"                  : "ResidenceCity",
			"state"                 : "ResidenceState",
			"zip"                   : "ResidencePostalCode",
			"country"               : "ResidenceCountry",
			"location.street"       : "WorkAddress",
			"location.city"         : "WorkCity",
			"location.state"        : "WorkState",
			"location.zip"          : "WorkPostalCode",
			"location.country"      : "WorkCountry"
};
				
hr_Profile.prototype = {
			initialize: function(_gr, _gs) {
				this._gr = _gr;
				this._gs = _gs || gs;
			},
	
			/**
			* Creates an sn_hr_core_profile record from a parameter list and links it
			* to the sys_user record
			* @param  parameters object map that contain name/value pairs from the RP
			* @return fully populated sn_hr_core_profile record
			*/
			createOrGetProfileFromParameters: function(parameters) {
				var fname = parameters['first_name'];
				var lname = parameters['last_name'];
				var email = parameters['personal_email'];
				
				//get the user from first name / last name
				var userGr = hr_SysUser.instance.getSysUserRecordFromNames(fname,lname);
				//get the hr profile based on unique key
				var profile = this.getProfileFromUniqueKey(fname, lname, email);
				
				// if user and associated profile record is null then create new profile 
				// along with user and return the newly created profile
				if (gs.nil(userGr) || gs.nil(profile))
					return this._createProfileFromParameters(parameters, null);
				
				//activate the user if not activated
				if (!(profile.user.active)) {
					var params = {};
					params.active = true;
					hr_SysUser.instance.updateSysUserFromParams(profile.user.getUniqueValue(), params);
				}
				//if user and profile exists then return the updated the hr profile 
				return this._updateProfileFromParameters(profile, parameters);
			},
			
			/**
 			* Tests for an sn_hr_core_profile/sys_user record that contains the specified UserID
 			*
 			* @param user user field of record being searched
 			* @return glide record of sn_hr_core_profile if record exists for this field combination,
 			*         null otherwise
 			*/
			getProfileFromUser: function(userId) {
				var hrProfile = new GlideRecord(hr.TABLE_PROFILE);
				return (hrProfile.get('user', userId))? hrProfile: null;
			},
			
			/**
 			* Tests for an sn_hr_core_profile/sys_user record that matches the fields
 			* that unique profile rule.
 			*
 			* Note, fname and lname are stored in the sys_user table and verified through
 			* a reference lookup
 			*
 			* @param fname field first_name of the user record being searched
 			* @param lname field last_name of the user record being searched
 			* @param email field personal_email of the user record being searched
 			* @return glide record of sn_hr_core_profile if record exists for this field combination,
 			*         null otherwise
 			*/
			getProfileFromUniqueKey: function(fname, lname, email) {
				var hrProfile = new GlideRecord(hr.TABLE_PROFILE);
				hrProfile.addQuery('user.first_name', fname); // From sys_user table
				hrProfile.addQuery('user.last_name', lname);  // From sys_user table
				hrProfile.addQuery('personal_email', email);
				hrProfile.query();
				
				return (hrProfile.next())? hrProfile: null;
			},
			
			getProfileFromParameters: function(parameters) {
				var user = parameters['opened_for'] || parameters['user'];
				var hrProfile = new GlideRecord(hr.TABLE_PROFILE);
				
				// Find a profile with thie requested User and return it
				if (hrProfile.get('user', user))
					return hrProfile;
				
				// Else, we create a profile from User and return it; might be null if
				// user id does not match a User record
				return this._createProfileFromUser(user, parameters);
			},
			
			getProfileFromId: function(profileId) {
				var hrProfile = new GlideRecord(hr.TABLE_PROFILE);
				return (hrProfile.get(profileId))? hrProfile: null;
			},
			
			getDisplayValue: function(grprofile, fieldName, display) {
				var translatedField = hr_Profile.rpToProfileMap[fieldName] || fieldName;
				
				var profileDisplayValue = (display) ? grprofile.getDisplayValue(translatedField) : grprofile.getValue(translatedField);
				var userDisplayValue = hr_SysUser.instance.getDisplayValue(grprofile.user, fieldName, display);
				
				if (profileDisplayValue)
					return profileDisplayValue;
				if (userDisplayValue)
					return userDisplayValue;
				
				return '';
			},
			
			/**
 			* Creates an HR Profile (and sys_user) record from HR Case record producer
 			* and populates the relevant fields for the variables
 			*
 			* @param  parameters object map that contain name/value pairs from the RP
			* @param  UserGR sys_user gliderecord
 			* @return the sys_id to a fully populated sn_hr_core_profile record
 			*/
			_createProfileFromParameters: function(parameters, sysUser) {
				var hrProfile = new GlideRecord(hr.TABLE_PROFILE);
				hrProfile.initialize();
				// Fill in a new sys_user record if not exists
				if (gs.nil(sysUser))
					hrProfile.user = hr_SysUser.instance.createUserRecordFromParameters(parameters, false);
				else
					hrProfile.user = sysUser.getUniqueValue();
				
				// Fill in the profile fields we care about
				hr_Utils.instance.fillInFromMap(hrProfile, parameters, hr_Profile.rpToProfileMap);
				
				// Create the sn_hr_core_profile record
				var profileId = hrProfile.insert();	
				
				if(!gs.nil(profileId) &amp;&amp; !gs.nil(parameters) &amp;&amp; parameters['onboarding'])				
					parameters['job'] = hr_Utils.instance.createPrimaryJobFromProfile(hrProfile);

				return hrProfile;
			},
			
			/**
 			* Updates an HR Profile (and sys_user) record from HR Case record producer
 			* and populates the changed fields for the variables
 			*
 			* @param  parameters object map that contain name/value pairs from the RP
 			* @return fully populated sn_hr_core_profile record
 			*/
			_updateProfileFromParameters: function(profile, parameters) {
				if(parameters['onboarding'] &amp;&amp; !parameters['job'])
					parameters['job'] = hr_Utils.instance.createJobFromParameters(profile, parameters, false);
				else {
					// Update sys_user record
					hr_SysUser.instance.updateUserRecordFromParameters(profile.user, parameters);
					// Make the changes in profile
					hr_Utils.instance.fillInFromMap(profile, parameters, hr_Profile.rpToProfileMap);
					profile.update();
				}

				return profile;
			},
			
			/*
 			* Convenience method to prevent the code becoming unreadable from the useful debug statements
 			*/
			_logDebug : function(str) {
				if (gs.isDebugging())
					gs.debug(str);
			},
			
			/*
 			* Create profile from sys_user
 			* called from the HR case form button
 			*/
			createProfileFromUser: function(userId) {
				var hrProfile = this._createProfileFromUser(userId);
				if (hrProfile)
					return hrProfile.getUniqueValue();
				
				gs.addErrorMessage(gs.getMessage('User record not found'));
				return null;
			},
	
			_createProfileFromUser: function(userId, parameters) {
				if(this.userHasProfile(userId))
					return this.getCurrentProfile(userId);
				
				var user = new GlideRecord(hr.TABLE_USER);
				if (user.get(userId)) {
					var hrProfile = new GlideRecord(hr.TABLE_PROFILE);
					hrProfile.initialize();
					hrProfile.user = user.sys_id;
					
					var profileId = hrProfile.insert();
					
					if(!gs.nil(profileId)) {
						hr_Utils.instance.updateUserMismatchField("title", user, hrProfile, 'true');
						hr_Utils.instance.updateUserMismatchField("country", user, hrProfile, 'true');
						hr_Utils.instance.syncProfilesWithMap(user, hrProfile, hr_Profile.userFieldMap, hr_Profile.userExclusionList, 'true');
					
						if(!gs.nil(parameters) &amp;&amp; parameters['onboarding']) {
							var jobId = hr_Utils.instance.createPrimaryJobFromProfile(hrProfile);
							parameters['job'] = jobId;
						}
					}
					return hrProfile;
				}
				return null;
			},
			
			/**
 			* Tests for if sys_user record has a matching HR profile.
 			*
 			* @param userId sys_id field of user
 			* @return true if an sn_hr_core_profile record exists for this userId, false otherwise
 			*/
			userHasProfile: function(userId) {
				if (this.getCurrentProfile(userId))
					return true;
				else
					return false;
			},
			
			getCurrentProfile: function(userId) {
				if (!userId)
					return null;
				
				var gr = new GlideRecord(hr.TABLE_PROFILE);
				gr.addQuery("user", userId);
				gr.addActiveQuery();
				gr.query();
				if (gr.next() &amp;&amp; gr.canRead())
					return gr;
				else
					return null;
			},
			
			canReadProfileFields: function() {
				if (this._gr.isNewRecord())
					return true;
				
				// Check the hr role
				if (this._gs.hasRole(hr.ROLE_HR_PROFILE_READER))
					return true;
				
				// Check if the profile is related to the current user
				var profileUser = this._gr.getValue("user");
				if (!gs.nil(profileUser) &amp;&amp; this._gs.getUserID() == profileUser)
					return true;
				
				// Check if the current user is a manager of the profile
				if (!gs.nil(profileUser) &amp;&amp; new global.HRSecurityUtilsAjax().userReportsTo(profileUser, this._gs.getUserID()))
					return true;
				
				return false;
			},
			
			isCurrentUserRecord: function(current){
				var employeeUser = current.getValue("user");
				return !gs.nil(employeeUser) &amp;&amp; gs.getUserID() == employeeUser;
			},
			
			// returns a comma separated list of sys_ids of users under a manager (all reports)
			getAllReports: function(managerId) {
				var managers = [managerId];
				var users = '';
				while (managers.length) {
					managerId = managers.shift();
					var gr = new GlideRecord(hr.TABLE_PROFILE);
					gr.addNotNullQuery('manager');
					gr.addQuery('manager', managerId);
					gr.addActiveQuery();
					gr.query();
					while (gr.next()) {
						if (users == '') {
							users += gr.sys_id;
							managers.push(gr.user.sys_id);
						}
						if (users.indexOf(gr.sys_id) == -1) {
							users += ',' + gr.sys_id;
							managers.push(gr.user.sys_id + '');
						}
					}
				}
				return users;
			},
			
			getProfileFields: function() {
				if (!hr_Profile.profileFields) {
					var profileFields = hr_Utils.instance.getFieldsFromTable(hr.TABLE_PROFILE, null, hr_Profile.userProfileBlacklist);
				
					// Add the profile related fields that are supported in the SysUser table as well
					var userFields = hr_SysUser.instance.getUserProfileFields();
					for (var userField in userFields)
						profileFields[userField] = userFields[userField];
				
					hr_Profile.profileFields = profileFields;
				}
				return hr_Profile.profileFields;
			},

			/* This API is deprecated. It may be removed in the next release */
			getRPFieldsFromId: function(profileId) {
				var rpFields = {};
				var grProfile = new GlideRecordSecure(hr.TABLE_PROFILE);
				if (grProfile.get(profileId)) {
						if (!hr_Profile.tableFields)
							hr_Profile.tableFields = hr_Utils.instance.getFieldsFromTable(hr.TABLE_PROFILE);  // cache tableFields
					
						for (var field in hr_Profile.tableFields) {
							rpFields[field] = {};
								rpFields[field].value = grProfile.getValue(field);
								rpFields[field].displayValue = grProfile.getDisplayValue(field);
						}
				}
						
				// Add the profile fields that are supported in the SysUser table as well
				var userFields = hr_SysUser.instance.getRPFieldsFromId(grProfile.getValue("user"));
				for (var userField in userFields)
					rpFields[userField] = userFields[userField];
						
				return rpFields;
			},

			getRPFieldsFromUserId: function(userId) {
						var rpFields = {};
						// Add the profile fields that are supported in the SysUser table as well
						var userFields = hr_SysUser.instance.getRPFieldsFromId(userId);
						for (var userField in userFields) {
							if (userField!=='country')
									rpFields[userField] = userFields[userField];
						}
						var grProfile = new GlideRecordSecure(hr.TABLE_PROFILE);
						if (grProfile.get('user', userId)) {
								if (!hr_Profile.tableFields)
									hr_Profile.tableFields = hr_Utils.instance.getFieldsFromTable(hr.TABLE_PROFILE);  // cache tableFields
							
								for(var field in hr_Profile.tableFields) {
									var value = grProfile.getValue(field);
									if (value == null || value === 'null')
										continue;
									
									rpFields[field] = {};
									rpFields[field].value = value;
									rpFields[field].displayValue = grProfile.getDisplayValue(field);
								}
						}
						return rpFields;
			},
							
			/*
 			 * Validates if user profile already exists
 			 *
 			 * @param first name - First Name of employee
 			 * @param last name - Last name of employee
 			 * @param email - personal email address of user; if empty return true
 			 * @return boolean whether the user profile exists.
 			 */
			validateUserProfileRecord: function(first_name, last_name, email) {
						if (!email || email == 'null' || email == 'NULL')
								return true;
				
						email = email + '';
						if (email.trim() == '')
								return true;
				
						var profileRecord = new GlideRecord(hr.TABLE_PROFILE);
						profileRecord.addQuery("user.first_name", first_name);
						profileRecord.addQuery("user.last_name", last_name);
						profileRecord.addQuery("personal_email", email);
						profileRecord.query();

						return profileRecord.getRowCount() == 0;
			},	
								
			updateProfile: function(caseId, profileId) {
				var grProfile = new GlideRecord(sn_hr_core.hr.TABLE_PROFILE);
				if (grProfile.get(profileId)) {
					hr_SysUser.instance.updateSysUser(caseId, grProfile.user);

					var qa = new GlideRecord("question_answer");
					qa.addQuery('table_name', 'IN', hr.TABLE_CASE_EXTENSIONS);
					qa.addQuery('table_sys_id', caseId);
					qa.query();

					while (qa.next()) {
						var translatedField = hr_Profile.rpToProfileMap[qa.question.name] || qa.question.name;

						if (grProfile.isValidField(translatedField)){
							//Is the new value is changed
							if (grProfile.getValue(translatedField) != qa.getValue("value")) {
								//Query fails if newValue is null
								var newValue = qa.getValue("value")? qa.getValue("value") : "";
								grProfile.setValue(translatedField, newValue);
							}
						}
					}
					if (grProfile.update())
						gs.addInfoMessage(gs.getMessage('Profile updated successfully'));
					else
						gs.addErrorMessage(gs.getMessage('Profile not updated'));
				}
			},
	
			/**
			 * Checks if user has access to any of document types in order to create a new employee document
			 **/
			hasAccesstoDocumentTypes: function () {
				if (new GlidePluginManager().isActive('com.sn_employee_document_management')) 
					return new sn_hr_ef.ef_Utils().getDocTypesForSelection('hr').length &gt; 0;
				else
					return false;
			},

			/**
			 * Updates the leave status for an employee's HR Profile based on the 
			 * related leave status records
			 * @param {String} userId - the employee user ID
			 */
			updateLeaveStatus: function(userId) {
				var hrProfile = new GlideRecord(sn_hr_core.hr.TABLE_PROFILE);
				if (!hrProfile.get('user', userId))
					return;
				
				var status = 'not_on_leave';
				if (this._hasOneOrMoreLeaves(userId, 'on_leave'))
					status = 'on_leave';
				else if (this._hasOneOrMoreLeaves(userId, 'approved'))
					status = 'approved';
				else if (this._hasOneOrMoreLeaves(userId, 'requested'))
					status = 'requested';
				
				hrProfile.leave_status = status;
				hrProfile.update();
			},

			/**
			 * @param {String} userId - the user id
			 * @param {String} status - the status to query for
			 * @return {Boolean} - true if the user has one or more leaves
			 *   in the status
			 */
			_hasOneOrMoreLeaves: function(userId, status) {
				var leave = new GlideRecord(hr.TABLE_LEAVE_OF_ABSENCE);
				leave.addQuery('employee', userId);
				leave.addQuery('leave_status', status);
				leave.setLimit(1);
				leave.query();
				return leave.hasNext();
			},
	
			getUSAUserHrProfile: function(empNumber,sysUpdatedOn,numberOfRecords,startRow){

				var result ={};
				result.employeeInformation =[];
				result.nextPage = false;

				var grProfile = new GlideRecord(hr.TABLE_PROFILE);
				var grTemp = grProfile.addQuery("country.iso3166_3", "USA");
				grTemp.addOrCondition("location.country", "USA");

				if (!gs.nil(empNumber)) {
					empNumber = GlideStringUtil.escapeHTML(empNumber);
					grProfile.addQuery("user.employee_number", empNumber);
				}
				else {
					numberOfRecords = this._getLimit(numberOfRecords);

					if (!gs.nil(sysUpdatedOn)) {
						sysUpdatedOn = this._generateDateTimeStr(sysUpdatedOn);
						grProfile.addQuery('sys_updated_on', '&gt;=', sysUpdatedOn);
					}

					if (!gs.nil(startRow)) {
						startRow = parseInt(GlideStringUtil.escapeHTML(startRow));
						grProfile.chooseWindow(startRow, startRow + numberOfRecords + 1);
					}
					else
						grProfile.setLimit(numberOfRecords + 1 );
					grProfile.orderBy('sys_updated_on');
				}

				grProfile.query();

				while (grProfile.next()) {
					var userProfile = this._getUserProfile(grProfile);
					result.employeeInformation.push(userProfile);
				}

				if(result.employeeInformation.length &gt; numberOfRecords){
					result.employeeInformation.pop();
					result.nextPage = true;
				}

				return result;
			},

			_getUserProfile: function(grProfile){
				var userProfile = {};
					var hrProfileColumns = hr_Profile.usaEmployeeFieldMap;
					for(var columnName in hrProfileColumns){
						var value = grProfile.getDisplayValue(columnName);
						userProfile[hrProfileColumns[columnName]] = value;
					}
					userProfile.ReHire ="";
				return userProfile;
			},

			_getLimit: function(numberOfRecords) {
				var MAX_RESULTS = 100000;

				if (!gs.nil(numberOfRecords) &amp;&amp; numberOfRecords &lt; MAX_RESULTS)
					numberOfRecords = parseInt(GlideStringUtil.escapeHTML(numberOfRecords));
				else
					numberOfRecords = MAX_RESULTS;

				return numberOfRecords;
			},


			//Used in query for time comparison
			_generateDateTimeStr: function(sysUpdatedOn){
				sysUpdatedOn = new GlideDateTime(GlideStringUtil.escapeHTML(sysUpdatedOn));
				sysUpdatedOn = sysUpdatedOn.toString();
				sysUpdatedOn = sysUpdatedOn.split(" ");
				var date = sysUpdatedOn[0];
				var time = sysUpdatedOn[1];
				return "javascript:gs.dateGenerate('"+date+"','"+time+"')";
			},

			type: "hr_Profile"
};]]&gt;&lt;/script&gt;
    &lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;
    &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
    &lt;sys_created_on&gt;2013-11-28 10:42:40&lt;/sys_created_on&gt;
    &lt;sys_id&gt;ba5370019f22120047a2d126c42e7000&lt;/sys_id&gt;
    &lt;sys_mod_count&gt;416&lt;/sys_mod_count&gt;
    &lt;sys_name&gt;hr_Profile&lt;/sys_name&gt;
    &lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;
    &lt;sys_policy/&gt;
    &lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;
    &lt;sys_update_name&gt;sys_script_include_ba5370019f22120047a2d126c42e7000&lt;/sys_update_name&gt;
    &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
    &lt;sys_updated_on&gt;2019-11-04 23:39:50&lt;/sys_updated_on&gt;
  &lt;/sys_script_include&gt;
&lt;/record_update&gt;</payload><payload_hash>-1894990792</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>true</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>58dac92fdb2600103dd39235ca96195b</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00578f360000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_Profile</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>8476092b85260010e2a4392d9edf35ad</update_guid><update_guid_history>8476092b85260010e2a4392d9edf35ad:-1894990792,62fd1180327273003a4204386f934734:-1796824608,aafd11807e72730079456e66850c5e31:247769441</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_security_acl_role_7259a1514f633300ad404a10a310c7fc</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl_role"><sys_security_acl_role action="INSERT_OR_UPDATE"><sys_class_name>sys_security_acl_role</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-08-27 19:19:47</sys_created_on><sys_id>7259a1514f633300ad404a10a310c7fc</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sn_hr_core_case_asc.sn_hr_core.asc_user</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_security_acl display_value="sn_hr_core_case_asc">f259a1514f633300ad404a10a310c7f8</sys_security_acl><sys_update_name>sys_security_acl_role_7259a1514f633300ad404a10a310c7fc</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-08-27 19:19:47</sys_updated_on><sys_user_role display_value="sn_hr_core.asc_user" name="sn_hr_core.asc_user">2e5921114f633300ad404a10a310c7d8</sys_user_role><transaction_id/></sys_security_acl_role></record_update>]]></payload><payload_hash>-1688375554</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>58dac92fdb2600103dd39235ca96195e</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16cd48515e80000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case_asc</table><target_name>sn_hr_core_case_asc.sn_hr_core.asc_user</target_name><type>Access Roles</type><update_domain>global</update_domain><update_guid>3259a151706333009022fc89af4a2eff</update_guid><update_guid_history>3259a151706333009022fc89af4a2eff:-1688375554</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>asmt_metric_definition_2d1222f34f2a3300ad404a10a310c7f9</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="asmt_metric_definition"><asmt_metric_definition action="INSERT_OR_UPDATE"><display>6</display><metric display_value="">50e1aeb34f2a3300ad404a10a310c764</metric><order>6</order><selected_image/><sys_class_name>asmt_metric_definition</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:49:39</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>2d1222f34f2a3300ad404a10a310c7f9</sys_id><sys_mod_count>0</sys_mod_count><sys_name>6</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>asmt_metric_definition_2d1222f34f2a3300ad404a10a310c7f9</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:49:39</sys_updated_on><unselected_image/><value>6</value></asmt_metric_definition><sys_translated_text action="delete_multiple" query="documentkey=2d1222f34f2a3300ad404a10a310c7f9"/></record_update>]]></payload><payload_hash>1011934837</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>5cdac92fdb2600103dd39235ca96193c</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd67ff0b0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>6</target_name><type>Assessment Metric Definition</type><update_domain>global</update_domain><update_guid>2d1222f3cc2a33004a940b7067fd83fa</update_guid><update_guid_history>2d1222f3cc2a33004a940b7067fd83fa:1011934837</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sysevent_register_26369ba7533212003585c3c606dc3426</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sysevent_register"><sysevent_register action="INSERT_OR_UPDATE"><caller_access>1</caller_access><description>A request for HR Profile writers to reactivate a sys user.</description><event_name>sn_hr_core_profile.reactivate_user</event_name><fired_by/><queue/><suffix/><sys_class_name>sysevent_register</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2016-04-21 19:09:46</sys_created_on><sys_id>26369ba7533212003585c3c606dc3426</sys_id><sys_mod_count>3</sys_mod_count><sys_name>sn_hr_core_profile.reactivate_user</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sysevent_register_26369ba7533212003585c3c606dc3426</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:35</sys_updated_on><table>sn_hr_core_profile</table></sysevent_register></record_update>]]></payload><payload_hash>-858896218</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>5cdac92fdb2600103dd39235ca96193f</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005793c50000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_profile</table><target_name>sn_hr_core_profile.reactivate_user</target_name><type>Event Registration</type><update_domain>global</update_domain><update_guid>36fd11807c727300fb0204a4bcb51e61</update_guid><update_guid_history>36fd11807c727300fb0204a4bcb51e61:-858896218,b6fd1180d17273006a4eb03f8903bf60:1441760807</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sysevent_register_f25370019f22120047a2d126c42e7065</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sysevent_register"><sysevent_register action="INSERT_OR_UPDATE"><caller_access>1</caller_access><description>Event to be fired to send the employment verification email to the third party requestor</description><event_name>sn_hr_core_case.emp_verification</event_name><fired_by>UI action for employment verification</fired_by><queue/><suffix/><sys_class_name>sysevent_register</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2015-05-18 21:50:36</sys_created_on><sys_id>f25370019f22120047a2d126c42e7065</sys_id><sys_mod_count>2</sys_mod_count><sys_name>sn_hr_core_case.emp_verification</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sysevent_register_f25370019f22120047a2d126c42e7065</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:36</sys_updated_on><table>sn_hr_core_case</table></sysevent_register></record_update>]]></payload><payload_hash>-672232375</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>5cdac92fdb2600103dd39235ca961942</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005797bf0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case</table><target_name>sn_hr_core_case.emp_verification</target_name><type>Event Registration</type><update_domain>global</update_domain><update_guid>cbfd1180a27273006dbaf11b939f8b91</update_guid><update_guid_history>cbfd1180a27273006dbaf11b939f8b91:-672232375,4ffd118022727300a6fc83e7db2ab590:-1626645238</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_2180aa734f2a3300ad404a10a310c705</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access>public</access><actions_access>false</actions_access><alter_access>false</alter_access><caller_access/><client_scripts_access>false</client_scripts_access><configuration_access>false</configuration_access><create_access>false</create_access><create_access_controls>true</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR NPS Score</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_nps_score</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:45:32</sys_created_on><sys_id>2180aa734f2a3300ad404a10a310c705</sys_id><sys_mod_count>0</sys_mod_count><sys_name>HR NPS Score</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_2180aa734f2a3300ad404a10a310c705</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:45:32</sys_updated_on><update_access>false</update_access><user_role display_value="sn_hr_core.hr_nps_score_user" name="sn_hr_core.hr_nps_score_user">c1216a334f2a3300ad404a10a310c71d</user_role><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>549358345</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>5cdac92fdb2600103dd39235ca961945</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd6447000000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>HR NPS Score</target_name><type>Table</type><update_domain>global</update_domain><update_guid>8a2162b3742a330084db7ff68ed163c6</update_guid><update_guid_history>8a2162b3742a330084db7ff68ed163c6:549358345</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_51b8ea094f303300ad404a10a310c7ef</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Document Acknowledgement</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_document_acknowledgement</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:46</sys_created_on><sys_id>51b8ea094f303300ad404a10a310c7ef</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Document Acknowledgement</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_51b8ea094f303300ad404a10a310c7ef</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:15</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>915293954</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>5cdac92fdb2600103dd39235ca961948</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005747410000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_document_acknowledgement</table><target_name>HR Document Acknowledgement</target_name><type>Table</type><update_domain>global</update_domain><update_guid>02ed9d40827273004fbd90cbd7b52a16</update_guid><update_guid_history>02ed9d40827273004fbd90cbd7b52a16:915293954,caed9d407d7273004b43efb672b7c312:-1850083167</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_84a8eec54f303300ad404a10a310c783</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>false</actions_access><alter_access>false</alter_access><caller_access>1</caller_access><client_scripts_access>false</client_scripts_access><configuration_access>false</configuration_access><create_access>false</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>Service Activity</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_service_activity</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="Application File" name="sys_metadata">8a12332181131300aadba4a47c598e5e</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:32</sys_created_on><sys_id>84a8eec54f303300ad404a10a310c783</sys_id><sys_mod_count>3</sys_mod_count><sys_name>Service Activity</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_84a8eec54f303300ad404a10a310c783</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:20</sys_updated_on><update_access>false</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>1870415125</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>5cdac92fdb2600103dd39235ca96194b</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00575b350000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_service_activity</table><target_name>Service Activity</target_name><type>Table</type><update_domain>global</update_domain><update_guid>d3ed9d402372730034be767f34e209a6</update_guid><update_guid_history>d3ed9d402372730034be767f34e209a6:1870415125,dbed9d4098727300e50a637f126ad7a2:-1452946794</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_cdb8ea094f303300ad404a10a310c70e</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>Compensation Bonus</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_bonus</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="Compensation" name="sn_hr_core_compensation">4f986ec54f303300ad404a10a310c7c2</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:45</sys_created_on><sys_id>cdb8ea094f303300ad404a10a310c70e</sys_id><sys_mod_count>3</sys_mod_count><sys_name>Compensation Bonus</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_cdb8ea094f303300ad404a10a310c70e</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:26</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>1407383235</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>5cdac92fdb2600103dd39235ca96194e</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005770f20000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_bonus</table><target_name>Compensation Bonus</target_name><type>Table</type><update_domain>global</update_domain><update_guid>b4fddd40867273006bb121a3250b7c2e</update_guid><update_guid_history>b4fddd40867273006bb121a3250b7c2e:1407383235,bcfddd4033727300acaad6303c5a1d2a:-1888597790</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_dictionary_sn_hr_core_nps_score_null</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update&gt;&lt;sys_dictionary action="INSERT_OR_UPDATE" element="" table="sn_hr_core_nps_score"&gt;&lt;active&gt;true&lt;/active&gt;&lt;array&gt;false&lt;/array&gt;&lt;array_denormalized&gt;false&lt;/array_denormalized&gt;&lt;attributes/&gt;&lt;audit&gt;false&lt;/audit&gt;&lt;calculation&gt;&lt;![CDATA[(function calculatedFieldValue(current) {

	// Add your code here
	return '';  // return the calculated value

})(current);]]&gt;&lt;/calculation&gt;&lt;choice/&gt;&lt;choice_field/&gt;&lt;choice_table/&gt;&lt;column_label/&gt;&lt;comments/&gt;&lt;create_roles/&gt;&lt;default_value/&gt;&lt;defaultsort/&gt;&lt;delete_roles/&gt;&lt;dependent/&gt;&lt;dependent_on_field/&gt;&lt;display&gt;false&lt;/display&gt;&lt;dynamic_creation&gt;false&lt;/dynamic_creation&gt;&lt;dynamic_creation_script/&gt;&lt;dynamic_default_value/&gt;&lt;dynamic_ref_qual/&gt;&lt;element/&gt;&lt;element_reference&gt;false&lt;/element_reference&gt;&lt;foreign_database/&gt;&lt;function_definition/&gt;&lt;function_field&gt;false&lt;/function_field&gt;&lt;internal_type display_value="Collection"&gt;collection&lt;/internal_type&gt;&lt;mandatory&gt;false&lt;/mandatory&gt;&lt;max_length&gt;40&lt;/max_length&gt;&lt;name&gt;sn_hr_core_nps_score&lt;/name&gt;&lt;next_element/&gt;&lt;primary&gt;false&lt;/primary&gt;&lt;read_only&gt;false&lt;/read_only&gt;&lt;read_roles/&gt;&lt;reference/&gt;&lt;reference_cascade_rule/&gt;&lt;reference_floats&gt;false&lt;/reference_floats&gt;&lt;reference_key/&gt;&lt;reference_qual/&gt;&lt;reference_qual_condition/&gt;&lt;reference_type/&gt;&lt;sizeclass/&gt;&lt;spell_check&gt;false&lt;/spell_check&gt;&lt;staged&gt;false&lt;/staged&gt;&lt;sys_class_name&gt;sys_dictionary&lt;/sys_class_name&gt;&lt;sys_created_by&gt;tim_deniston&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2019-07-17 00:45:34&lt;/sys_created_on&gt;&lt;sys_id&gt;b92162b34f2a3300ad404a10a310c78c&lt;/sys_id&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_name&gt;sn_hr_core_nps_score&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_dictionary_sn_hr_core_nps_score_null&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 00:45:34&lt;/sys_updated_on&gt;&lt;table_reference&gt;false&lt;/table_reference&gt;&lt;text_index&gt;false&lt;/text_index&gt;&lt;unique&gt;false&lt;/unique&gt;&lt;use_dependent_field&gt;false&lt;/use_dependent_field&gt;&lt;use_dynamic_default&gt;false&lt;/use_dynamic_default&gt;&lt;use_reference_qualifier&gt;simple&lt;/use_reference_qualifier&gt;&lt;virtual&gt;false&lt;/virtual&gt;&lt;widget/&gt;&lt;write_roles/&gt;&lt;xml_view&gt;false&lt;/xml_view&gt;&lt;/sys_dictionary&gt;&lt;/record_update&gt;</payload><payload_hash>-259043834</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>5cdac92fdb2600103dd39235ca961951</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd6445c90000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>HR NPS Score</target_name><type>Dictionary</type><update_domain>global</update_domain><update_guid>422162b3222a33003f591cc58443bebf</update_guid><update_guid_history>422162b3222a33003f591cc58443bebf:-259043834</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>sys_properties_f5b17cc4c33030006568506adfba8f11</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_properties">
  <sys_properties action="INSERT_OR_UPDATE">
    <choices>aspen&#13;
berlin&#13;
calgary</choices>
    <description>Version of Zing currently used by the instance</description>
    <ignore_cache>false</ignore_cache>
    <is_private>false</is_private>
    <name>glide.ts.version</name>
    <read_roles/>
    <sys_created_by>system</sys_created_by>
    <sys_created_on>2012-09-25 22:57:45</sys_created_on>
    <sys_id>f5b17cc4c33030006568506adfba8f11</sys_id>
    <sys_mod_count>2</sys_mod_count>
    <sys_updated_by>maint</sys_updated_by>
    <sys_updated_on>2012-09-26 00:49:02</sys_updated_on>
    <type>string</type>
    <value>aspen</value>
    <write_roles/>
  </sys_properties>
  <sys_translated_text action="delete_multiple" query="documentkey=f5b17cc4c33030006568506adfba8f11"/>
</record_update>]]></payload><payload_hash>-126904358</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>true</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>5cdac92fdb2600103dd39235ca961954</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16ff7f95fe80000000</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>glide.ts.version</target_name><type>System Property</type><update_domain>global</update_domain><update_guid>a766092bb0260010dc10255600a73951</update_guid><update_guid_history>a766092bb0260010dc10255600a73951:-126904358,16c8bfe54a171300a1fb3ae87192a914:1572830397,86c87fe5301713001bcf0ae9c2bfd7f9:204792453</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_205cba709f221200d9011977677fcf21</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;public&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;sn_hr_core.hr_AssignmentUtil&lt;/api_name&gt;&lt;caller_access&gt;1&lt;/caller_access&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;description&gt;Util for assigning HR cases and tasks&lt;/description&gt;&lt;name&gt;hr_AssignmentUtil&lt;/name&gt;&lt;script&gt;&lt;![CDATA[var hr_AssignmentUtil = Class.create();
hr_AssignmentUtil.prototype = Object.extendsObject(global.AbstractAjaxProcessor, {

	// First see if the hr case assignee has the skills required by the task  and is in the assignment group set on the task, and if so, assign to the same person.
	getAgentsForHrTaskByCountryAndSkills: function(taskRecord) {
		//Verify recordGr is a gliderecord, and extends task
        if (!(taskRecord instanceof GlideRecord) || !taskRecord.canRead() || new GlideTableHierarchy(taskRecord.getRecordClassName()).getTables().indexOf('sn_hr_core_task') == -1)
            return [];
		var ids = this.getAgentsByCountryAndSkillsOrderLeastLoaded(taskRecord);
		// if the parent case is assigned, see if that person is in our list and pop them to the front if so
		if (!gs.nil(taskRecord.parent)) {
			var parentAgent = taskRecord.parent.assigned_to;
			ids = this._prioritizeAgent(parentAgent, ids);
		}
		return ids;
	},

	getAgentsForHrTaskBySkills: function(taskRecord) {
		//Verify recordGr is a gliderecord, and extends task
        if (!(taskRecord instanceof GlideRecord) || !taskRecord.canRead() || new GlideTableHierarchy(taskRecord.getRecordClassName()).getTables().indexOf('sn_hr_core_task') == -1)
            return [];
		var ids = this.getAgentsBySkillOrderLeastLoaded(taskRecord);
		// if the parent case is assigned, see if that person is in our list and pop them to the front if so
		if (!gs.nil(taskRecord.parent)) {
			var parentAgent = taskRecord.parent.assigned_to;
			ids = this._prioritizeAgent(parentAgent, ids);
		}
		return ids;
	},

	/*
	If the provided agent is in the array of agents, make the provided agent first in the array of agents. Otherwise do not modify the list.
	*/
	_prioritizeAgent: function(agent, ids) {
		if (agent) {
			agent = agent.toString();
			var idx = ids.indexOf(agent, 1); // don't bother looking at index zero as if it is already first in list we have no work to do
			if (idx &gt; -1) {
				ids.splice(idx, 1); // remove one element at idx position
				ids.unshift(agent); // add it back at the front of the array
			}
		}
		return ids;
	},

	/*
	Look for least loaded agent with desired attributes:
		In same geography (i.e., agent's country same as the 'subject_person' country)
		With the right skills
		Sorted by least loaded
	*/
	getAgentsByCountryAndSkillsOrderLeastLoaded: function(taskRecord) {
		var ids = [];
		if (!taskRecord || taskRecord.assignment_group.nil())
			return ids;

		// if no skills required for task just return agents by country
		if (taskRecord.skills.nil())
			return this.getAgentsByCountryOrderLeastLoaded(taskRecord); // handles no subject_person by returning all agents

		// if no subject person, just return agents by skill
		var subjectCountry = this._getSubjectPersonCountry(taskRecord);
		if (!subjectCountry || subjectCountry.nil())
			return this.getAgentsBySkillOrderLeastLoaded(taskRecord);

		// we have a country and skills, so need to get both and intersect
		var agentsWithSkills = this.getAgentsBySkill(taskRecord);
		var agentsWithCountry = this.getAgentsByCountry(taskRecord);

		var arrayUtil = new global.ArrayUtil();
		var agents = arrayUtil.intersect(agentsWithSkills, agentsWithCountry);
		// intersect call doesn't guarantee that it will preserve order, so want to get counts and sort at end, not intermediate steps
		ids = this._sortAgentsByLeastLoaded(agents);
		return ids;
	},

	/*
	The simplest approach -- least loaded agent in group.
	*/
	getAgentsOrderLeastLoaded: function(taskRecord) {
		var agents = this.getAgents(taskRecord);
		var ids = this._sortAgentsByLeastLoaded(agents);
		return ids;
	},

	getAgents: function(taskRecord) {
		var agents = [];
		if (!taskRecord || taskRecord.assignment_group.nil())
			return agents;

		var groupMemberGr = new GlideRecord('sys_user_grmember');
		groupMemberGr.addQuery('group', taskRecord.assignment_group);
		groupMemberGr.addNotNullQuery('user');
		groupMemberGr.query();
		while (groupMemberGr.next())
			agents.push(groupMemberGr.getValue('user'));

		return agents;
	},

	/*
	If the task requires no skills, return all agents.
	*/
	getAgentsBySkillOrderLeastLoaded: function(taskRecord) {
		var agents = this.getAgentsBySkill(taskRecord);
		var ids = this._sortAgentsByLeastLoaded(agents);
		return ids;
	},

	/*
	If the task requires no skills, return all agents.
	*/
	getAgentsBySkill: function(taskRecord) {
		var agents = [];
		if (!taskRecord || taskRecord.assignment_group.nil())
			return agents;

		var numSkills = 0;
		var splitSkills;
		if (!taskRecord.skills.nil()) {
			splitSkills = taskRecord.skills.split(',');
			numSkills = splitSkills.length;
		}

		if (numSkills == 0)
			agents = this.getAgents(taskRecord); // no skills required so get all agents
		else {
			var grGroupMember = new GlideRecord('sys_user_grmember');
			grGroupMember.addQuery('group', taskRecord.assignment_group);
			grGroupMember.addNotNullQuery('user');
			grGroupMember.query();
			if (grGroupMember.getRowCount() &gt; 0) {
				while (grGroupMember.next()) {
					var skills = new GlideAggregate("sys_user_has_skill");
					skills.addEncodedQuery("skillIN" + splitSkills);
					skills.addQuery("user", grGroupMember.user);
					skills.addQuery('active', true);
					skills.addAggregate("COUNT(DISTINCT", "skill");
					skills.groupBy("user");
					skills.query();
					 if (skills.next()) {
						 var cnt = skills.getAggregate("COUNT(DISTINCT", "skill");
						 if (cnt == numSkills)
							 agents.push(grGroupMember.user.toString());
					 }
				}
			}
		}

		return agents;
	},

	/*
	If no country exists on the subject person location (or no location at all, or even no person at all), return all agents
	*/
	getAgentsByCountryOrderLeastLoaded: function(taskRecord) {
		var agents = this.getAgentsByCountry(taskRecord);
		var ids = this._sortAgentsByLeastLoaded(agents);
		return ids;
	},

	/*
	If no country exists on the subject person location (or no location at all, or even no person at all), return all agents
	*/
	getAgentsByCountry: function(taskRecord) {

		var agents = [];

		if (!taskRecord || taskRecord.assignment_group.nil())
			return agents;

		// probably should be using sys id for country comparison, but seems unlikely multiple countries will have same name
		var subjectCountry = this._getSubjectPersonCountry(taskRecord);  // use subject person, not opened for, per Lucinda
		if (!subjectCountry || subjectCountry.nil()) {
			// assuming that no country on the subject person user means we can return any agent, so get least loaded
			agents = this.getAgents(taskRecord);
		} else {
			var grGroupMember = new GlideRecord('sys_user_grmember');
			grGroupMember.addQuery('group', taskRecord.assignment_group);
			grGroupMember.addNotNullQuery('user.location');
			grGroupMember.query();
			while (grGroupMember.next()) {
				var locSysId = grGroupMember.user.location;
				var grLocation = new GlideRecord('cmn_location');
				if (grLocation.get(locSysId)) {
					var agentCountry = grLocation.getValue('country');
					if (agentCountry &amp;&amp; agentCountry == subjectCountry)
						agents.push(grGroupMember.getValue('user'));
					else {
						var parentLocation = grLocation.getValue('parent');
						if (parentLocation) {
							agentCountry = grLocation.parent.country;
							if (agentCountry &amp;&amp; agentCountry == subjectCountry)
								agents.push(grGroupMember.getValue('user').toString());
						}
					}
				}
			}
		}
		return agents;
	},

	_sortAgentsByLeastLoaded: function(agents) {
		var ids = [];
		if (gs.nil(agents) || !agents.length)
			return [];
		try {
			var assignCount = {};
			var assignedTo;
			var caseCount;

			// get count of assigned cases per agent
			var count = new GlideAggregate('task');
			count.addQuery('assigned_to', 'IN', agents);
			count.addQuery('active', 'true');
			count.addQuery('sys_class_name', 'INSTANCEOF', 'sn_hr_core_case').addOrCondition('sys_class_name', 'INSTANCEOF', 'sn_hr_core_task');
			count.addAggregate('COUNT', 'assigned_to');
			count.orderByAggregate('COUNT', 'assigned_to');
			count.query();

			while (count.next()) {
				assignedTo = count.assigned_to;
				caseCount = parseInt(count.getAggregate('COUNT', 'assigned_to'));
				assignCount[assignedTo] = caseCount;
			}


			// The query returns only those agents with assignments. Any agents not returned are added to list with a count of zero
			var list = [];
			for (var i = 0; i  &lt; agents.length; i++) {
				var id = agents[i];
				var obj = {'id' : id};
				var cnt = assignCount[id];
				if (!gs.nil(cnt))
					obj['value'] = cnt;
				else
					obj['value'] = 0;
				list.push(obj);
			}
			//sort the list by count
			list.sort(function (a, b) {
				if (a.value &gt; b.value)
					return 1;
				if (a.value &lt; b.value)
					return -1;
				return 0;
			});

			for (var index = 0; index  &lt; list.length; index++)
				ids.push(list[index]['id']);

		} catch (err) {
			gs.error("Error in get agents by least loaded list: "+ err.message);
			ids = agents;
		}
		return ids;
	},

	_getSubjectPersonCountry: function(record) {

        var recordGr;
        if (record)
            recordGr = record;
        else {
            if (!current || gs.nil(current))
                return '';
            recordGr = current;
        }

        // Verify that recordGr is a glide record and extends task
        if (!(recordGr instanceof GlideRecord) || !recordGr.canRead() || new GlideTableHierarchy(recordGr.getRecordClassName()).getTables().indexOf('task') == -1)
            return '';

		if (recordGr.isValidField('subject_person')) {
			if (recordGr.subject_person &amp;&amp; recordGr.subject_person.location)
				return recordGr.subject_person.location.country;
			return '';
		}

		if (gs.nil(recordGr.parent))
			return '';
		var parentGr = recordGr.parent.getRefRecord();
		if (parentGr.isValidField('subject_person')) {
			if (parentGr.subject_person &amp;&amp; parentGr.subject_person.location)
				return parentGr.subject_person.location.country;
			return '';
		}

		return '';
	},

    /* Get a field from the current record or its parent
    * @param field : name of the field to retrieve
    * @param record : Optional GlideRecord to use for this method
    */
	getField: function(field, record) {
        if (gs.nil(field))
            return '';

        var recordGr;
        if (record)
            recordGr = record;
        else {
            if (!current || gs.nil(current))
                return '';
            recordGr = current;
        }

        //Verify recordGr is a gliderecord, and extends task
        if (!(recordGr instanceof GlideRecord) || !recordGr.canRead() || new GlideTableHierarchy(recordGr.getRecordClassName()).getTables().indexOf('task') == -1)
            return '';

		if (recordGr.isValidField(field)) {
			if (recordGr[field].canRead())
				return recordGr.getValue(field);
			return '';
		}

		if (gs.nil(recordGr.parent))
			return '';
		var parentGr = recordGr.parent.getRefRecord();
		if (parentGr.isValidField(field)) {
			if (parentGr.canRead() &amp;&amp; parentGr[field].canRead())
				return parentGr.getValue(field);
			return '';
		}

		return '';
	},

    type: 'hr_AssignmentUtil'
});]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2016-03-31 18:17:25&lt;/sys_created_on&gt;&lt;sys_id&gt;205cba709f221200d9011977677fcf21&lt;/sys_id&gt;&lt;sys_mod_count&gt;43&lt;/sys_mod_count&gt;&lt;sys_name&gt;hr_AssignmentUtil&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_205cba709f221200d9011977677fcf21&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 14:30:30&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload><payload_hash>1616153142</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>5cdac92fdb2600103dd39235ca961957</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0057829e0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_AssignmentUtil</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>3dfddd403d7273005e69d287226579bf</update_guid><update_guid_history>3dfddd403d7273005e69d287226579bf:1616153142,3dfddd40da72730051e038687a8eb7bc:-1983303275</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_7a5370019f22120047a2d126c42e7000</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;
  &lt;sys_script_include action="INSERT_OR_UPDATE"&gt;
    &lt;access&gt;public&lt;/access&gt;
    &lt;active&gt;true&lt;/active&gt;
    &lt;api_name&gt;sn_hr_core.hr_Case&lt;/api_name&gt;
    &lt;caller_access&gt;2&lt;/caller_access&gt;
    &lt;client_callable&gt;false&lt;/client_callable&gt;
    &lt;description&gt;Handles HR Case records&lt;/description&gt;
    &lt;name&gt;hr_Case&lt;/name&gt;
    &lt;script&gt;&lt;![CDATA[var hr_Case = Class.create();

hr_Case._ignoreChangeEditableFields = {
    'opened_for': '',
    'priority': '',
    'short_description': '',
    'description': ''
};

hr_Case.userHasSubjectPersonAccess = function(gr) {
    var isSubjectPerson = gr.subject_person == gs.getUserID();

    return isSubjectPerson &amp;&amp; !gs.nil(gr.hr_service) &amp;&amp; hr_Case.serviceHasSubjectPersonAccess(String(gr.hr_service));
};

hr_Case.serviceHasSubjectPersonAccess = function(hrService) {
	if(!hr_Case.hasOwnProperty('servicesWithSubjectPersonAccess'))
		hr_Case['servicesWithSubjectPersonAccess'] = hr_Case._fetchServicesWithSubjectPersonAccess();
	
	return hr_Case['servicesWithSubjectPersonAccess'].indexOf(hrService) &gt; -1;
};

hr_Case._fetchServicesWithSubjectPersonAccess = function() {
	var servicesWithSubjectPersonAccess = [];
	var hrServiceGr = new GlideRecord('sn_hr_core_service');
	hrServiceGr.addQuery('subject_person_access', true);
	hrServiceGr.query();
	
	while(hrServiceGr.next())
		servicesWithSubjectPersonAccess.push(hrServiceGr.getUniqueValue());
	
	return servicesWithSubjectPersonAccess;
};

/*
 * Handle HR Case generation and management through the Case creation process:
 * - through an RP
 * - script based
 * - with a New button
 */
hr_Case.prototype = {

    initialize: function(_case, _gs) {
        if (!_case)
            return;

        this._case = _case;
        this._gs = _gs || gs;
    },

    /*
     * Sets the location, company and department fields on sn_hr_core_case from the user in opened_for
     */
    setUserFields: function() {
        this._logDebug("[setUserFields] Setting user fields kicking off");

        // Don't do anything if we're updating and nothing has changed
        if (!this._case.opened_for || !this._case.opened_for.changes()) {
            this._logDebug("[setUserFields] no changes to opened_for, exiting");
            return;
        }

        // Dereference these fields from opened_for user; set for example, this._case[location]
        this._setFromRefField("opened_for", "location");
        this._setFromRefField("opened_for", "company");
        this._setFromRefField("opened_for", "department");
    },

    _userHasCaseWriterRole: function(user) {
        var userId = user || gs.getUserID();
        var gr = new GlideRecord('sys_user_has_role');
        gr.addQuery('user', userId);
        gr.addQuery('role.name', hr.ROLE_HR_CASE_WRITER);
        gr.setLimit(1);
        gr.query();
        return gr.hasNext();
    },

    /*
     * Public helper methods for read/write ACLs
     */
    canEditCase: function(userId, failedReadPolicy) {
        if (this._case.isNewRecord())
            return true;
		
		if (!failedReadPolicy) {
			if (gs.nil(userId) || userId == gs.getUserID()) {
				var roles = new hr_Utils();
				if (roles.checkUserHasRole(hr.ROLE_HR_CASE_WRITER) &amp;&amp; 
						new sn_hr_core.hr_SecurityUtils().getCoeSecurityPolicy(this._case, hr_SecurityUtils.WRITE, userId))
					return true;
			} else if (this._userHasCaseWriterRole(userId) &amp;&amp;
						new sn_hr_core.hr_SecurityUtils().getCoeSecurityPolicy(this._case, hr_SecurityUtils.WRITE, userId))
					return true;
		}

        var currentUserId = gs.nil(userId) ? this._gs.getUserID() : userId;

        // Check if it's the user who opened the case
        if (!gs.nil(this._case.opened_by) &amp;&amp; this._case.opened_by == currentUserId)
            return true;

        // Check if it's the user for whom the case was opened for
        if (!gs.nil(this._case.opened_for) &amp;&amp; this._case.opened_for == currentUserId)
            return true;

        // Check if the user is in the watch list field
        if (!gs.nil(this._case.watch_list) &amp;&amp; this._case.watch_list.indexOf(currentUserId) &gt; -1)
            return true;

        return false;
    },

    canReadCase: function(userId) {
        var hasRole = new sn_hr_core.hr_Utils().userHasHRRole(userId);
		var failedReadPolicy = false;
        if(hasRole) {
			var passedPolicy;
			if (!gs.nil(this._case))
				passedPolicy = new sn_hr_core.hr_SecurityUtils().getCoeSecurityPolicy(this._case, hr_SecurityUtils.READ, userId);
			else
				passedPolicy = true;
			
			if (passedPolicy)
				return true;
			else
				failedReadPolicy = true;
		}
		
        userId = gs.nil(userId) ? this._gs.getUserID() : userId;
        var roCondition = this._evaluateROConditionForHRCase(userId, failedReadPolicy);
        if(roCondition)
            return true;
		
        var parent = this._hasParentAccess(userId);
        if (parent)
            return true;
		
		return this._isTaskAssignee(userId);
    },

    _hasParentAccess: function(userId) {
        var access = false;
        if (!gs.nil(this._case.parent))
            access = (this._case.parent.opened_for == userId || this._case.parent.opened_by == userId || this._case.parent.watch_list.toString().indexOf(userId) &gt;= 0);

        return access;
    },

    _isTaskAssignee: function(userId) {
		if (gs.nil(this._case) || gs.nil(this._case.sys_id))
			return false;
		
        var cases = new hr_Utils().getCaseSysIdForTaskAssignee(userId);
        return cases.indexOf(this._case.sys_id) &gt;= 0;
    },

    _evaluateROConditionForHRCase: function(userId, failedReadPolicy) {
        return sn_hr_core.hr_Case.userHasSubjectPersonAccess(this._case) || this.canEditCase(userId, failedReadPolicy) || this.isApproverUserForCase(userId);
    },

    /*
     * Public helper method to determine if user can cancel his/her own case.
     */
    canCancelCase: function() {
        var currentUserId = this._gs.getUserID();
        var openedFor = this._case.opened_for;

        if (openedFor == currentUserId &amp;&amp; !this._case.submitter_can_cancel)
            return false;
		else
			return true;
    },

    /*
     * Public helper method to determine whether the case has an approver user
     */
    isApproverUserForCase: function(userId) {
        var sysApprovalGR = new GlideRecord('sysapproval_approver');
        sysApprovalGR.addQuery('sysapproval', this._case.getUniqueValue());
        sysApprovalGR.addQuery('approver', new hr_Utils().getApprovals(userId));
        sysApprovalGR.query();
        return sysApprovalGR.next();
    },

    /*
     * Public helper functions to trigger case creation events
     */
    sendEvents: function() {
        var _gr = this._case;
        var _gs = this._gs;

        this._logDebug("sending events for sn_hr_core_case: " + _gr.number);

        // On insert
        if (_gr.operation() == "insert") 
            _gs.eventQueue("sn_hr_core_case.inserted", _gr, _gs.getUserID(), _gs.getUserName());
    

        if (_gr.operation() == "insert" &amp;&amp; _gr.assignment_group.nil())
            _gs.eventQueue("sn_hr_core_case.inserted.unassigned", _gr, _gs.getUserID(), _gs.getUserName());

        if (_gr.operation() == "insert" &amp;&amp; !_gr.assignment_group.nil())
            _gs.eventQueue("sn_hr_core_case.inserted.assigned", _gr, _gs.getUserID(), _gs.getUserName());

        // On update
        if (_gr.operation() == "update") 
            _gs.eventQueue("sn_hr_core_case.updated", _gr, _gs.getUserID(), _gs.getUserName());
  

        // On Assignment group change
        if (_gr.operation() == "update" &amp;&amp; _gr.assignment_group.changes())
            _gs.eventQueue("sn_hr_core_case.assignment_group.changed", _gr, _gs.getUserID(), _gs.getUserName());

        // On comments
        if (_gr.operation() != "insert" &amp;&amp; _gr.comments.changes())
            _gs.eventQueue("sn_hr_core_case.commented", _gr, _gs.getUserID(), _gs.getUserName());
    },
	
    /*
     * Gets the current calendar duration, utility function
     */
    getCalendarDuration: function() {
        var start = new GlideDateTime(this._case.getValue("opened_at"));
        if (!start)
            return;

        var end = new GlideDateTime();
        end.setDisplayValue(new GlideDateTime().getDisplayValue());

        var hrUtil = new sn_hr_core.hr_Utils();
        var seconds = hrUtil.calcDuration(start, end);
        //Convert seconds to milliseconds and gets the duration value
        var duration = new GlideDuration(seconds * 1000);
        this._case.calendar_duration = duration;
    },

    /*
     * Populates fields on sn_hr_core_case from another record
     */
    _setFromRefField: function(refField, fromField, toField) {
        if (!toField)
            toField = fromField;

        if (this._case[toField]) {
            // The destination is not empty: do not update it
            return;
        } else {
            // Set the source
            this._logDebug("[setField] " + toField + " set to " + this._case[refField][fromField]);
            this._case[toField] = this._case[refField][fromField];
        }
    },

    /*
     * Gets calendar duration between two dates
     *
     * @param startDateTime the start GlideDateTime
     * @param endDateTime the end GlideDateTime
     * @return the GlideDuration between the dates directly
     */
    _calculateCalendarDuration: function(startDateTime, endDateTime) {
        //calls duration calculator to get the difference of start date and end date in seconds

        var newDuration = new rhino.global.DurationCalculator();
        newDuration.calcScheduleDuration(startDateTime, endDateTime);

        //Convert seconds to milliseconds and gets the duration value
        var gd = new GlideDuration((newDuration.getSeconds() * 1000));
        return gd;
    },

    /*
     * Method to iterate through stated sections that are in the properties and
     * work out percentage completed.
     */
    getUserCompletionStatusForm: function(currentRecord) {
        var formSections = gs.getProperty("com.snc.hr.employee_change.sections", "");
        var returnSections = {
            data: []
        };
        var totalFields = 0;
        var totalFilledFields = 0;
        if (formSections != "") {
            var uiSections = new GlideRecord("sys_ui_section");
            uiSections.addEncodedQuery("name=sn_hr_core_case^view=99b6e2c637311100e90d4e06efbe5dbb^captionIN" + formSections);
            uiSections.query();
            while (uiSections.next()) {
                var validElements = this._getSectionElements(uiSections.sys_id);
                totalFields += validElements.length;
                var filledFields = 0;
                for (var i = 0; i &lt; validElements.length; i++) {
                    if (this._validateRecordField(currentRecord, validElements[i]))
                        filledFields++;
                }
                totalFilledFields += filledFields;
                returnSections.data.push(this._checkSectionStatus(uiSections.caption, filledFields, validElements.length));
            }
        }
        returnSections["filled"] = totalFilledFields;
        returnSections["total"] = totalFields;

        return returnSections;
    },

    /*
     * Gets display value for passed in variable
     *
     * @param variable The variable whose value is wanted
     * @param defaultAnswer The value to return if a display value could not be found
     * @return The value to display for the passed in variable
     */
    _getDisplayValue: function(variable, defaultAnswer, defaultDisplayValue) {
        var value = defaultDisplayValue ? defaultDisplayValue : defaultAnswer;

        var tableName = variable.reference.getDisplayValue();
        if (!tableName)
            return value;

        var record = new GlideRecord(tableName);
        return (record.get(defaultAnswer)) ? record.getDisplayValue() : value;
    },

    /*
     *  Gets all the elements that are related in the section
     */
    _getSectionElements: function(sectionId) {
        var elements = [];
        var uiSectionElement = new GlideRecord("sys_ui_element");
        uiSectionElement.addQuery("sys_ui_section", sectionId);
        uiSectionElement.addQuery("type", "");
        uiSectionElement.query();
        while (uiSectionElement.next()) {
            if (uiSectionElement.element.substring(0, 1) != ".")
                elements.push(uiSectionElement.getDisplayValue("element"));
        }

        return elements;
    },

    /*
     *  Used to validate if the field stated in the element is populated.
     */
    _validateRecordField: function(current, element) {
        if (element.indexOf(".") &gt; -1) {
            var elementArray = element.split(".");
            if (elementArray[0] == current.getTableName())
                return (current.getDisplayValue(elementArray[1]) == "");
            else {
                var grRec = new GlideRecord(elementArray[0]);
                if (grRec.get(current.getValue(elementArray[0]))) {
                    return ((grRec.getDisplayValue(elementArray[1]) != "") &amp;&amp; (grRec.getDisplayValue(elementArray[1]) != null));
                }
            }
            return false;
        } else
            return current.getDisplayValue(element) != "";
    },

    /*
     * Takes input section with a total of fields and a number of filled in
     * fields. Returns JSON object of progress for section.
     */
    _checkSectionStatus: function(caption, count, total) {
        var section = {};

        section["title"] = "" + caption;
        section["cssClass"] = "";
        section["status"] = "";

        if (count == total) {
            section["cssClass"] = "done";
            section["status"] = "Done";
        }
        if (count &lt; total) {
            section["cssClass"] = "in_progress";
            section["status"] = "In Progress";
        }
        if (count == 0) {
            section["cssClass"] = "not_started";
            section["status"] = "Not Done";
        }
        return section;
    },

    /*
     * Convenience method to prevent the code becoming unreadable from the useful debug statements
     */
    _logDebug: function(str) {
        if (gs.isDebugging())
            gs.debug(str);
    },

    /**
       Checks if the document is already attached to the case or to the task
    */
    hasAttachment: function(tableName, currentRecord) {
        var template;
        if (tableName == hr.TABLE_TASK)
            template = currentRecord.parent.pdf_template.getDisplayValue() + '%';
        else
            template = currentRecord.pdf_template.getDisplayValue() + '%';
        var attachment = new GlideRecord('sys_attachment');
        attachment.addQuery('table_name', tableName);
        attachment.addQuery('table_sys_id', currentRecord.sys_id);
        attachment.addQuery('file_name', 'LIKE', template);
        attachment.setLimit(1);
        attachment.query();
        return attachment.hasNext();
    },

    /**
      Returns true if the current record is a glide record, has a field named pdf_template, has a value for that field,
      and has an attachment whose name starts with the display value of the pdf template
    */
    hasPdfTemplateAttachment: function(currentRecord) {
        if (!(currentRecord instanceof GlideRecord))
            return false;
		
        if (!currentRecord.pdf_template || !currentRecord.pdf_template.getDisplayValue())
            return false;

        var attachment = new GlideRecord('sys_attachment');
        attachment.addQuery('table_name', currentRecord.getTableName());
        attachment.addQuery('table_sys_id', currentRecord.sys_id);
        attachment.addQuery('file_name', 'STARTSWITH', currentRecord.pdf_template.getDisplayValue());
        attachment.setLimit(1);
        attachment.query();
        return attachment.hasNext();
    },

    needUserAction: function(currentRecord, display) {
        var tasks = new GlideRecord('sn_hr_core_task');
        if (display == "message")
            tasks.addActiveQuery();
		
        tasks.addQuery('state', 'IN', '10,16,17,18,3,4');
        tasks.addQuery('parent', currentRecord.getUniqueValue());
        tasks.addQuery('assigned_to', gs.getUserID());
        tasks.addNotNullQuery('hr_task_type');
        tasks.setLimit(1);
        tasks.query();
        return tasks.hasNext();
    },

    /**
     * Return true if:
     *   the user has case writer role
     *   the case status is assigned or ready
     *   the case isn't already assigned to the user
     *   if there is an assignment group, the user is in the assignment group
     * @return boolean user can assign the case to self
     */
    canAssignToSelf: function() {
        var hasRole = this._gs.hasRole("sn_hr_core.case_writer");
        if (!hasRole)
            return false;

        var assignableState = (this._case.state == hr_Constants.CASE_ASSIGNED || this._case.state == hr_Constants.CASE_QUALIFIED);
        if (!assignableState)
            return false;

        var notAssignedToSelf = this._case.assigned_to != this._gs.getUserID();
        if (!notAssignedToSelf)
            return false;

        if (this._case.assignment_group.nil())
            return true;

        var user_group = new GlideRecord("sys_user_grmember");
        user_group.addQuery("user", this._gs.getUserID());
        user_group.addQuery("group", "" + this._case.assignment_group);
        user_group.query();
        var userIsAgentForGroup = user_group.hasNext();

        return userIsAgentForGroup;
    },

    canSignDocument: function() {
        if (this._case.assigned_to != this._gs.getUserID())
            return false;

        var signature = new GlideRecord('signature_image');
        signature.addQuery('document', this._case.sys_id);
        signature.addActiveQuery();
        signature.query();
        return !signature.next();
    },

    /*
     * Update a sn_hr_core_case record total_percent_complete field when related tasks are completed
     */
    updateHRCasePercentComplete: function(gr) {
        // Exit if no parent field
        if (gr.parent.nil())
            return;

        // Exit if unable to get the sn_hr_core_case record
        var hrCase = new GlideRecord("sn_hr_core_case");
        if (!hrCase.get(gr.getValue("parent")))
            return;

        var totalGr = new GlideRecord("task");
        totalGr.addQuery("parent", gr.getValue("parent"));
        totalGr.addQuery("sys_class_name", "!=", "sysapproval_group");
        totalGr.query();

        var totalGrCount = totalGr.getRowCount();

        var completeGr = 0;
        while (totalGr.next()) {
            if (!totalGr.active)
                completeGr++;
        }

        var percent = parseInt((completeGr / totalGrCount) * 100);

        hrCase.setValue("task_percent_complete", percent);
        hrCase.update();
        return percent;
    },

    /*
     * Validates whether the changes on the record producer require HR
     * authorization. Returns yes if requires authorization.
     * Called from Employee Update Profile Workflow
     */
    requireChgAuthorization: function() {
        // Hr case writer can update all fields with no restriction
        var roles = new hr_Utils();
        if (roles.checkUserHasRole('sn_hr_core.case_writer'))
            return 'no';

        var fieldsList = 
			gs.getProperty('sn_hr_core.hr_profile_editable_fields', 'state,home_phone,address,work_mobile,country,work_email,introduction,middle_name,work_phone,zip,personal_email,city,mobile_phone,');
        var parameters = new global.JSON().decode(this._case.payload);
        var grProfile = new GlideRecord(sn_hr_core.hr.TABLE_PROFILE);
        if (grProfile.get(this._case.hr_profile)) {
            var hrProfile = new sn_hr_core.hr_Profile(this._case.hr_profile, this._gs);
            for (var key in parameters) {
                if (hr_Case._ignoreChangeEditableFields.hasOwnProperty(key))
                    continue;

                var val = hrProfile.getDisplayValue(grProfile, key, false);
                if (parameters[key] != val &amp;&amp; fieldsList.indexOf(key) == -1) {
                    this._case.comments = gs.getMessage('Change requires an approval, submitting approval request');
                    return 'yes';
                }
            }
        }
        // No Approval required if no keys were found in
        return 'no';
    },

    /*
     * Method for Employee Profile Update workflow to update the
     * profile record from values provided from record producer.
     */
    updateProfile: function() {
        var hrProfile = new sn_hr_core.hr_Profile(this._case.hr_profile, this._gs);
        hrProfile.updateProfile(current.sys_id, current.hr_profile);
    },

    /*
     * Return boolean if the hr Case has a valid task with given assigned to user
     *
     */
    allowTaskAccessToAssignedToUser: function(userName) {
        var hrTask = new GlideRecord('sn_hr_core_task');
        hrTask.addQuery('assigned_to', userName);
        hrTask.addQuery('parent', this._case.getUniqueValue());
        hrTask.query();
        return hrTask.hasNext();
    },

    type: "hr_Case"
};]]&gt;&lt;/script&gt;
    &lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;
    &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
    &lt;sys_created_on&gt;2013-07-04 13:54:17&lt;/sys_created_on&gt;
    &lt;sys_id&gt;7a5370019f22120047a2d126c42e7000&lt;/sys_id&gt;
    &lt;sys_mod_count&gt;802&lt;/sys_mod_count&gt;
    &lt;sys_name&gt;hr_Case&lt;/sys_name&gt;
    &lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;
    &lt;sys_policy/&gt;
    &lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;
    &lt;sys_update_name&gt;sys_script_include_7a5370019f22120047a2d126c42e7000&lt;/sys_update_name&gt;
    &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
    &lt;sys_updated_on&gt;2019-11-21 17:34:46&lt;/sys_updated_on&gt;
  &lt;/sys_script_include&gt;
&lt;/record_update&gt;</payload><payload_hash>1438501790</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>true</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>5cdac92fdb2600103dd39235ca96195a</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00578d220000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_Case</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>3f66092bde260010c6039cdf5d991794</update_guid><update_guid_history>3f66092bde260010c6039cdf5d991794:1438501790,aafd1180ee7273003ec90e32f25a5a17:872434272,e2fd118016727300c406abb07b448d15:-204771359</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_security_acl_f259a1514f633300ad404a10a310c7f8</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl"><sys_security_acl action="INSERT_OR_UPDATE"><active>true</active><admin_overrides>true</admin_overrides><advanced>false</advanced><condition/><description>Default access control on sn_hr_core_case_asc</description><name>sn_hr_core_case_asc</name><operation display_value="read">read</operation><script/><sys_class_name>sys_security_acl</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-08-27 19:19:47</sys_created_on><sys_id>f259a1514f633300ad404a10a310c7f8</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sn_hr_core_case_asc</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_security_acl_f259a1514f633300ad404a10a310c7f8</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-08-27 19:19:47</sys_updated_on><type display_value="record">record</type></sys_security_acl></record_update>]]></payload><payload_hash>1573022444</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>5cdac92fdb2600103dd39235ca96195d</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16cd48515b60000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case_asc</table><target_name>sn_hr_core_case_asc</target_name><type>Access Control</type><update_domain>global</update_domain><update_guid>3659a1518a633300f62f8d41a231effb</update_guid><update_guid_history>3659a1518a633300f62f8d41a231effb:1573022444</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_ui_section_b74126334f2a3300ad404a10a310c743</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update><sys_ui_section caption="" section_id="b74126334f2a3300ad404a10a310c743" sys_domain="global" table="sn_hr_core_nps_score" version="3" view=""><sys_ui_element action="INSERT_OR_UPDATE"><element>.begin_split</element><position>0</position><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:54:36</sys_created_on><sys_id>8a3362374f2a3300ad404a10a310c7e1</sys_id><sys_mod_count>0</sys_mod_count><sys_ui_formatter/><sys_ui_section caption="NULL" display_value="" name="sn_hr_core_nps_score" sys_domain="global" view="Default view">b74126334f2a3300ad404a10a310c743</sys_ui_section><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:54:36</sys_updated_on><sys_user/><type>.begin_split</type></sys_ui_element><sys_ui_element action="INSERT_OR_UPDATE"><element>u_date</element><position>1</position><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:54:36</sys_created_on><sys_id>0e3362374f2a3300ad404a10a310c7e1</sys_id><sys_mod_count>0</sys_mod_count><sys_ui_formatter/><sys_ui_section caption="NULL" display_value="" name="sn_hr_core_nps_score" sys_domain="global" view="Default view">b74126334f2a3300ad404a10a310c743</sys_ui_section><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:54:36</sys_updated_on><sys_user/><type/></sys_ui_element><sys_ui_element action="INSERT_OR_UPDATE"><element>u_employee</element><position>2</position><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:54:36</sys_created_on><sys_id>8e3362374f2a3300ad404a10a310c7e1</sys_id><sys_mod_count>0</sys_mod_count><sys_ui_formatter/><sys_ui_section caption="NULL" display_value="" name="sn_hr_core_nps_score" sys_domain="global" view="Default view">b74126334f2a3300ad404a10a310c743</sys_ui_section><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:54:36</sys_updated_on><sys_user/><type/></sys_ui_element><sys_ui_element action="INSERT_OR_UPDATE"><element>u_latest</element><position>3</position><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:54:36</sys_created_on><sys_id>023362374f2a3300ad404a10a310c7e2</sys_id><sys_mod_count>0</sys_mod_count><sys_ui_formatter/><sys_ui_section caption="NULL" display_value="" name="sn_hr_core_nps_score" sys_domain="global" view="Default view">b74126334f2a3300ad404a10a310c743</sys_ui_section><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:54:36</sys_updated_on><sys_user/><type/></sys_ui_element><sys_ui_element action="INSERT_OR_UPDATE"><element>.split</element><position>4</position><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:54:36</sys_created_on><sys_id>823362374f2a3300ad404a10a310c7e2</sys_id><sys_mod_count>0</sys_mod_count><sys_ui_formatter/><sys_ui_section caption="NULL" display_value="" name="sn_hr_core_nps_score" sys_domain="global" view="Default view">b74126334f2a3300ad404a10a310c743</sys_ui_section><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:54:36</sys_updated_on><sys_user/><type>.split</type></sys_ui_element><sys_ui_element action="INSERT_OR_UPDATE"><element>u_case</element><position>5</position><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:54:36</sys_created_on><sys_id>063362374f2a3300ad404a10a310c7e2</sys_id><sys_mod_count>0</sys_mod_count><sys_ui_formatter/><sys_ui_section caption="NULL" display_value="" name="sn_hr_core_nps_score" sys_domain="global" view="Default view">b74126334f2a3300ad404a10a310c743</sys_ui_section><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:54:36</sys_updated_on><sys_user/><type/></sys_ui_element><sys_ui_element action="INSERT_OR_UPDATE"><element>u_rating</element><position>6</position><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:54:36</sys_created_on><sys_id>863362374f2a3300ad404a10a310c7e2</sys_id><sys_mod_count>0</sys_mod_count><sys_ui_formatter/><sys_ui_section caption="NULL" display_value="" name="sn_hr_core_nps_score" sys_domain="global" view="Default view">b74126334f2a3300ad404a10a310c743</sys_ui_section><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:54:36</sys_updated_on><sys_user/><type/></sys_ui_element><sys_ui_element action="INSERT_OR_UPDATE"><element>u_score</element><position>7</position><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:54:36</sys_created_on><sys_id>0a3362374f2a3300ad404a10a310c7e2</sys_id><sys_mod_count>0</sys_mod_count><sys_ui_formatter/><sys_ui_section caption="NULL" display_value="" name="sn_hr_core_nps_score" sys_domain="global" view="Default view">b74126334f2a3300ad404a10a310c743</sys_ui_section><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:54:36</sys_updated_on><sys_user/><type/></sys_ui_element><sys_ui_element action="INSERT_OR_UPDATE"><element>.end_split</element><position>8</position><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:54:36</sys_created_on><sys_id>8a3362374f2a3300ad404a10a310c7e2</sys_id><sys_mod_count>0</sys_mod_count><sys_ui_formatter/><sys_ui_section caption="NULL" display_value="" name="sn_hr_core_nps_score" sys_domain="global" view="Default view">b74126334f2a3300ad404a10a310c743</sys_ui_section><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:54:36</sys_updated_on><sys_user/><type>.end_split</type></sys_ui_element><sys_ui_section action="INSERT_OR_UPDATE"><caption/><header>false</header><name>sn_hr_core_nps_score</name><roles/><sys_class_name>sys_ui_section</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:46:16</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>b74126334f2a3300ad404a10a310c743</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sn_hr_core_nps_score</sys_name><sys_overrides/><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_ui_section_b74126334f2a3300ad404a10a310c743</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:46:16</sys_updated_on><sys_user/><title>true</title><view display_value="Default view" name="NULL">Default view</view><view_name/></sys_ui_section></sys_ui_section></record_update>]]></payload><payload_hash>-1868226754</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>5cdac92fdb2600103dd39235ca961960</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd6c86ca0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>HR NPS Score</target_name><type>Form Layout</type><update_domain>global</update_domain><update_guid>82336237ce2a3300471bc3d6105a4bf1</update_guid><update_guid_history>82336237ce2a3300471bc3d6105a4bf1:-1868226754,845126b3cc2a3300a4f546618048b782:-1988918857,885126330c2a3300521a5ef8f46be245:459137285</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_user_role_c1216a334f2a3300ad404a10a310c71d</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_user_role"><sys_user_role action="INSERT_OR_UPDATE"><assignable_by/><can_delegate>true</can_delegate><description/><elevated_privilege>false</elevated_privilege><encryption_context/><grantable>true</grantable><includes_roles/><name>sn_hr_core.hr_nps_score_user</name><requires_subscription>-1</requires_subscription><scoped_admin>false</scoped_admin><suffix>hr_nps_score_user</suffix><sys_class_name>sys_user_role</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:45:31</sys_created_on><sys_id>c1216a334f2a3300ad404a10a310c71d</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sn_hr_core.hr_nps_score_user</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_user_role_c1216a334f2a3300ad404a10a310c71d</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:45:31</sys_updated_on></sys_user_role></record_update>]]></payload><payload_hash>1880975547</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>68dac92fdb2600103dd39235ca961961</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd6438830000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>sn_hr_core.hr_nps_score_user</target_name><type>Role</type><update_domain>global</update_domain><update_guid>d9216a33522a33002f1220ea51204321</update_guid><update_guid_history>d9216a33522a33002f1220ea51204321:1880975547</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>db_image_0d77e1c44f727300ad404a10a310c757</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="db_image"><db_image action="INSERT_OR_UPDATE"><active>true</active><category>general</category><format>png</format><height>70</height><image>cc87a1c84f727300ad404a10a310c7a0</image><name>sad.png</name><size_bytes>2759</size_bytes><sys_class_name>db_image</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 15:12:06</sys_created_on><sys_id>0d77e1c44f727300ad404a10a310c757</sys_id><sys_mod_count>2</sys_mod_count><sys_name>sad.png</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>db_image_0d77e1c44f727300ad404a10a310c757</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 15:12:10</sys_updated_on><thumbnail/><width>70</width></db_image><sys_attachment action="INSERT_OR_UPDATE"><average_image_color>#ffffff</average_image_color><chunk_size_bytes>734003</chunk_size_bytes><compressed>true</compressed><content_type>image/png</content_type><encryption_context/><file_name>image</file_name><image_height>70</image_height><image_width>70</image_width><size_bytes>2759</size_bytes><size_compressed>2782</size_compressed><state/><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 15:12:10</sys_created_on><sys_id>cc87a1c84f727300ad404a10a310c7a0</sys_id><sys_mod_count>2</sys_mod_count><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 15:12:10</sys_updated_on><table_name>ZZ_YYdb_image</table_name><table_sys_id>0d77e1c44f727300ad404a10a310c757</table_sys_id></sys_attachment><sys_attachment_doc action="INSERT_OR_UPDATE"><data>H4sIAAAAAAAAAA==</data><length>16</length><position>0</position><sys_attachment display_value="image" sys_id="cc87a1c84f727300ad404a10a310c7a0">cc87a1c84f727300ad404a10a310c7a0</sys_attachment><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 15:12:10</sys_created_on><sys_id>0087a1c84f727300ad404a10a310c7a1</sys_id></sys_attachment_doc><sys_attachment_doc action="INSERT_OR_UPDATE"><data>AccKOPWJUE5HDQoaCgAAAA1JSERSAAAARgAAAEYIAwAAAEbwErYAAAL3UExURQAAAAEBAQICAgMDAwQEBAUFBQYGBgcHBwgICAkJCQoKCgsLCw0NDQ4ODg8PDxAQEBERERISEhMTExQUFBUVFRYWFhcXFxgYGBkZGRoaGhsbGxwcHB0dHR4eHh8fHyAgICEhISIiIiMjIyQkJCUlJSYmJicnJygoKCkpKSoqKisrKywsLC0tLS4uLi8vLzAwMDExMTIyMjMzMzQ0NDU1NTY2Njc3Nzg4ODk5OTo6Ojs7Ozw8PD4+Pj8/P0BAQEFBQUJCQkNDQ0REREVFRUZGRkdHR0hISElJSUtLS0xMTE1NTU5OTk9PT1FRUVJSUlRUVFZWVldXV1hYWFlZWVpaWltbW1xcXF1dXV5eXl9fX2BgYGFhYWJiYmNjY2RkZGVkZWVlZWZmZmdnZ2hoaGlpaWpqamtra25ubm9vb3BwcHFxcXJycnNzc3R0dHV1dXd3d3h4eHl5eXp6ent7e3x8fH19fX5+fn9/f4GBgYKCgoODg4SEhIWEhYWFhYaGhoeHh4iIiImJiYqKio2NjY6Ojo+Pj5CQkJGRkZKSkpOTk5SUlJaWlpeXl5iYmJmZmZqampubm5ycnJ2dnZ6enp+fn6CgoKGhoaKioqOjo6SkpKWlpaampqenp6ioqKmpqaqqqqurq6ysrK2tra6urq+vr7CwsLGxsbKysrOzs7S0tLW1tba2tre3t7i4uLm5ubq6uru7u7y8vL29vb6+vr+/v8DAwMHBwcLCwsPDw8TExMXFxcbGxsfHx8jIyMnJycrKysvLy83Nzc7Ozs/Pz9DQ0NHR0dLS0tPT09TU1NXV1dbW1tfX19jY2NnZ2dra2tvb29zc3N3d3d7e3t/f3+Dg4OHh4eLi4uPj4+Tk5OXk5eXl5ebm5ufn5+jo6Onp6erq6uvr6+zs7O3t7e7u7u/v7/Dv8PDw8PHx8fLy8vPz8/T09PX19fb29vf39/j3+Pj4+Pn4+fn5+fr6+vv6+/v7+/z7/Pz8/P38/f39/f79/v7+/v/+/////7H9asEAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wcRDwkzY8+yBAAAACZpVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVAgb24gYSBNYWOV5F9bAAAHJElEQVRYw62Yf1wT9xnHJb/Ijy93udwlXO6SQBISQKWw6myVza1indoWnU7X0rpV7LpN187ODdu6jq5dO1eotairpZb5q1ZXaIuj2yyrQ6xgy1SUnxOYW2UgJNkt2fU4vr0/FhIhyZGEoN5fvLjL+/vcc8/zeT7f7wzhllwz4t7t6WqsOXTo0NsftfXeIMbXfOzJ9XOlQIchGIEokfkbntl/0TdNTNfeRbMNelojUQGgAYgmGeC0MSV3+f6eaWDOPYtLdQ6TXE0sWrdtx44dZT972E6oUrQZhFJW9vcEMU0/MuFYCvLlFRUnWxmW50dHWCgMX6z/1TfzUaPFkFf6aQIY5iWHWq8yFx9p6/d6GR8PIeQ5fgSyw+xg9+EHAWYhsndMieleCwwkeKTuWvQcDNeu1lKEpLg9PqZyngFF1/xxgIv5aa/9fgViQvKOxcM8T2CpWa9/BmMXCPQy/btzKMpRFRvzlFZrXHhhypKFJ1PVTtkzsTBbSVKzutU7JYbnOh+irenl0THP0VnoY9e8cOoO4vh/bQZm50vRMPsApvmxK8FWhN0/wWjdrsmYGhmqWDXEJ9rSsOcJiyWnVoy5VKAyFP+bYxOWBti1MNmwkBdhSrVowUWeh9PQmCb/F3kxEvMnilC97xqr/MTDgTVptOpEBMZuNT09yMDpBOPzst8Hpm8xYZj9amr+ZZaflm5yHH8mx0m/G8L0fsNIlrMwoTeBoT959y8keFEIU6VKy+9KKB9hH8FP5K7MQLRNE5hNJsmvQzILuZGeJ2bdtXtAxBjt3n7n7SUdE2UOoVsoQ9H145jLTlNSWCu52cElahkwbxdhXE/aAMA2/JMLrSd05BLIpeuYAwDbwoUyA4UGCapQSGeJMOdzKYVcYz8RnkP2AQ2y9zqmEMP/GpGBA3KdQqHARZjWPK1UKiNrIyRgj161PohpJazzrkYIwXkZjWmwIhGmvxAjcHLWpxHKeMppK7gSwJwE9IMRvcR6D8sVyq+3ijDeOkQikb4Vqa8dubTj4wBmj0pbIqo8/tybVZ3iOvJ/36qD7aLm/c+yJM3RAOZxnW7npJ9Er5svOPENdpsELQ9gCq3GWnH8UPBFGQ68bxKee1eiLxnDMEuzsloSiiWqLjfKMjaMYVxLs7NbbtjYjDZKTfffPAY2SsnVtwRDrQnm5iYx9NpANMtiYWBCKVZYApiry52O09Ef4Xnmv6yPcQ2zAsf8j4VR5JE7haZvCdTNKsr4dtSFR3yelto9W0tKtj1fVt/mg9Ew/GGQ+lwAs0VBvchHU7rPdi4B8qQZSUlJEpVc8u3XL0SZYtxvZEiwiitTqK1ii8kz7oPr1CgwkTiG6TAdnk4gpON71f3i9YbvA+CdAOY0MBYOiyJhmhenpeoAuOeRn/9216s7Xyl/OBNoCJRc2yGKqH2+eWawwy+gZFa/KNRqh4xSGh6r9/jdX3AqXf3LOoCnaKXHIzmNGbPvDuqNsFEFDvIR/uWtL1k1GdvavXCED00U38cr7VqtrSr8Ubhdl/rodRH9QwpY7go1tI/7KDtdW/Ae4/aHEsJAVhioux0YjOGC61uZpn5/fMDYUqWNYZjuOQ58md+OD3GR821UEM7aMJAzFCqPfo2F6B3HPEXoNw9N3PKUkpo7LvHBQCLHOsefnq3XlrrHwe6tOvDCxLiry7TmfDLxbN+dNLLHE8DASRaDf4NIvaPn+j+/OIOR6uYJjOu+HN3TE5n7EGhuG4TRMZDtWzJ75nh2XBtVxONhjqJGaZ7XMjoavPkGiu30cjGiEVybDMZKdqzhBKGaItM+CPc3K9TK7w6Ou2OQctzLwfFLhHFXKCwvDI3lRehdoZffH2GTzpsx/DUu+JtKlGhl+VgY4QiOvhxIgGe3yqpvivR+r9F25599vrEXc1c3xlOY4d8dHfb5V+QbknHwqshC9i21KPP7BM+of3X+87hK5XUxY7E2LzDZvyN2okITZUNX93rG3mIKP+ovZ//A6n/AYPtq22SX/oEzDXm0j+cS8m6ei6sQHNRE2zMctc8kintGP0/Ej7YspQ2SY9F3MGWYGS8+453SY0O24149ie+NtZ+qdNDErAP+bWocEO8TBsoyaTJpe+zdXV0mYjBsbIvns11M1w8BacpuiLfXrJ9L6uW5e3s5QdzcQZWH/JUKhZ5OXtIcf+fbVWoFlGbZy30M67fhMMISswzTWrHYpNVlbr405Xb+xCplmlVtKa93RQTk7uN7PiwhVU578uJTCR0u7JqTajKD5AW/rD7X8Y8Bt9vtGejrbHjzp19Raqk03ZwjiZ5RdB5YQ+BqlMYy5hasLCoqWld414JsnZ5Ua80P7WufzsHLqYpFyWopeVu2jTYaKYs9h5LJVfm7zk7/GKhp96b8vCy7xWxJt2Xmfe0H+z650dOk3st/a6itPV538mznzRxK3aKzrYSv/wP5qf7MBHAgbwAAAABJRU5ErkJgghVMmqzHCgAA</data><length>3696</length><position>1</position><sys_attachment display_value="image" sys_id="cc87a1c84f727300ad404a10a310c7a0">cc87a1c84f727300ad404a10a310c7a0</sys_attachment><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 15:12:10</sys_created_on><sys_id>8087a1c84f727300ad404a10a310c7a1</sys_id></sys_attachment_doc></record_update>]]></payload><payload_hash>189996033</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>90dac92fdb2600103dd39235ca96193e</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c007da7900000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>sad.png</target_name><type>Images</type><update_domain>global</update_domain><update_guid>c487e1c88e727300a0389802d74406ed</update_guid><update_guid_history>c487e1c88e727300a0389802d74406ed:189996033,c887a1c80c727300b5b8373263ebdda5:55606819,4087a1c88c727300ab000f300ec9b2a4:55606819,4777ad083c727300666e8c432d0e4bae:-1483500113</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sysevent_register_7b9b95553b133200d901655593efc4b5</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sysevent_register"><sysevent_register action="INSERT_OR_UPDATE"><caller_access>1</caller_access><description>HR Approval subflow fires this event when it closes a case incomplete due to rejection</description><event_name>sn_hr_core.closed_incomplete_rejection</event_name><fired_by/><queue/><suffix>closed_incomplete_rejection</suffix><sys_class_name>sysevent_register</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-06-10 23:20:12</sys_created_on><sys_id>7b9b95553b133200d901655593efc4b5</sys_id><sys_mod_count>3</sys_mod_count><sys_name>sn_hr_core.closed_incomplete_rejection</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sysevent_register_7b9b95553b133200d901655593efc4b5</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:35</sys_updated_on><table>sn_hr_core_case</table></sysevent_register></record_update>]]></payload><payload_hash>1449202086</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>90dac92fdb2600103dd39235ca961941</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005795950000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case</table><target_name>sn_hr_core.closed_incomplete_rejection</target_name><type>Event Registration</type><update_domain>global</update_domain><update_guid>c7fd1180fb727300f9ad5ddf98d29d7d</update_guid><update_guid_history>c7fd1180fb727300f9ad5ddf98d29d7d:1449202086,4bfd11800172730020590b77bd23777c:-397599065</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_choice_sn_hr_core_nps_score_u_rating</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update><sys_choice action="INSERT_OR_UPDATE" field="u_rating" table="sn_hr_core_nps_score" version="3"><sys_choice action="INSERT_OR_UPDATE"><dependent_value/><element>u_rating</element><hint/><inactive>false</inactive><label>Detractor</label><language>en</language><name>sn_hr_core_nps_score</name><sequence>0</sequence><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:47:08</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>bc8126b34f2a3300ad404a10a310c790</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:47:08</sys_updated_on><value>-1</value></sys_choice><sys_choice action="INSERT_OR_UPDATE"><dependent_value/><element>u_rating</element><hint/><inactive>false</inactive><label>Passive</label><language>en</language><name>sn_hr_core_nps_score</name><sequence>1</sequence><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:47:08</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>708126b34f2a3300ad404a10a310c792</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:47:08</sys_updated_on><value>0</value></sys_choice><sys_choice action="INSERT_OR_UPDATE"><dependent_value/><element>u_rating</element><hint/><inactive>false</inactive><label>Promoter</label><language>en</language><name>sn_hr_core_nps_score</name><sequence>2</sequence><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:47:08</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>308126b34f2a3300ad404a10a310c793</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:47:08</sys_updated_on><value>1</value></sys_choice><sys_choice_set action="INSERT_OR_UPDATE"><element>u_rating</element><name>sn_hr_core_nps_score</name><sys_class_name>sys_choice_set</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:47:08</sys_created_on><sys_id>388126b34f2a3300ad404a10a310c791</sys_id><sys_mod_count>0</sys_mod_count><sys_name>u_rating</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_choice_sn_hr_core_nps_score_u_rating</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:47:08</sys_updated_on></sys_choice_set></sys_choice></record_update>]]></payload><payload_hash>-2067362732</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>90dac92fdb2600103dd39235ca961944</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd65b2410000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>HR NPS Score.Rating</target_name><type>Choice list</type><update_domain>global</update_domain><update_guid>3c8126b3482a33007ad97707c17e8b94</update_guid><update_guid_history>3c8126b3482a33007ad97707c17e8b94:-2067362732</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_37a82a094f303300ad404a10a310c748</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Operations System</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_op_system</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:42</sys_created_on><sys_id>37a82a094f303300ad404a10a310c748</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Operations System</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_37a82a094f303300ad404a10a310c748</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:11</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>1406154205</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>90dac92fdb2600103dd39235ca961947</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00573a140000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_op_system</table><target_name>HR Operations System</target_name><type>Table</type><update_domain>global</update_domain><update_guid>15ed5d40b2727300c2cd6d6fac56fcd6</update_guid><update_guid_history>15ed5d40b2727300c2cd6d6fac56fcd6:1406154205,dded5d4054727300483cff192febc5d2:1662218206</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_63a8e6094f303300ad404a10a310c7e3</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>Topic Category</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_topic_category</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:42</sys_created_on><sys_id>63a8e6094f303300ad404a10a310c7e3</sys_id><sys_mod_count>3</sys_mod_count><sys_name>Topic Category</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_63a8e6094f303300ad404a10a310c7e3</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:17</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>889531156</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>90dac92fdb2600103dd39235ca96194a</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005750f60000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_topic_category</table><target_name>Topic Category</target_name><type>Table</type><update_domain>global</update_domain><update_guid>7eed9d40167273003d8a7b3895496d78</update_guid><update_guid_history>7eed9d40167273003d8a7b3895496d78:889531156,72ed9d40bf727300134ee93d379d9a69:-196820941</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_9eb8ae094f303300ad404a10a310c72f</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>Bank Account</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_profile_bank_account</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:55</sys_created_on><sys_id>9eb8ae094f303300ad404a10a310c72f</sys_id><sys_mod_count>3</sys_mod_count><sys_name>Bank Account</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_9eb8ae094f303300ad404a10a310c72f</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:22</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-1769819806</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>90dac92fdb2600103dd39235ca96194d</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005764790000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_profile_bank_account</table><target_name>Bank Account</target_name><type>Table</type><update_domain>global</update_domain><update_guid>04fd9d40ab727300f44721cb5c3196cf</update_guid><update_guid_history>04fd9d40ab727300f44721cb5c3196cf:-1769819806,ffed9d4055727300b05d1d944671d6cb:-2077132095</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_eab8ae094f303300ad404a10a310c79a</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>Job Profile</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_job_profile</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:53</sys_created_on><sys_id>eab8ae094f303300ad404a10a310c79a</sys_id><sys_mod_count>3</sys_mod_count><sys_name>Job Profile</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_eab8ae094f303300ad404a10a310c79a</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:28</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>1816497607</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>90dac92fdb2600103dd39235ca961950</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00577a590000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_job_profile</table><target_name>Job Profile</target_name><type>Table</type><update_domain>global</update_domain><update_guid>11fddd40f87273008f37e1d0575e0986</update_guid><update_guid_history>11fddd40f87273008f37e1d0575e0986:1816497607,d9fddd40c87273003d8d1ed584843982:-518592056</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_documentation_sn_hr_core_case_asc__en</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update><sys_documentation element="" label="ASC" language="en" table="sn_hr_core_case_asc"><sys_documentation action="INSERT_OR_UPDATE"><element/><help/><hint/><label>ASC</label><language>en</language><name>sn_hr_core_case_asc</name><plural>ASCs</plural><sys_class_name>sys_documentation</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-08-27 19:19:48</sys_created_on><sys_id>c359e1514f633300ad404a10a310c71b</sys_id><sys_mod_count>0</sys_mod_count><sys_name>ASC</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_documentation_sn_hr_core_case_asc__en</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-08-27 19:19:48</sys_updated_on><url/><url_target/></sys_documentation></sys_documentation></record_update>]]></payload><payload_hash>-2002508068</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>90dac92fdb2600103dd39235ca961953</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16cd4851a490000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case_asc</table><target_name>ASC</target_name><type>Field Label</type><update_domain>global</update_domain><update_guid>8f59e151c8633300835b4ca03424fc24</update_guid><update_guid_history>8f59e151c8633300835b4ca03424fc24:-2002508068</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_restricted_caller_access_8341ad044f727300ad404a10a310c72e</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_restricted_caller_access"><sys_restricted_caller_access action="INSERT_OR_UPDATE"><operation>read</operation><source>c624de10eb1121003623666cd206fec0</source><source_scope display_value="Global">global</source_scope><source_table>sys_script_include</source_table><source_type>2</source_type><status>2</status><sys_class_name>sys_restricted_caller_access</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 14:45:03</sys_created_on><sys_id>8341ad044f727300ad404a10a310c72e</sys_id><sys_mod_count>0</sys_mod_count><sys_name>global</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_restricted_caller_access_8341ad044f727300ad404a10a310c72e</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:45:03</sys_updated_on><target name="sn_hr_core_case_workforce_admin" target_table="sys_db_object">65b82e094f303300ad404a10a310c726</target><target_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</target_scope><target_table>sys_db_object</target_table><target_type>1</target_type></sys_restricted_caller_access></record_update>]]></payload><payload_hash>1348991626</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>90dac92fdb2600103dd39235ca961956</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0064d4ed0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>global</target_name><type>Restricted Caller Access Privilege</type><update_domain>global</update_domain><update_guid>0f41ad04cd7273000173a21f4023982e</update_guid><update_guid_history>0f41ad04cd7273000173a21f4023982e:1348991626</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_42553dd33b0322005a10695593efc420</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;public&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;sn_hr_core.hr_ServiceConfigUtil&lt;/api_name&gt;&lt;caller_access&gt;1&lt;/caller_access&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;description/&gt;&lt;name&gt;hr_ServiceConfigUtil&lt;/name&gt;&lt;script&gt;&lt;![CDATA[/* NOTE: All methods in this script include were added in Jakarta and deprecated in Kingston
 *       they are only here for backwards compatibility, and should not be referenced in new code
 */
var hr_ServiceConfigUtil = Class.create();
hr_ServiceConfigUtil.prototype = {
    initialize: function() {
    },
	
	getInitInfo: function(sysId, mainTable, templateTable) {
		var initInfo = {};
		var grMain = new GlideRecord(mainTable);
		if(grMain.get(sysId)){
			initInfo.hrServiceName = gs.nil(grMain.name)? '' : grMain.name.toString();
			initInfo.hrServiceValue = gs.nil(grMain.value)? '' :grMain.value.toString();
			initInfo.active = gs.nil(grMain.active)? '' :grMain.active.toString();
			initInfo.topicDetailValue = gs.nil(grMain.topic_detail)? '' :grMain.topic_detail.toString();
			initInfo.topicDetailName = gs.nil(grMain.topic_detail.getDisplayValue())? '' :grMain.topic_detail.getDisplayValue().toString();
			initInfo.description = gs.nil(grMain.description)? '' :grMain.description.toString();
			initInfo.recordProducer = {value:'', name:''};
			initInfo.recordProducer.value = gs.nil(grMain.getValue('producer'))? '' :grMain.getValue('producer').toString();
			initInfo.recordProducer.name = gs.nil(grMain.getDisplayValue('producer'))? '' :grMain.getDisplayValue('producer').toString();
			initInfo.instructions = gs.nil(grMain.fulfillment_instructions)? '' :grMain.fulfillment_instructions.toString();
			initInfo.hrCaseOptions = {};
			initInfo.hrCaseOptions.valueList = gs.nil(grMain.getValue('case_options'))? '' :grMain.getValue('case_options').toString();
			initInfo.hrCaseOptions.nameList = gs.nil(grMain.getDisplayValue('case_options'))? '' :grMain.getDisplayValue('case_options').toString();
			initInfo.relRelatedLists = {availableData: [], selectedData: []};
			initInfo.relRelatedLists.selectedData = this._getSelectedRelatedLists(grMain.getValue('subject_person_related_lists'), grMain.getDisplayValue('subject_person_related_lists'));
			initInfo.relRelatedLists.availableData = this._getAvailableRelatedLists();
		}
		return initInfo;
	},
	
	saveHRService: function(jsonData, sysid) {
		var res = {result: true};
		var grHrService = new GlideRecord('sn_hr_core_service');
		var fieldsCount = jsonData.hrService.length;
		if(grHrService.get(sysid)){
			for(var i =0; i&lt;fieldsCount;i++){
				var nm = jsonData.hrService[i].field;
				grHrService.setValue(nm, jsonData.hrService[i].value);
			}
			res.result = grHrService.update();
		}
		return res;
	},

	getTopicInfo: function(topicDetail, hrCOE) {
		var exlusionFieldsList = [
			'sys_updated_on',
			'sys_created_by',
			'sys_domain_path',
			'sys_class_name',
			'sys_updated_by',
			'sys_created_on',
			'sys_domain',
			'sys_id',
			'sys_mod_count',
			'sys_tags'
		];
		
		var topicInfo = {
			coe: '',
			topicCatDisplayValue: '',
			topicCatValue: '',
			availableData: [],
			templateFields: []
		};
		var jsonParser = new global.JSON();
		
		var grTopic = new GlideRecord('sn_hr_core_topic_detail');
		grTopic.addQuery('sys_id',topicDetail);
		grTopic.query();
		
		if(grTopic.next()){
			var coe = grTopic.topic_category.coe.toString();
			topicInfo.coe = coe;
			topicInfo.topicCatDisplayValue= grTopic.topic_category.name.toString();
			topicInfo.topicCatValue = grTopic.topic_category.toString();
			
			var grDictionary = new GlideRecord(coe);
			grDictionary.setLimit(1);
			grDictionary.query();
			
			var grElements = grDictionary.getElements();
			var elementsLength = grElements.length;
			
			for(var i = 0; i &lt; elementsLength; i++){
				var qualifier = '';
				var elementName = grElements[i].getLabel().toString();
				var elementValue = grElements[i].getName().toString();
				var elementTable = grElements[i].getED().getTableName().toString();
				
				var templateField = {};
				if (grElements[i].getED().getInternalType().toString() == "reference" || grElements[i].getED().getInternalType().toString() == "glide_list") {
					var refDetails = this._getReferenceDetails(elementValue, elementTable, coe);
					templateField.reference = refDetails.reference;
					templateField.qualifier = refDetails.qualifier;
				}
				if (grElements[i].getED().getInternalType().toString() != "variables" &amp;&amp; (elementValue.indexOf("sys_") &lt; 0)){
					topicInfo.availableData.push({name:elementName, value:elementValue});
					templateField.display = grElements[i].getLabel().toString();
					templateField.name = grElements[i].getName().toString();
					templateField.type = grElements[i].getED().getInternalType().toString();
					templateField.table = coe;
					templateField.choiceInteger = this._getChoiceInteger(elementValue, elementTable);
					templateField.isChoice = grElements[i].getED().isChoiceTable().toString();
					templateField.value = '';
					topicInfo.templateFields.push(templateField);
				}
				
			}	
		} else {
			topicInfo.coe = 'Not found';
			topicInfo.topicCatDisplayValue = 'Not found';
			topicInfo.topicCatValue = 'Not found';
			topicInfo.availableData = [];
			topicInfo.templateFields = [];
		}
		return topicInfo;	
	},
	
	getCOEList: function() {
		var coeList = {
			coes: [{
					name: 'HR Case [sn_hr_core_case]',
					value: 'sn_hr_core_case'
				}]
		};		
		var grDBObject = new GlideRecord('sys_db_object');
		grDBObject.addQuery('super_class.name','sn_hr_core_case');
		grDBObject.query();
		
		while(grDBObject.next()){
			coeList.coes.push({name:grDBObject.label.toString() + ' [' + grDBObject.name.toString() + ']', value: grDBObject.name.toString()});
		}
		return coeList;
	},
	
	getActiveCOEList: function() {
		var activeCOEList = [
			{
				name: 'HR Case',
				value: 'sn_hr_core_case'
			}
		];		
		var grDBObject = new GlideRecord('sys_db_object');
		grDBObject.addQuery('super_class.name','sn_hr_core_case');
		grDBObject.query();
		
		while(grDBObject.next()){
			if(this._activeCOE(grDBObject.name))
				activeCOEList.push({name:grDBObject.label.toString(), value: grDBObject.name.toString()});
		}
		return activeCOEList;
	},
	
	/* An Active COE is either a customer/unlicensed COE which does not appear in the license 
	 * COE license configuration table or one that is licensed and has a COE table:active = true
	 */
	_activeCOE: function(coeTable) {
		var grCOEConfig = new GlideRecord('sn_hr_core_coe_config_matching');
		if(grCOEConfig.get('table', coeTable)) {
			var grCOE = new GlideRecord('sn_hr_core_coe');
			if(grCOE.get(grCOEConfig.coe))
				return grCOE.active;
		}
		return true;
	},
	
	getTemplatePriority: function() {
		var templatePriority = {
			priorityList: []
		};
		
		var grPriority = new GlideRecord('sys_choice');
		grPriority.addQuery('name', 'task');
		grPriority.addQuery('element', 'priority');
		grPriority.query();
		
		while(grPriority.next()) 
			templatePriority.priorityList.push({name: grPriority.label.toString(), value: grPriority.value.toString()});

		return templatePriority;
	},
	
	getChoiceList: function(choiceTable, choiceField) {
		var jsonChoiceList = {
			choiceList: []
		};
		var choices = new GlideChoiceList.getChoiceList(choiceTable, choiceField);
		var numChoices = choices.getSize();
		for(var i = 0; i &lt; numChoices; i++)
			jsonChoiceList.choiceList.push({label: choices.getChoice(i).getLabel(), value: choices.getChoice(i).getValue()});
		
		return jsonChoiceList;
	},
	
	buildTemplateList: function(listTable) {
		var jsonTemplateList = {
			availableData: []
		};
		var grDictionary = new GlideRecord(listTable);
		grDictionary.setLimit(1);
		grDictionary.query();
			
		var grElements = grDictionary.getElements();
		var elementsLength = grElements.length;
			
		for(var i = 0; i &lt; elementsLength; i++){
			var elementName = grElements[i].getLabel().toString();
			var elementValue = grElements[i].getName().toString();
			
			jsonTemplateList.availableData.push({name: elementName, value: elementValue});
		}
		return jsonTemplateList;
	},
	
	_getChoiceInteger: function(field, tablename) {
		var choiceInteger = '';
		
		var grDictionary = new GlideRecord('sys_dictionary');
		grDictionary.addQuery('element', field);
		grDictionary.addQuery('name', tablename);
		grDictionary.query();
		
		if(grDictionary.next())
			choiceInteger = grDictionary.choice.toString();
		
		return choiceInteger;		
	},
	
	_getReferenceDetails: function(field, tablename, coe) {
		var refDetails = {};
		var qualifier = '';
		
		if(tablename != coe){
			var grOverride = new GlideRecord('sys_dictionary_override');
			grOverride.addQuery('element', field);
			grOverride.addQuery('name', coe);
			grOverride.addQuery('reference_qual_override', true);
			grOverride.query();
			
			if(grOverride.next())
				qualifier = grOverride.reference_qual.toString();
		} 
		var grReference = new GlideRecord('sys_dictionary');
		grReference.addQuery('name', tablename);
		grReference.addQuery('element', field);
		grReference.query();
		
		if(grReference.next()){
			refDetails.reference = grReference.reference.toString();
			if(refDetails.use_reference_qualifier == 'dynamic')
				refDetails.qualifier = qualifier?qualifier:grReference.dynamic_ref_qual.toString();
			else
				refDetails.qualifier = qualifier?qualifier:grReference.reference_qual.toString();
		}
		
		return refDetails;
	},
	
	_getSelectedRelatedLists: function(valueList, nameList) {
		var selectedResult = [];
			var valArray = gs.nil(valueList)? [] : valueList.split(',');
			var nameArray = gs.nil(nameList)? [] : nameList.split(',');

			for(var i=0; i&lt;valArray.length; i++) {
				selectedResult.push({name: nameArray[i], value: valArray[i]});
			}
		return selectedResult;
	},
	
	_getAvailableRelatedLists: function() {
		var refQual = new hr_ServicesUtil().getProfileSubjectFilter();
		var grRelations = new GlideRecord('sys_relationship');
		grRelations.addEncodedQuery(refQual);
		grRelations.query();
		
		var availableResult = [];
		
		while(grRelations.next()){
			availableResult.push({name: grRelations.name.toString(), value:grRelations.sys_id.toString()});
		}
		return availableResult;
	},
	
	setDefaultsForService: function() {
		var ONBOARDING_SERVICE_SYSID = '64fa4c53534222003066a5f4a11c0875';
		var ONBOARDING_OPENEDFOR_CONFIG_SYSID = 'e7ed4f5453700300eb7c0a1806dc34f7';
		var ONBOARDING_SUBJECT_PERSON_CONFIG_SYSID = 'dcfa279853700300eb7c0a1806dc34a6';
		var onBoardingServiceGr = new GlideRecord('sn_hr_core_service');
		if (onBoardingServiceGr.get(ONBOARDING_SERVICE_SYSID)) {
			if (gs.nil(onBoardingServiceGr.header_config_opened_for)) 
			   onBoardingServiceGr.setValue('header_config_opened_for', ONBOARDING_OPENEDFOR_CONFIG_SYSID);

			if (gs.nil(onBoardingServiceGr.header_config_subject_person)) 
			   onBoardingServiceGr.setValue('header_config_subject_person', ONBOARDING_SUBJECT_PERSON_CONFIG_SYSID);
			onBoardingServiceGr.update();
		}


		var OPENED_FOR_CONFIG_SYSID = '86d9872eb3900300f5302ddc16a8dc8b'; //default Opened for Config
		var SUBJECT_PERSON_CONFIG_SYSID = 'c4e9872eb3900300f5302ddc16a8dc91'; //default Subject Person	
		var hrService = new GlideRecord('sn_hr_core_service');
		var queryStr = "header_config_opened_for=NULL^ORheader_config_subject_person=NULL";
		hrService.addEncodedQuery(queryStr);
		hrService.query();
		while (hrService.next()) {
		   if (gs.nil(hrService.header_config_opened_for))
			   hrService.setValue('header_config_opened_for', OPENED_FOR_CONFIG_SYSID);

		   if (gs.nil(hrService.header_config_subject_person))
			   hrService.setValue('header_config_subject_person', SUBJECT_PERSON_CONFIG_SYSID);

		   hrService.update();	
		}
	},
    type: 'hr_ServiceConfigUtil'
};]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2016-11-17 23:55:03&lt;/sys_created_on&gt;&lt;sys_id&gt;42553dd33b0322005a10695593efc420&lt;/sys_id&gt;&lt;sys_mod_count&gt;177&lt;/sys_mod_count&gt;&lt;sys_name&gt;hr_ServiceConfigUtil&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_42553dd33b0322005a10695593efc420&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 14:30:31&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload><payload_hash>-1878278493</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>90dac92fdb2600103dd39235ca961959</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005787790000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_ServiceConfigUtil</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>cafddd4047727300abaa9d5ab47e5fe7</update_guid><update_guid_history>cafddd4047727300abaa9d5ab47e5fe7:-1878278493,06fddd4031727300efb679eb6a695de5:383103554</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_e0d7bdf79f031200d9011977677fcf15</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;
  &lt;sys_script_include action="INSERT_OR_UPDATE"&gt;
    &lt;access&gt;public&lt;/access&gt;
    &lt;active&gt;true&lt;/active&gt;
    &lt;api_name&gt;sn_hr_core.hr_ServicesUtil&lt;/api_name&gt;
    &lt;caller_access&gt;2&lt;/caller_access&gt;
    &lt;client_callable&gt;false&lt;/client_callable&gt;
    &lt;description&gt;Utilities for creating HR Cases from an HR Service&lt;/description&gt;
    &lt;name&gt;hr_ServicesUtil&lt;/name&gt;
    &lt;script&gt;&lt;![CDATA[var hr_ServicesUtil = Class.create();
hr_ServicesUtil.prototype = {
    initialize : function(_case, _gs) {
		if (!_case)
		    return;

	    this._case = _case;
	    this._gs = _gs || gs;
		this._hrCaseUtils = new sn_hr_core.hr_CaseUtils(this._case, this._gs);
    },
	
	/*
	* Return the HR Service sys_id for a given value
	* @param rpId The record producer that invoked this
	*/
	getServiceSysIdByProducerId : function(rpId) {
		var serviceGr = new GlideRecord("sn_hr_core_service");
		serviceGr.addActiveQuery();
		serviceGr.addQuery('producer', rpId);
		serviceGr.query();
		if (serviceGr.next())
			return serviceGr.getUniqueValue();
		return null;
	},
	
	/*
	* Create case from producer and a service
	* @param producer Structure passed by RP that holds questions and answers from RP
	* @param rpId     The record producer that invoked this
	*/
	createCaseFromProducer : function(producer, rpId) {
		var serviceSysId = this.getServiceSysIdByProducerId(rpId);
		if (serviceSysId) {
			this.createCaseFromProducerByService(producer, serviceSysId, rpId);
		}
		
		if (!gs.isMobile() &amp;&amp; !new global.HRSecurityUtils().isTablet()) {
			var page = GlidePluginManager.isActive('com.sn_hr_service_portal') ? 'hrm_ticket_page' : 'hrsp_ticket';
			producer.portal_redirect = '?id=' + page + '&amp;sys_id=' + this._case.sys_id + '&amp;table=' + this._case.sys_class_name;
		}
	},

	/*
     * Fills in a HR Case with service and question fields. This is entry point for RP 
	 * driven case updates.  Lookup is done by service sys_id.
	 *
	 * @param producer structure passed by RP that holds questions and answers from RP
	 * @param service  sys_id of service being used (see sn_hr_core_service)
     */
	createCaseFromProducerByService : function(producer, service, rpId) {
		
		// Convert the producer to a question list object
	    var questions = this._getProducerQuestions(producer, rpId);

		// Set the proper HR Case fields 
		this.updateCase(service, questions, 'self_service');
		
	    // Set the redirect for the producer back to Case list
	    producer.redirect = 'sn_hr_core_case_list.do?sysparm_query=active%3Dtrue^opened_byDYNAMIC90d1921e5f510100a9ad2572f2b477fe^ORDERBYDESCnumber&amp;sysparm_titleless=true';
	},

		
	/*
     * Fills in a HR Case with service and question fields. This is entry point for scripted 
	 * (i.e. non-RP) case updates.
	 *
	 * @param service sys_id of service being used (see sn_hr_core_service)
	 * @param questions a map of the questions and answer values
     */
	updateCase : function(service, questions, source) {
		// Set the proper HR Case fields 
		this._hrCaseUtils.populateCase(service, questions, source);
	},	
	
	/*
     * Retrieves all the variables in question form and values from the record producer instance
	 *
	 * @param producer object that holds the questions/answers from user input on an RP
	 * @Returns a map of the questions and values
     */
    _getProducerQuestions : function(producer, rpId) {
		var relevantVariables = new global.HRSecurityUtils().getRelevantVariablesForCatItem(rpId);
		var questions = [];
		for (var i = 0; i &lt; relevantVariables.length; i++) {
			var variable = relevantVariables[i];
	        if (variable.type == 'sc_multi_row') {
	            var variableSet = new sn_sc.CatItem(rpId).getVariableSet();
	            var variableSetMap = this._getVariableFromVariableSetForCatItem(variableSet);
	            var multiVarArray = JSON.parse(producer[variable.name]);
	            for (var j = 0; j &lt; multiVarArray.length; j++) {
	                var dataObj = multiVarArray[j];
	                for (var key in dataObj)
	                    if (dataObj.hasOwnProperty(key)) {
	                        var displayValue = this._getDisplayValue(variableSetMap[key], dataObj[key]);
	                        questions.push(this._hrCaseUtils.getQuestion(variableSetMap[key]['label'], key, dataObj[key], dataObj[key], '', displayValue));
	                    }
	            }
				continue;
	        }
			var producerValue = producer['IO' + variable.id];
			if (producerValue) {
				var answer = this._getDisplayValue(variable, producerValue);
				var displayValue = this._getDisplayValue(variable, producerValue, producerValue.getDisplayValue());

				questions.push(this._hrCaseUtils.getQuestion(variable.label, variable.name, answer, producerValue, '', displayValue));
			}
		}
		
	    return questions;
    },
	
	_getVariableFromVariableSetForCatItem: function(variableSetId) {
	    var variablesNames = {};
	    var variable = {};
	    var gr = new GlideRecord("item_option_new");
	    gr.addQuery("variable_set", variableSetId);
	    gr.addQuery('type', 'NOT IN', '19, 20, 24'); // Container start, end and split
	    gr.query();
	    while (gr.next()) {
	        variable = {};
	        variable['label'] = gr.getValue('question_text');
	        variable['reference'] = gr.getValue('reference');
	        variablesNames[gr.getValue('name')] = variable;
	    }
	    return variablesNames;
	},
	/*
     * Gets display value for passed in variable
     *
     * @param variable The variable whose value is wanted
     * @param defaultAnswer The value to return if a display value could not be found
     * @return The value to display for the passed in variable
     */
    _getDisplayValue : function(variable, defaultAnswer, defaultDisplayValue) {
	    var value = defaultDisplayValue ? defaultDisplayValue : defaultAnswer;

	    var tableName = variable.reference;
	    if (!tableName)
		    return value;

	    var record = new GlideRecord(tableName);
	    return (record.get(defaultAnswer)) ? record.getDisplayValue() : value;
    },
	
	getProfileSubjectFilter: function() {
 		var refQual = "basic_apply_to=sn_hr_core_case";
 		
 		var tableList = new GlideTableHierarchy("sn_hr_core_benefit").getAllExtensions();
 		tableList = tableList.concat(new GlideTableHierarchy("sn_hr_core_beneficiary").getAllExtensions());
 		tableList = tableList.concat(new GlideTableHierarchy("sn_hr_core_direct_deposit").getAllExtensions());
 		tableList = tableList.concat(new GlideTableHierarchy("sn_hr_core_tuition_reimbursement").getAllExtensions());

 		if (tableList)
 			refQual += "^basic_query_fromIN" + tableList;
 			
 		return refQual;
	},
	
    type: 'hr_ServicesUtil'
};]]&gt;&lt;/script&gt;
    &lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;
    &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
    &lt;sys_created_on&gt;2016-05-04 17:09:59&lt;/sys_created_on&gt;
    &lt;sys_id&gt;e0d7bdf79f031200d9011977677fcf15&lt;/sys_id&gt;
    &lt;sys_mod_count&gt;190&lt;/sys_mod_count&gt;
    &lt;sys_name&gt;hr_ServicesUtil&lt;/sys_name&gt;
    &lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;
    &lt;sys_policy/&gt;
    &lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;
    &lt;sys_update_name&gt;sys_script_include_e0d7bdf79f031200d9011977677fcf15&lt;/sys_update_name&gt;
    &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
    &lt;sys_updated_on&gt;2019-09-14 15:50:11&lt;/sys_updated_on&gt;
  &lt;/sys_script_include&gt;
&lt;/record_update&gt;</payload><payload_hash>808039681</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>true</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>90dac92fdb2600103dd39235ca96195c</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005790f10000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_ServicesUtil</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>3b66092bca260010f69ef918c51e9690</update_guid><update_guid_history>3b66092bca260010f69ef918c51e9690:808039681,3efd1180817273000ba607a21bb3843f:833054949,76fd1180057273009da9002f1e0b8f3d:1806622340</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_security_acl_role_a12162b34f2a3300ad404a10a310c764</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl_role"><sys_security_acl_role action="INSERT_OR_UPDATE"><sys_class_name>sys_security_acl_role</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:45:33</sys_created_on><sys_id>a12162b34f2a3300ad404a10a310c764</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sn_hr_core_nps_score.sn_hr_core.hr_nps_score_user</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_security_acl display_value="sn_hr_core_nps_score">252162b34f2a3300ad404a10a310c753</sys_security_acl><sys_update_name>sys_security_acl_role_a12162b34f2a3300ad404a10a310c764</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:45:33</sys_updated_on><sys_user_role display_value="sn_hr_core.hr_nps_score_user" name="sn_hr_core.hr_nps_score_user">c1216a334f2a3300ad404a10a310c71d</sys_user_role><transaction_id/></sys_security_acl_role></record_update>]]></payload><payload_hash>-1147288916</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>90dac92fdb2600103dd39235ca96195f</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd643ff30000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>sn_hr_core_nps_score.sn_hr_core.hr_nps_score_user</target_name><type>Access Roles</type><update_domain>global</update_domain><update_guid>a12162b3602a330033350d4dbd45e268</update_guid><update_guid_history>a12162b3602a330033350d4dbd45e268:-1147288916</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>asmt_metric_definition_a11222f34f2a3300ad404a10a310c7f8</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="asmt_metric_definition"><asmt_metric_definition action="INSERT_OR_UPDATE"><display>5</display><metric display_value="">50e1aeb34f2a3300ad404a10a310c764</metric><order>5</order><selected_image/><sys_class_name>asmt_metric_definition</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:49:39</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>a11222f34f2a3300ad404a10a310c7f8</sys_id><sys_mod_count>0</sys_mod_count><sys_name>5</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>asmt_metric_definition_a11222f34f2a3300ad404a10a310c7f8</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:49:39</sys_updated_on><unselected_image/><value>5</value></asmt_metric_definition><sys_translated_text action="delete_multiple" query="documentkey=a11222f34f2a3300ad404a10a310c7f8"/></record_update>]]></payload><payload_hash>570881529</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>94dac92fdb2600103dd39235ca96193d</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd67fee70000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>5</target_name><type>Assessment Metric Definition</type><update_domain>global</update_domain><update_guid>a11222f3e52a3300c41e03f34615eff9</update_guid><update_guid_history>a11222f3e52a3300c41e03f34615eff9:570881529</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sysevent_register_365370019f22120047a2d126c42e7065</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sysevent_register"><sysevent_register action="INSERT_OR_UPDATE"><caller_access>1</caller_access><description>Task is closed and parent case is not resumed as one or more tasks are pending.</description><event_name>sn_hr_core_task.closed</event_name><fired_by>Task is closed complete</fired_by><queue/><suffix/><sys_class_name>sysevent_register</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2015-04-23 00:12:14</sys_created_on><sys_id>365370019f22120047a2d126c42e7065</sys_id><sys_mod_count>4</sys_mod_count><sys_name>sn_hr_core_task.closed</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sysevent_register_365370019f22120047a2d126c42e7065</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:35</sys_updated_on><table>sn_hr_core_task</table></sysevent_register></record_update>]]></payload><payload_hash>-1227248067</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>94dac92fdb2600103dd39235ca961940</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005794950000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_task</table><target_name>sn_hr_core_task.closed</target_name><type>Event Registration</type><update_domain>global</update_domain><update_guid>03fd11801b72730085ed49683dd47a68</update_guid><update_guid_history>03fd11801b72730085ed49683dd47a68:-1227248067,83fd11808172730030397997462b8e67:-1456535524</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sysevent_register_fa60d3a353b003003585c3c606dc3487</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sysevent_register"><sysevent_register action="INSERT_OR_UPDATE"><caller_access>1</caller_access><description>Request closure of an HR Case asynchronously, to avoid cleanup issues</description><event_name>sn_hr_core.case_cleanup</event_name><fired_by>Workflow</fired_by><queue/><suffix>case_cleanup</suffix><sys_class_name>sysevent_register</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-08-31 21:11:56</sys_created_on><sys_id>fa60d3a353b003003585c3c606dc3487</sys_id><sys_mod_count>3</sys_mod_count><sys_name>sn_hr_core.case_cleanup</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sysevent_register_fa60d3a353b003003585c3c606dc3487</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:36</sys_updated_on><table>sn_hr_core_case</table></sysevent_register></record_update>]]></payload><payload_hash>-698016627</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>94dac92fdb2600103dd39235ca961943</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005798580000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case</table><target_name>sn_hr_core.case_cleanup</target_name><type>Event Registration</type><update_domain>global</update_domain><update_guid>d7fd1180ac72730037743669de2a5198</update_guid><update_guid_history>d7fd1180ac72730037743669de2a5198:-698016627,5bfd118015727300e80c4d47f8237997:1798711054</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_2ba8e6094f303300ad404a10a310c718</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Insurance Benefit</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_insurance_benefit</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="HR Benefit" name="sn_hr_core_benefit">9ca8eec54f303300ad404a10a310c7c0</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:41</sys_created_on><sys_id>2ba8e6094f303300ad404a10a310c718</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Insurance Benefit</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_2ba8e6094f303300ad404a10a310c718</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:10</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-1800224861</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>94dac92fdb2600103dd39235ca961946</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005734d20000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_insurance_benefit</table><target_name>HR Insurance Benefit</target_name><type>Table</type><update_domain>global</update_domain><update_guid>c1ed5d406a7273006b2031de0f9187b6</update_guid><update_guid_history>c1ed5d406a7273006b2031de0f9187b6:-1800224861,78ed5d40b0727300b3cc25010e0a29b2:1084776548</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_5aa826094f303300ad404a10a310c751</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HRIT Operations Case</label><live_feed_enabled>true</live_feed_enabled><name>sn_hr_core_case_operations</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="HR Case" name="sn_hr_core_case">26986ec54f303300ad404a10a310c747</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-09-21 07:47:24</sys_created_on><sys_id>5aa826094f303300ad404a10a310c751</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HRIT Operations Case</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_5aa826094f303300ad404a10a310c751</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:16</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-87839306</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>94dac92fdb2600103dd39235ca961949</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00574bfd0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case_operations</table><target_name>HRIT Operations Case</target_name><type>Table</type><update_domain>global</update_domain><update_guid>daed9d4001727300ef58c55f15b72425</update_guid><update_guid_history>daed9d4001727300ef58c55f15b72425:-87839306,deed9d401f72730000f5461f47064321:911146965</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_8da862094f303300ad404a10a310c746</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Tier Escalation</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_tier_definition</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:34</sys_created_on><sys_id>8da862094f303300ad404a10a310c746</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Tier Escalation</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_8da862094f303300ad404a10a310c746</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:21</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-1769853990</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>94dac92fdb2600103dd39235ca96194c</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00575eff0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_tier_definition</table><target_name>HR Tier Escalation</target_name><type>Table</type><update_domain>global</update_domain><update_guid>6bed9d40a57273000b23c0461b9442b4</update_guid><update_guid_history>6bed9d40a57273000b23c0461b9442b4:-1769853990,27ed9d406e727300bd573f821cc706b1:-505484901</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_dda8a2094f303300ad404a10a310c718</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Operations Report</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_op_report</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:35</sys_created_on><sys_id>dda8a2094f303300ad404a10a310c718</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Operations Report</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_dda8a2094f303300ad404a10a310c718</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:27</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-729452626</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>94dac92fdb2600103dd39235ca96194f</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0057757f0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_op_report</table><target_name>HR Operations Report</target_name><type>Table</type><update_domain>global</update_domain><update_guid>0dfddd40d872730092dd5d0e90fedb63</update_guid><update_guid_history>0dfddd40d872730092dd5d0e90fedb63:-729452626,c5fddd407e7273005c15acd33c3f6a60:-473388625</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_dictionary_sn_hr_core_nps_score_u_employee</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update&gt;&lt;sys_dictionary action="INSERT_OR_UPDATE" element="u_employee" table="sn_hr_core_nps_score"&gt;&lt;active&gt;true&lt;/active&gt;&lt;array&gt;false&lt;/array&gt;&lt;array_denormalized&gt;false&lt;/array_denormalized&gt;&lt;attributes/&gt;&lt;audit&gt;false&lt;/audit&gt;&lt;calculation&gt;&lt;![CDATA[(function calculatedFieldValue(current) {

	// Add your code here
	return '';  // return the calculated value

})(current);]]&gt;&lt;/calculation&gt;&lt;choice/&gt;&lt;choice_field/&gt;&lt;choice_table/&gt;&lt;column_label&gt;Employee&lt;/column_label&gt;&lt;comments/&gt;&lt;create_roles/&gt;&lt;default_value/&gt;&lt;defaultsort/&gt;&lt;delete_roles/&gt;&lt;dependent/&gt;&lt;dependent_on_field/&gt;&lt;display&gt;false&lt;/display&gt;&lt;dynamic_creation&gt;false&lt;/dynamic_creation&gt;&lt;dynamic_creation_script/&gt;&lt;dynamic_default_value/&gt;&lt;dynamic_ref_qual/&gt;&lt;element&gt;u_employee&lt;/element&gt;&lt;element_reference&gt;false&lt;/element_reference&gt;&lt;foreign_database/&gt;&lt;function_definition/&gt;&lt;function_field&gt;false&lt;/function_field&gt;&lt;internal_type display_value="Reference"&gt;reference&lt;/internal_type&gt;&lt;mandatory&gt;false&lt;/mandatory&gt;&lt;max_length&gt;32&lt;/max_length&gt;&lt;name&gt;sn_hr_core_nps_score&lt;/name&gt;&lt;next_element/&gt;&lt;primary&gt;false&lt;/primary&gt;&lt;read_only&gt;false&lt;/read_only&gt;&lt;read_roles/&gt;&lt;reference display_value="" name="sys_user"&gt;sys_user&lt;/reference&gt;&lt;reference_cascade_rule/&gt;&lt;reference_floats&gt;false&lt;/reference_floats&gt;&lt;reference_key/&gt;&lt;reference_qual/&gt;&lt;reference_qual_condition/&gt;&lt;reference_type/&gt;&lt;sizeclass/&gt;&lt;spell_check&gt;false&lt;/spell_check&gt;&lt;staged&gt;false&lt;/staged&gt;&lt;sys_class_name&gt;sys_dictionary&lt;/sys_class_name&gt;&lt;sys_created_by&gt;tim_deniston&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2019-07-17 00:45:32&lt;/sys_created_on&gt;&lt;sys_id&gt;ea80aa734f2a3300ad404a10a310c725&lt;/sys_id&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_name&gt;Employee&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_dictionary_sn_hr_core_nps_score_u_employee&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 00:45:32&lt;/sys_updated_on&gt;&lt;table_reference&gt;false&lt;/table_reference&gt;&lt;text_index&gt;false&lt;/text_index&gt;&lt;unique&gt;false&lt;/unique&gt;&lt;use_dependent_field&gt;false&lt;/use_dependent_field&gt;&lt;use_dynamic_default&gt;false&lt;/use_dynamic_default&gt;&lt;use_reference_qualifier&gt;simple&lt;/use_reference_qualifier&gt;&lt;virtual&gt;false&lt;/virtual&gt;&lt;widget/&gt;&lt;write_roles/&gt;&lt;xml_view&gt;false&lt;/xml_view&gt;&lt;/sys_dictionary&gt;&lt;/record_update&gt;</payload><payload_hash>-1727013121</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>94dac92fdb2600103dd39235ca961952</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd6439960000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>sn_hr_core_nps_score.u_employee</target_name><type>Dictionary</type><update_domain>global</update_domain><update_guid>112162b3122a3300093ce003f5d4bd34</update_guid><update_guid_history>112162b3122a3300093ce003f5d4bd34:-1727013121</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_restricted_caller_access_24570d6bdb2600103dd39235ca961905</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_restricted_caller_access"><sys_restricted_caller_access action="INSERT_OR_UPDATE"><operation>read</operation><source>f56aaa8a9f0322002b76d126c42e7036</source><source_scope display_value="Human Resources: Service Portal">3d1da2705b021200a4656ede91f91ab6</source_scope><source_table>sp_widget</source_table><source_type>6</source_type><status>2</status><sys_class_name>sys_restricted_caller_access</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2020-01-30 19:45:46</sys_created_on><sys_id>24570d6bdb2600103dd39235ca961905</sys_id><sys_mod_count>0</sys_mod_count><sys_name>3d1da2705b021200a4656ede91f91ab6</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_restricted_caller_access_24570d6bdb2600103dd39235ca961905</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2020-01-30 19:45:46</sys_updated_on><target name="sn_hr_core_profile" target_table="sys_db_object">a8b86a094f303300ad404a10a310c781</target><target_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</target_scope><target_table>sys_db_object</target_table><target_type>1</target_type></sys_restricted_caller_access></record_update>]]></payload><payload_hash>170762832</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>94dac92fdb2600103dd39235ca961955</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16ff7fcefa20000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>3d1da2705b021200a4656ede91f91ab6</target_name><type>Restricted Caller Access Privilege</type><update_domain>global</update_domain><update_guid>60570d6b4c2600103612f128fa060d06</update_guid><update_guid_history>60570d6b4c2600103612f128fa060d06:170762832</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_329f007f0b1222004f526f3ef6673ae3</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;
  &lt;sys_script_include action="INSERT_OR_UPDATE"&gt;
    &lt;access&gt;public&lt;/access&gt;
    &lt;active&gt;true&lt;/active&gt;
    &lt;api_name&gt;sn_hr_core.hr_license&lt;/api_name&gt;
    &lt;caller_access&gt;2&lt;/caller_access&gt;
    &lt;client_callable&gt;false&lt;/client_callable&gt;
    &lt;description/&gt;
    &lt;name&gt;hr_license&lt;/name&gt;
    &lt;script&gt;&lt;![CDATA[var hr_license = Class.create();
hr_license.prototype = {
	initialize: function(){
	},
	
	hasHrAccess:function(table) {
		return gs.getProperty('sn_hr_core.inactive_tables',"").indexOf(table) == -1;
	},

    configureCOE: function(active_Coe, deactive_Coe){
		var changeMade = false;
		var HR_CORE = 'sn_hr_core';
		var HR_SP = 'sn_hr_sp';
		var HR_LE = 'sn_hr_le';
		var HR_INTEGRATIONS = 'sn_hr_integrations';
		var disableWorkflow = true;
		
		var enq = "id!=hr_case^ORapp_id=com.sn_hr_core^ORapp_id=com.sn_hr_lifecycle_events";
		var gr = new GlideRecord('ua_entitlement');
		gr.addEncodedQuery(enq);
		gr.query();
		
		while (gr.next()) {
			if (active_Coe.indexOf(gr.id.toString()) &gt; -1 &amp;&amp; gr.active.toString() == "false") {
				changeMade = true;
				
				if(GlidePluginManager.isActive('com.sn_hr_core'))
					sn_lef.GlideEntitlement.enableEntitlement(gr.id.toString(), HR_CORE, disableWorkflow);
				
				if(GlidePluginManager.isActive('com.sn_hr_integrations'))
					sn_lef.GlideEntitlement.enableEntitlement(gr.id.toString(), HR_INTEGRATIONS, disableWorkflow);
				
				if(GlidePluginManager.isActive('com.sn_hr_service_portal'))
					sn_lef.GlideEntitlement.enableEntitlement(gr.id.toString(), HR_SP, disableWorkflow);
				
				if(GlidePluginManager.isActive('com.sn_hr_lifecycle_events'))
					sn_lef.GlideEntitlement.enableEntitlement(gr.id.toString(), HR_LE, disableWorkflow);	
				
			} else if (deactive_Coe.indexOf(gr.id.toString()) &gt; -1 &amp;&amp; gr.active.toString() == "true") {
				changeMade = true;
				
				if(GlidePluginManager.isActive('com.sn_hr_core'))
					sn_lef.GlideEntitlement.disableEntitlement(gr.id.toString(), HR_CORE, disableWorkflow);
				
				if(GlidePluginManager.isActive('com.sn_hr_integrations'))
					sn_lef.GlideEntitlement.disableEntitlement(gr.id.toString(), HR_INTEGRATIONS, disableWorkflow);
				
				if(GlidePluginManager.isActive('com.sn_hr_service_portal'))
					sn_lef.GlideEntitlement.disableEntitlement(gr.id.toString(), HR_SP, disableWorkflow);
				
				if(GlidePluginManager.isActive('com.sn_hr_lifecycle_events'))
					sn_lef.GlideEntitlement.disableEntitlement(gr.id.toString(), HR_LE, disableWorkflow);
			}
		}

		if(changeMade == false)
			return "there is no change made";
		
		return this.resetCOEConfig();
	},
	
	resetCOEConfig: function(){
		var allInactiveTables = [];
		var allActiveTables = [];
		
		var enq = "id!=hr_lifecycle_events^ORid=NULL^id!=hr_case^ORid=NULL^app_id=com.sn_hr_core";
		var gr = new GlideRecord('ua_entitlement');
		gr.addEncodedQuery(enq);
		gr.query();
		
		while (gr.next()) {
			if (gr.active.toString() == "false")
				allInactiveTables.push(gr.getValue('table_names').toString());
			else 
				allActiveTables.push(gr.getValue('table_names').toString());
		}

		//setting the properties
		gs.setProperty('sn_hr_core.inactive_tables',allInactiveTables.join(","));

		return "success";
	},

	type: 'hr_license'
};]]&gt;&lt;/script&gt;
    &lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;
    &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
    &lt;sys_created_on&gt;2016-10-12 23:00:09&lt;/sys_created_on&gt;
    &lt;sys_id&gt;329f007f0b1222004f526f3ef6673ae3&lt;/sys_id&gt;
    &lt;sys_mod_count&gt;64&lt;/sys_mod_count&gt;
    &lt;sys_name&gt;hr_license&lt;/sys_name&gt;
    &lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;
    &lt;sys_policy/&gt;
    &lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;
    &lt;sys_update_name&gt;sys_script_include_329f007f0b1222004f526f3ef6673ae3&lt;/sys_update_name&gt;
    &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
    &lt;sys_updated_on&gt;2018-06-07 22:30:56&lt;/sys_updated_on&gt;
  &lt;/sys_script_include&gt;
&lt;/record_update&gt;</payload><payload_hash>39183584</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>true</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>94dac92fdb2600103dd39235ca961958</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005784a90000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_license</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>1366852b8e2600109677217558055f8f</update_guid><update_guid_history>1366852b8e2600109677217558055f8f:39183584,46fddd403a727300960d9f5e155893cb:-331495095,8efddd400f727300deb6a81e153847c8:1363374184</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_b9e232209f22120047a2d126c42e70c2</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;public&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;sn_hr_core.HRBenefitTables&lt;/api_name&gt;&lt;caller_access&gt;1&lt;/caller_access&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;description&gt;HR Benefit table choice&lt;/description&gt;&lt;name&gt;HRBenefitTables&lt;/name&gt;&lt;script&gt;&lt;![CDATA[var HRBenefitTables = Class.create();
HRBenefitTables.prototype = {
    initialize: function() {
    },
	
	process: function() {
		var tables = [];

		var definition = new GlideRecord("sys_db_object");
		definition.query("super_class.name", "sn_hr_core_benefit");
		while (definition.next())
			tables.push(definition.name.toString());

		return tables;
	},
	
    type: 'HRBenefitTables'
};]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2015-12-13 07:34:45&lt;/sys_created_on&gt;&lt;sys_id&gt;b9e232209f22120047a2d126c42e70c2&lt;/sys_id&gt;&lt;sys_mod_count&gt;3&lt;/sys_mod_count&gt;&lt;sys_name&gt;HRBenefitTables&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_b9e232209f22120047a2d126c42e70c2&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 14:30:33&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload><payload_hash>-537365575</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>94dac92fdb2600103dd39235ca96195b</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00578eab0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>HRBenefitTables</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>e2fd11806e7273006b3fde8651c64c30</update_guid><update_guid_history>e2fd11806e7273006b3fde8651c64c30:-537365575,2efd1180357273002e62fe18557f992d:-442715752</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_security_acl_role_712162b34f2a3300ad404a10a310c781</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl_role"><sys_security_acl_role action="INSERT_OR_UPDATE"><sys_class_name>sys_security_acl_role</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:45:34</sys_created_on><sys_id>712162b34f2a3300ad404a10a310c781</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sn_hr_core_nps_score.sn_hr_core.hr_nps_score_user</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_security_acl display_value="sn_hr_core_nps_score">f12162b34f2a3300ad404a10a310c77d</sys_security_acl><sys_update_name>sys_security_acl_role_712162b34f2a3300ad404a10a310c781</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:45:34</sys_updated_on><sys_user_role display_value="sn_hr_core.hr_nps_score_user" name="sn_hr_core.hr_nps_score_user">c1216a334f2a3300ad404a10a310c71d</sys_user_role><transaction_id/></sys_security_acl_role></record_update>]]></payload><payload_hash>1280854755</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>94dac92fdb2600103dd39235ca96195e</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd6441bc0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>sn_hr_core_nps_score.sn_hr_core.hr_nps_score_user</target_name><type>Access Roles</type><update_domain>global</update_domain><update_guid>b12162b3ef2a3300ea05811dd7f5e884</update_guid><update_guid_history>b12162b3ef2a3300ea05811dd7f5e884:1280854755</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>asmt_metric_definition_291222f34f2a3300ad404a10a310c7f6</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="asmt_metric_definition"><asmt_metric_definition action="INSERT_OR_UPDATE"><display>4</display><metric display_value="">50e1aeb34f2a3300ad404a10a310c764</metric><order>4</order><selected_image/><sys_class_name>asmt_metric_definition</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:49:39</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>291222f34f2a3300ad404a10a310c7f6</sys_id><sys_mod_count>0</sys_mod_count><sys_name>4</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>asmt_metric_definition_291222f34f2a3300ad404a10a310c7f6</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:49:39</sys_updated_on><unselected_image/><value>4</value></asmt_metric_definition><sys_translated_text action="delete_multiple" query="documentkey=291222f34f2a3300ad404a10a310c7f6"/></record_update>]]></payload><payload_hash>129828221</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>98dac92fdb2600103dd39235ca96193c</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd67fec80000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>4</target_name><type>Assessment Metric Definition</type><update_domain>global</update_domain><update_guid>291222f3102a3300f7479ee8bec6a3f7</update_guid><update_guid_history>291222f3102a3300f7479ee8bec6a3f7:129828221</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sysevent_register_186f7626532232002b76da86a11c08ef</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sysevent_register"><sysevent_register action="INSERT_OR_UPDATE"><caller_access>1</caller_access><description>Fired when all approvers are missing for a HR Case</description><event_name>sn_hr_core.missing_all_approvers</event_name><fired_by>Workflow</fired_by><queue/><suffix>missing_all_approvers</suffix><sys_class_name>sysevent_register</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-05-08 21:03:51</sys_created_on><sys_id>186f7626532232002b76da86a11c08ef</sys_id><sys_mod_count>2</sys_mod_count><sys_name>sn_hr_core.missing_all_approvers</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sysevent_register_186f7626532232002b76da86a11c08ef</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:35</sys_updated_on><table>sn_hr_core_case</table></sysevent_register></record_update>]]></payload><payload_hash>837019545</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>98dac92fdb2600103dd39235ca96193f</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0057938b0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case</table><target_name>sn_hr_core.missing_all_approvers</target_name><type>Event Registration</type><update_domain>global</update_domain><update_guid>32fd11808f727300133fe8487ef2955f</update_guid><update_guid_history>32fd11808f727300133fe8487ef2955f:837019545,b2fd1180a9727300f987f149b975595e:-930684646</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sysevent_register_f25370019f22120047a2d126c42e7064</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sysevent_register"><sysevent_register action="INSERT_OR_UPDATE"><caller_access>1</caller_access><description/><event_name>sn_hr_core_case.commented</event_name><fired_by/><queue/><suffix/><sys_class_name>sysevent_register</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2013-11-04 11:50:13</sys_created_on><sys_id>f25370019f22120047a2d126c42e7064</sys_id><sys_mod_count>2</sys_mod_count><sys_name>sn_hr_core_case.commented</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sysevent_register_f25370019f22120047a2d126c42e7064</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:36</sys_updated_on><table>sn_hr_core_case</table></sysevent_register></record_update>]]></payload><payload_hash>450454857</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>98dac92fdb2600103dd39235ca961942</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005797800000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case</table><target_name>sn_hr_core_case.commented</target_name><type>Event Registration</type><update_domain>global</update_domain><update_guid>c7fd118041727300de7fd7c7aad71d8f</update_guid><update_guid_history>c7fd118041727300de7fd7c7aad71d8f:450454857,4bfd11805172730078c3e04dd9d8d88e:-1614625206</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_1798aec54f303300ad404a10a310c744</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>false</actions_access><alter_access>false</alter_access><caller_access>1</caller_access><client_scripts_access>false</client_scripts_access><configuration_access>false</configuration_access><create_access>false</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Document Type</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_document_type</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="Application File" name="sys_metadata">8a12332181131300aadba4a47c598e5e</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:30</sys_created_on><sys_id>1798aec54f303300ad404a10a310c744</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Document Type</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_1798aec54f303300ad404a10a310c744</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:08</sys_updated_on><update_access>false</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>187010086</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>98dac92fdb2600103dd39235ca961945</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00572e220000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_document_type</table><target_name>HR Document Type</target_name><type>Table</type><update_domain>global</update_domain><update_guid>20ed5d40e07273007ecf641a11029881</update_guid><update_guid_history>20ed5d40e07273007ecf641a11029881:187010086,60ed5d40917273008019db28523f8d71:1185996357</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_4f986ec54f303300ad404a10a310c7c2</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model>class</extension_model><is_extendable>true</is_extendable><label>Compensation</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_compensation</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:28</sys_created_on><sys_id>4f986ec54f303300ad404a10a310c7c2</sys_id><sys_mod_count>3</sys_mod_count><sys_name>Compensation</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_4f986ec54f303300ad404a10a310c7c2</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:14</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>815751782</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>98dac92fdb2600103dd39235ca961948</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005745b60000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_compensation</table><target_name>Compensation</target_name><type>Table</type><update_domain>global</update_domain><update_guid>06ed9d405a727300aca8618c847e2211</update_guid><update_guid_history>06ed9d405a727300aca8618c847e2211:815751782,caed9d40367273001d0893c571b96608:1649216359</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_7fa82a094f303300ad404a10a310c711</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>false</actions_access><alter_access>false</alter_access><caller_access>1</caller_access><client_scripts_access>false</client_scripts_access><configuration_access>false</configuration_access><create_access>false</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>COE</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_coe</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="Application File" name="sys_metadata">8a12332181131300aadba4a47c598e5e</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:42</sys_created_on><sys_id>7fa82a094f303300ad404a10a310c711</sys_id><sys_mod_count>3</sys_mod_count><sys_name>COE</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_7fa82a094f303300ad404a10a310c711</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:20</sys_updated_on><update_access>false</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-1565137673</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>98dac92fdb2600103dd39235ca96194b</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00575a060000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_coe</table><target_name>COE</target_name><type>Table</type><update_domain>global</update_domain><update_guid>93ed9d40157273000962c918d74196a1</update_guid><update_guid_history>93ed9d40157273000962c918d74196a1:-1565137673,9bed9d40bf727300c1622913f6cfdb9d:-472163690</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_cca8eec54f303300ad404a10a310c747</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>Matching Roles</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_matching_roles</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:32</sys_created_on><sys_id>cca8eec54f303300ad404a10a310c747</sys_id><sys_mod_count>3</sys_mod_count><sys_name>Matching Roles</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_cca8eec54f303300ad404a10a310c747</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:25</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-1534235673</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>98dac92fdb2600103dd39235ca96194e</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00576fab0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_matching_roles</table><target_name>Matching Roles</target_name><type>Table</type><update_domain>global</update_domain><update_guid>2cfddd4011727300820f5c3460bb2128</update_guid><update_guid_history>2cfddd4011727300820f5c3460bb2128:-1534235673,20fddd4083727300c8750fb9e6ab6a19:1674379526</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_dictionary_sn_hr_core_case_subject_person</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update><sys_dictionary action="INSERT_OR_UPDATE" element="subject_person" table="sn_hr_core_case"><active>true</active><array>false</array><array_denormalized>false</array_denormalized><attributes>readonly_clickthrough=true,ref_contributions=sn_hr_core_show_hr_profile;sn_hr_core_hr_nps</attributes><audit>false</audit><calculation/><choice/><choice_field/><choice_table/><column_label>Subject person</column_label><comments/><create_roles/><default_value/><defaultsort/><delete_roles/><dependent/><dependent_on_field/><display>false</display><dynamic_creation>false</dynamic_creation><dynamic_creation_script/><dynamic_default_value/><dynamic_ref_qual/><element>subject_person</element><element_reference>false</element_reference><foreign_database/><function_definition/><function_field>false</function_field><internal_type display_value="Reference">reference</internal_type><mandatory>false</mandatory><max_length>32</max_length><name>sn_hr_core_case</name><next_element/><primary>false</primary><read_only>false</read_only><read_roles/><reference display_value="" name="sys_user">sys_user</reference><reference_cascade_rule/><reference_floats>false</reference_floats><reference_key/><reference_qual>javascript:new sn_hr_core.hr_Utils().getSubjectPersonUsers()</reference_qual><reference_qual_condition/><reference_type/><sizeclass/><spell_check>false</spell_check><staged>false</staged><sys_class_name>sys_dictionary</sys_class_name><sys_created_by>system</sys_created_by><sys_created_on>2017-04-05 18:39:14</sys_created_on><sys_id>efb8a2494f303300ad404a10a310c7a3</sys_id><sys_mod_count>1</sys_mod_count><sys_name>Subject person</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_dictionary_sn_hr_core_case_subject_person</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 15:17:01</sys_updated_on><table_reference>false</table_reference><text_index>false</text_index><unique>false</unique><use_dependent_field>false</use_dependent_field><use_dynamic_default>false</use_dynamic_default><use_reference_qualifier>advanced</use_reference_qualifier><virtual>false</virtual><widget/><write_roles/><xml_view>false</xml_view></sys_dictionary></record_update>]]></payload><payload_hash>1812066523</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>98dac92fdb2600103dd39235ca961951</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c008219440000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case</table><target_name>HR Case.Subject person</target_name><type>Dictionary</type><update_domain>global</update_domain><update_guid>db98610cd972730064f58cbd6d37d8b0</update_guid><update_guid_history>db98610cd972730064f58cbd6d37d8b0:1812066523,979861c89672730002e2c8350b8d0155:-631992725</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Scoped App Client">781f36a96fef21005be8883e6b3ee43d</application><category>customer</category><comments/><name>sys_properties_28dbc10493023300ebd4f157b67ffbc1</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_properties">
  <sys_properties action="INSERT_OR_UPDATE">
    <choices/>
    <description>checksum value of the store payload </description>
    <ignore_cache>false</ignore_cache>
    <is_private>false</is_private>
    <name>sn_appclient.last.processed.checksum</name>
    <read_roles/>
    <suffix>last.processed.checksum</suffix>
    <sys_class_name>sys_properties</sys_class_name>
    <sys_created_by>admin</sys_created_by>
    <sys_created_on>2019-06-10 06:29:29</sys_created_on>
    <sys_id>28dbc10493023300ebd4f157b67ffbc1</sys_id>
    <sys_mod_count>7</sys_mod_count>
    <sys_name>sn_appclient.last.processed.checksum</sys_name>
    <sys_package display_value="Scoped App Client" source="sn_appclient">781f36a96fef21005be8883e6b3ee43d</sys_package>
    <sys_policy/>
    <sys_scope display_value="Scoped App Client">781f36a96fef21005be8883e6b3ee43d</sys_scope>
    <sys_update_name>sys_properties_28dbc10493023300ebd4f157b67ffbc1</sys_update_name>
    <sys_updated_by>system</sys_updated_by>
    <sys_updated_on>2019-09-15 10:30:08</sys_updated_on>
    <type>string</type>
    <value>KIj3YAsO5OwY5USI12xn5w==</value>
    <write_roles/>
  </sys_properties>
  <sys_translated_text action="delete_multiple" query="documentkey=28dbc10493023300ebd4f157b67ffbc1"/>
</record_update>]]></payload><payload_hash>-1027168806</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>true</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>98dac92fdb2600103dd39235ca961954</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16ff7f967b80000000</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>sn_appclient.last.processed.checksum</target_name><type>System Property</type><update_domain>global</update_domain><update_guid>0076092bda2600100cb3ca7c24d12c99</update_guid><update_guid_history>0076092bda2600100cb3ca7c24d12c99:-1027168806,72a01caf2922001052fa4fbffb7e8bbb:1279008954,11613ab2f022001080cb8cb4ecaf7aa3:-2093567380,8cc5dd15b66200104e20b48f977d8f6f:952376734,cd718443ab92001099a12f0cf12a8017:-1173510517,d8568ca09d1200106d041e1b737314c6:675580651,7b7b5e96a771001070b9565a9f8df6a4:1297986888,5dcebab0b72100105c13c9ce330fe1a2:-562989972,a1d45ea4675100103f46efaaa975d1eb:978055495,023a0c7dff0100108277b867c921c928:-901127851,6e82c2bdd07000107db4482cedf70077:-2146259893,19eec540077000107974d4d2d3b74bd8:-909474494,dd5099d319a00010f2b314894e82a80b:1389149168,cd5f42d9506000104964196e5fa8ce3b:-1796181887,ba4d5fe865200010345bd68f7118db37:1407690677,a73b48619f10001019896a6963d75eed:1960533964,8781c36ed97773009ab95b4217f94309:207135306,a593b6d269b333008dfb763aa031d7f1:892999421,9993e55959233300df58147220b8122e:-1195831812,5f349c1c9ae77300e155c7e105c95425:-695996138,676b573332533300e78c830bcd7b2e7f:812454637,04d8f151f81fb3004d1318aa509a8092:-1728376767,d087a5cb970bb3005e33cec198d45196:246938132,22b2452237033300da0771b676c1a2f8:-1583950434,83dd3b857f83330011c6ebaaf93a2d8b:-678384441,40763f722a363300b13c774ad125744e:1834454173,ef663f721c363300fbc6a807723bdb49:786724085</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_154d34889f031200d9011977677fcffd</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;public&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;sn_hr_core.hr_CaseHierarchyUtils&lt;/api_name&gt;&lt;caller_access&gt;1&lt;/caller_access&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;description/&gt;&lt;name&gt;hr_CaseHierarchyUtils&lt;/name&gt;&lt;script&gt;&lt;![CDATA[var hr_CaseHierarchyUtils = Class.create();
hr_CaseHierarchyUtils.prototype = {
	initialize: function() {
	},

	/* Get encoded query describing which HR Services are available for a given record
	 * @param record GlideRecord The case record to get available services for
	 * @return string Encoded query describing available services
	 */
	getQueryToLimitServices: function(record) {
		var hrServiceIds = [];
		var grHrServices = new GlideRecord('sn_hr_core_service');
		grHrServices.addActiveQuery();
		grHrServices.addQuery("value", "!=", hr.BULK_PARENT_CASE_SERVICE);
		grHrServices.addQuery('topic_detail.topic_category.coe', record.getRecordClassName());
		if (record.topic_detail)
			grHrServices.addQuery("topic_detail", record.topic_detail.toString());
		if (record.topic_category)
			grHrServices.addQuery("topic_detail.topic_category", record.topic_category.toString());
		if (gs.nil(record.subject_person)) // Cannot evaluate HR Criteria without a user
			grHrServices.addNullQuery("hr_criteria");
		grHrServices.query();
		while (grHrServices.next()) {
			if (gs.nil(grHrServices.hr_criteria))
				hrServiceIds.push(grHrServices.getUniqueValue());
			else {
				var hrCriteria = grHrServices.hr_criteria.split(',');

				for (var i = 0; i &lt; hrCriteria.length; i++) {
					var isValidCriteria = new hr_Criteria().evaluateById(hrCriteria[i], record.subject_person.toString());
					if (isValidCriteria) {
						hrServiceIds.push(grHrServices.getUniqueValue());
						break;
					} 
				}
			}
		}

		return 'sys_idIN' + hrServiceIds.toString();
	},

	/* Get encoded query describing which approval options are available for a given record
	 * @param record GlideRecord The service activity record to get available approval options for
	 * @return string Encoded query describing available approval options
	 */
	getApprovalAssignmentOptionsForHrServiceActivity: function(record) {
		var grHrService = new GlideRecord('sn_hr_core_service');
		if (record &amp;&amp; record.parent_service &amp;&amp; grHrService.get(record.parent_service))
			return this.getApprovalAssignmentOptions(grHrService);

		return "sys_id=null";
	},
	
	/* Get encoded query describing which approval options are available for a given record
	 * @param record GlideRecord The service record to get available approval options for
	 * @return string Encoded query describing available approval options
	 */
	getApprovalAssignmentOptions: function(record) {
		if (!record || !record.service_table)
			return "sys_id=null";
		
		return this.getApprovalAssignmentOptionsForCOE(record.service_table.toString());
	},
	
	/* Get encoded query describing which approval options are available for a given case table
	 * @param table string The case table to get available approval options for
	 * @return string Encoded query describing available approval options
	 */
	getApprovalAssignmentOptionsForCOE: function(table) {
		if (!table)
			return "sys_id=null";
		
		var approvalOptionSysIds = [];
		
		var grApprovalOptions = new GlideRecord('sn_hr_core_service_approval_option');
		grApprovalOptions.addActiveQuery();
		grApprovalOptions.addQuery('case_table', 'IN', new GlideTableHierarchy(table).getTables());
		grApprovalOptions.query();

		while (grApprovalOptions.next())
			approvalOptionSysIds.push(grApprovalOptions.getUniqueValue());

		return "sys_idIN" + approvalOptionSysIds.toString();
	},

	/* Get encoded query describing which case writer role applies to a record
	 * @param record GlideRecord The record to determine the case writer role for
	 * @return string Encoded query describing which case writer role applies to a record
	 */
	getQueryToLimitUsersWithCaseWriterRole: function(record) {
		var hrTables = new GlideTableHierarchy(record.getRecordClassName()).getTables();

		if (hrTables.indexOf('sn_hr_le_case') &gt; -1) 
			return 'roles=sn_hr_le.case_writer';
		
		return 'roles=sn_hr_core.case_writer';
	},

	type: 'hr_CaseHierarchyUtils'
};]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2016-04-22 21:17:55&lt;/sys_created_on&gt;&lt;sys_id&gt;154d34889f031200d9011977677fcffd&lt;/sys_id&gt;&lt;sys_mod_count&gt;23&lt;/sys_mod_count&gt;&lt;sys_name&gt;hr_CaseHierarchyUtils&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_154d34889f031200d9011977677fcffd&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 14:30:30&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload><payload_hash>2134345990</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>98dac92fdb2600103dd39235ca961957</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005781030000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_CaseHierarchyUtils</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>7dfddd40ff72730020d1a6c055a9b9ae</update_guid><update_guid_history>7dfddd40ff72730020d1a6c055a9b9ae:2134345990,f1fddd40407273009e4c63cfc5f039ac:1152256135</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_79e232209f22120047a2d126c42e70c2</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;sn_hr_core.hr_Payroll&lt;/api_name&gt;&lt;caller_access&gt;1&lt;/caller_access&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;description/&gt;&lt;name&gt;hr_Payroll&lt;/name&gt;&lt;script&gt;&lt;![CDATA[var hr_Payroll = Class.create();
hr_Payroll.prototype = {
    initialize : function(_gr, _gs) {
		//this._log = new GSLog(sn_hr_core.hr.LOG, this.type).setLog4J();
		this._gr = _gr;
		this._gs = _gs || gs;
		
		
		// Other object scripts have a reference here as they are used throughout
		this.hrUtil = new sn_hr_core.hr_Utils();

		this.depositFieldMap = {
		};
		
		this.bankFieldMap = {
		};
		
		//Record Producer fields
		this.deposit_fields = [
				'deposit_percent',
				'deposit_amount'
			];
		
		this.bank_fields =[
				'bank_name',
				'routing_number',
				'account_number',
				'account_type',
				'account_holder',
				'account_nickname'
			];
	},
	
	//This method is currently not used, and is being kept for upgrades
	_createBankAccountFromParameters: function(parameters, currentAccount){
		var grBankAccount = new GlideRecord("sn_hr_core_profile_bank_account");
		var recFound = false;
		if (currentAccount)
			recFound = grBankAccount.get(currentAccount);
		if (!recFound)
			grBankAccount.initialize();
		else 
			if (grBankAccount.getValue('account_number_display').toString() == parameters.account_number.toString())
			parameters.account_number = grBankAccount.account_number;
		grBankAccount.user = gs.getUserID();
		this.hrUtil.fillInFromMap(grBankAccount, parameters, this.bankFieldMap);
		return recFound?grBankAccount.update():grBankAccount.insert();
	},
	
	//This method is currently not used, and is being kept for upgrades
	createDirectDepositRecord: function(parameters){
		var grDirectDesposit = new GlideRecord("sn_hr_core_direct_deposit");
		var existingRecord = parameters.current_deposit_record;
		var recFound = false;
		if (existingRecord)
			recFound = grDirectDesposit.get(existingRecord);
		if (!recFound)
			grDirectDesposit.initialize();
		grDirectDesposit.employee = gs.getUserID();
		this.hrUtil.fillInFromMap(grDirectDesposit, parameters, this.depositFieldMap);
		if (grDirectDesposit.bank_account)
			grDirectDesposit.bank_account = this._createBankAccountFromParameters(parameters, grDirectDesposit.bank_account);
		else 
			grDirectDesposit.bank_account = this._createBankAccountFromParameters(parameters);
		return recFound ? grDirectDesposit.update() : grDirectDesposit.insert();
	},
	
	maskAccountNumber: function (str){
		var trailingCharsIntactCount = 4;
		str = str.toString();
		var newstr = str;

		if (str.length &gt; 4){
			newstr = str.substring(0, str.length - trailingCharsIntactCount );
			newstr = newstr.replace(/\d/g,'x') + str.slice( -trailingCharsIntactCount);

		}
		return newstr;
	},
	
    type: 'hr_Payroll'
};]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2015-12-18 16:11:38&lt;/sys_created_on&gt;&lt;sys_id&gt;79e232209f22120047a2d126c42e70c2&lt;/sys_id&gt;&lt;sys_mod_count&gt;49&lt;/sys_mod_count&gt;&lt;sys_name&gt;hr_Payroll&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_79e232209f22120047a2d126c42e70c2&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 14:30:33&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload><payload_hash>-703554649</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>98dac92fdb2600103dd39235ca96195a</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00578c860000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_Payroll</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>2efd11800a7273008edfd38b154e9413</update_guid><update_guid_history>2efd11800a7273008edfd38b154e9413:-703554649,66fd1180897273004b68d011dcf19811:-567128664</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_security_acl_f12162b34f2a3300ad404a10a310c77d</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl"><sys_security_acl action="INSERT_OR_UPDATE"><active>true</active><admin_overrides>true</admin_overrides><advanced>false</advanced><condition/><description>Default access control on sn_hr_core_nps_score</description><name>sn_hr_core_nps_score</name><operation display_value="write">write</operation><script/><sys_class_name>sys_security_acl</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:45:34</sys_created_on><sys_id>f12162b34f2a3300ad404a10a310c77d</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sn_hr_core_nps_score</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_security_acl_f12162b34f2a3300ad404a10a310c77d</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:45:34</sys_updated_on><type display_value="record">record</type></sys_security_acl></record_update>]]></payload><payload_hash>-1299292956</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>98dac92fdb2600103dd39235ca96195d</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd6441810000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>sn_hr_core_nps_score</target_name><type>Access Control</type><update_domain>global</update_domain><update_guid>352162b32c2a3300e9f46bbfedfc3b80</update_guid><update_guid_history>352162b32c2a3300e9f46bbfedfc3b80:-1299292956</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>sys_ui_related_sys_user_null</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update><sys_ui_related sys_domain="global" table="sys_user" version="2" view="">
  <sys_ui_related_list_entry action="INSERT_OR_UPDATE">
    <sys_id>6187268ec0a801947a8eb4252c0d79ad</sys_id>
    <sys_updated_on>2010-03-15 11:13:19</sys_updated_on>
    <position>0</position>
    <related_list>sys_user_has_role.user</related_list>
    <sys_created_on>2010-03-15 11:13:19</sys_created_on>
    <sys_mod_count>0</sys_mod_count>
    <list_id display_value="sys_user">6187268cc0a801942a97c1616156ca77</list_id>
    <order_by/>
    <filter/>
    <sys_updated_by>dariusz.maint</sys_updated_by>
    <sys_created_by>dariusz.maint</sys_created_by>
  </sys_ui_related_list_entry>
  <sys_ui_related_list_entry action="INSERT_OR_UPDATE">
    <sys_id>618726a5c0a8019424fe7991cc5e5bc6</sys_id>
    <sys_updated_on>2010-03-15 11:13:19</sys_updated_on>
    <position>1</position>
    <related_list>sys_user_grmember.user</related_list>
    <sys_created_on>2010-03-15 11:13:19</sys_created_on>
    <sys_mod_count>0</sys_mod_count>
    <list_id display_value="sys_user">6187268cc0a801942a97c1616156ca77</list_id>
    <order_by/>
    <filter/>
    <sys_updated_by>dariusz.maint</sys_updated_by>
    <sys_created_by>dariusz.maint</sys_created_by>
  </sys_ui_related_list_entry>
  <sys_ui_related_list_entry action="INSERT_OR_UPDATE">
    <sys_id>618726a8c0a8019404e8d0ec270c39fb</sys_id>
    <sys_updated_on>2010-03-15 11:13:19</sys_updated_on>
    <position>2</position>
    <related_list>sys_user_delegate.user</related_list>
    <sys_created_on>2010-03-15 11:13:19</sys_created_on>
    <sys_mod_count>0</sys_mod_count>
    <list_id display_value="sys_user">6187268cc0a801942a97c1616156ca77</list_id>
    <order_by/>
    <filter/>
    <sys_updated_by>dariusz.maint</sys_updated_by>
    <sys_created_by>dariusz.maint</sys_created_by>
  </sys_ui_related_list_entry>
  <sys_ui_related_list_entry action="INSERT_OR_UPDATE">
    <sys_id>618726aac0a801942d1143ada158398b</sys_id>
    <sys_updated_on>2010-03-15 11:13:19</sys_updated_on>
    <position>3</position>
    <related_list>sys_user_has_skill.user</related_list>
    <sys_created_on>2010-03-15 11:13:19</sys_created_on>
    <sys_mod_count>0</sys_mod_count>
    <list_id display_value="sys_user">6187268cc0a801942a97c1616156ca77</list_id>
    <order_by/>
    <filter/>
    <sys_updated_by>dariusz.maint</sys_updated_by>
    <sys_created_by>dariusz.maint</sys_created_by>
  </sys_ui_related_list_entry>
  <sys_ui_related_list_entry action="INSERT_OR_UPDATE">
    <sys_id>618726adc0a801944333db96fbd598af</sys_id>
    <sys_updated_on>2010-03-15 11:13:19</sys_updated_on>
    <position>4</position>
    <related_list>sys_user_covers_location.user</related_list>
    <sys_created_on>2010-03-15 11:13:19</sys_created_on>
    <sys_mod_count>0</sys_mod_count>
    <list_id display_value="sys_user">6187268cc0a801942a97c1616156ca77</list_id>
    <order_by/>
    <filter/>
    <sys_updated_by>dariusz.maint</sys_updated_by>
    <sys_created_by>dariusz.maint</sys_created_by>
  </sys_ui_related_list_entry>
   <sys_ui_related_list_entry action="INSERT_OR_UPDATE">
      <filter/>
      <list_id display_value="sys_user">ecd4b19ac3433000c111113e5bba8fd4</list_id>
      <order_by/>
      <position>5</position>
      <related_list>REL:b31dbb025b3012002eff8405f0f91a67</related_list>
      <sys_created_by>admin</sys_created_by>
      <sys_created_on>2016-15-22 23:58:34</sys_created_on>
      <sys_id>0283683d5b0022002eff8405f0f91a66</sys_id>
      <sys_mod_count>0</sys_mod_count>
      <sys_updated_by>admin</sys_updated_by>
      <sys_updated_on>2016-15-22 23:58:34</sys_updated_on>
    </sys_ui_related_list_entry>
    <sys_ui_related_list_entry action="INSERT_OR_UPDATE">
      <filter/>
      <list_id display_value="sys_user">ecd4b19ac3433000c111113e5bba8fd4</list_id>
      <order_by/>
      <position>6</position>
      <related_list>sys_user_has_license.user</related_list>
      <sys_created_by>admin</sys_created_by>
      <sys_created_on>2016-15-22 23:58:34</sys_created_on>
      <sys_id>8283683d5b0022002eff8405f0f91a66</sys_id>
      <sys_mod_count>0</sys_mod_count>
      <sys_updated_by>admin</sys_updated_by>
      <sys_updated_on>2016-15-22 23:58:34</sys_updated_on>
    </sys_ui_related_list_entry>
  <sys_ui_related_list action="INSERT_OR_UPDATE">
    <sys_updated_on>2010-03-15 11:13:19</sys_updated_on>
    <sys_id>6187268cc0a801942a97c1616156ca77</sys_id>
    <position/>
    <view_name/>
    <sys_mod_count>0</sys_mod_count>
    <related_list/>
    <sys_created_on>2010-03-15 11:13:19</sys_created_on>
    <view display_value="Default view">Default view</view>
    <sys_user/>
    <filter/>
    <order_by/>
    <sys_updated_by>dariusz.maint</sys_updated_by>
    <sys_domain>global</sys_domain>
    <name>sys_user</name>
    <sys_created_by>dariusz.maint</sys_created_by>
  </sys_ui_related_list>
</sys_ui_related></record_update>]]></payload><payload_hash>-403333217</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>true</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>98dac92fdb2600103dd39235ca961960</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16ff7f963d00000000</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>User</target_name><type>Related Lists</type><update_domain>global</update_domain><update_guid>7b66092b7c26001015f0bdb0bac5e881</update_guid><update_guid_history>7b66092b7c26001015f0bdb0bac5e881:-403333217,be0b641d22003300d010a771e017af67:-164084427,6e0ba01dd50033000f6554467d802b7e:-223484382</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>asmt_metric_category_9ed16eb34f2a3300ad404a10a310c793</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="asmt_metric_category"><asmt_metric_category action="INSERT_OR_UPDATE"><create_stakeholders>false</create_stakeholders><description/><details/><filter table="asmt_metric_type">sys_id=730330019f22120047a2d126c42e70e5^EQ<item endquery="false" field="sys_id" goto="false" newquery="false" operator="=" or="false" value="730330019f22120047a2d126c42e70e5"/><item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/></filter><metric_type display_value="HR Request Satisfaction Survey">730330019f22120047a2d126c42e70e5</metric_type><name>NPS</name><order>1</order><roles/><scoring_type>percent</scoring_type><sys_class_name>asmt_metric_category</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:48:40</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>9ed16eb34f2a3300ad404a10a310c793</sys_id><sys_mod_count>1</sys_mod_count><sys_name>NPS</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>asmt_metric_category_9ed16eb34f2a3300ad404a10a310c793</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:49:39</sys_updated_on><table>asmt_metric_type</table><total_metrics>1</total_metrics><weight>10</weight></asmt_metric_category><sys_translated_text action="delete_multiple" query="documentkey=9ed16eb34f2a3300ad404a10a310c793"/></record_update>]]></payload><payload_hash>-97562070</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>9cdac92fdb2600103dd39235ca96193b</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd67ffd40000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>asmt_metric_type</table><target_name>NPS</target_name><type>Metric Category</type><update_domain>global</update_domain><update_guid>651262f35d2a3300c1ae377272e4ee04</update_guid><update_guid_history>651262f35d2a3300c1ae377272e4ee04:-97562070,dbd1aeb3502a3300dc4cbcd772867c14:1955020797</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Global">global</application><category>customer</category><comments/><name>pa_dashboards_3001aa169f011200ef4afa7dc67fcf7f</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="pa_dashboards">
  <pa_dashboards action="INSERT_OR_UPDATE">
    <active>true</active>
    <breakdown_source/>
    <color/>
    <group/>
    <groups/>
    <is_breakdown>false</is_breakdown>
    <managed_breakdown/>
    <managed_publisher/>
    <name>Usage by Web API</name>
    <no_tabs>true</no_tabs>
    <order>2000</order>
    <owner/>
    <restrict_to_roles>pa_viewer,pa_contributor</restrict_to_roles>
    <role_override>false</role_override>
    <roles>api_analytics_read</roles>
    <should_migrate_permissions>false</should_migrate_permissions>
    <sys_class_name>pa_dashboards</sys_class_name>
    <sys_created_by>admin</sys_created_by>
    <sys_created_on>2016-01-21 18:14:02</sys_created_on>
    <sys_domain>global</sys_domain>
    <sys_domain_path>/</sys_domain_path>
    <sys_id>3001aa169f011200ef4afa7dc67fcf7f</sys_id>
    <sys_mod_count>8</sys_mod_count>
    <sys_name>Usage by Web API</sys_name>
    <sys_overrides/>
    <sys_package display_value="API Analytics" source="com.glide.api_analytics">444d9d27bd043300ca74fc31ed06f33b</sys_package>
    <sys_policy/>
    <sys_scope display_value="Global">global</sys_scope>
    <sys_update_name>pa_dashboards_3001aa169f011200ef4afa7dc67fcf7f</sys_update_name>
    <sys_updated_by>admin</sys_updated_by>
    <sys_updated_on>2019-03-18 20:57:18</sys_updated_on>
    <users/>
    <visible_to>2</visible_to>
  </pa_dashboards>
</record_update>]]></payload><payload_hash>1683828090</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>true</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>9cdac92fdb2600103dd39235ca96193e</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16ff7f963d00000000</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>Usage by Web API</target_name><type>Dashboard</type><update_domain>global</update_domain><update_guid>b766092b8f260010e8d2eaa8f267c58d</update_guid><update_guid_history>b766092b8f260010e8d2eaa8f267c58d:1683828090,a34fb986d7b023004fff39a71d8bcfef:-808214464,634fb9861bb0230020768e441b4878ee:-1780448203</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sysevent_register_c4050b8d535232003585c3c606dc3483</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sysevent_register"><sysevent_register action="INSERT_OR_UPDATE"><caller_access>1</caller_access><description>Fired when an approver rejects a HR Case</description><event_name>sn_hr_core.approval_rejected</event_name><fired_by>Workflow</fired_by><queue/><suffix>approval_rejected</suffix><sys_class_name>sysevent_register</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-04-21 19:21:17</sys_created_on><sys_id>c4050b8d535232003585c3c606dc3483</sys_id><sys_mod_count>3</sys_mod_count><sys_name>sn_hr_core.approval_rejected</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sysevent_register_c4050b8d535232003585c3c606dc3483</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:35</sys_updated_on><table>sn_hr_core_case</table></sysevent_register></record_update>]]></payload><payload_hash>-822798020</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>9cdac92fdb2600103dd39235ca961941</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005796a20000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case</table><target_name>sn_hr_core.approval_rejected</target_name><type>Event Registration</type><update_domain>global</update_domain><update_guid>c7fd118011727300bb09d020c83c1d86</update_guid><update_guid_history>c7fd118011727300bb09d020c83c1d86:-822798020,4bfd1180a8727300e680710412cc2485:-1465112195</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_09b8ea094f303300ad404a10a310c74b</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>false</actions_access><alter_access>false</alter_access><caller_access>1</caller_access><client_scripts_access>false</client_scripts_access><configuration_access>false</configuration_access><create_access>false</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>Email Content</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_email_content</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="Application File" name="sys_metadata">8a12332181131300aadba4a47c598e5e</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2019-04-12 12:25:24</sys_created_on><sys_id>09b8ea094f303300ad404a10a310c74b</sys_id><sys_mod_count>1</sys_mod_count><sys_name>Email Content</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_09b8ea094f303300ad404a10a310c74b</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:07</sys_updated_on><update_access>false</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-2000691526</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>9cdac92fdb2600103dd39235ca961944</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005728380000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_email_content</table><target_name>Email Content</target_name><type>Table</type><update_domain>global</update_domain><update_guid>10ed5d40dd7273008cf42c2132eb1f54</update_guid><update_guid_history>10ed5d40dd7273008cf42c2132eb1f54:-2000691526,48ed5d407072730067c5cb1cef1f6a50:-1351809237</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_40b82a094f303300ad404a10a310c7b6</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>true</delete_access><extension_model/><is_extendable>false</is_extendable><label>Case Creation Configuration</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_config_case_creation</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="Application File" name="sys_metadata">8a12332181131300aadba4a47c598e5e</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2019-04-12 12:25:20</sys_created_on><sys_id>40b82a094f303300ad404a10a310c7b6</sys_id><sys_mod_count>1</sys_mod_count><sys_name>Case Creation Configuration</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_40b82a094f303300ad404a10a310c7b6</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:13</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>32254203</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>9cdac92fdb2600103dd39235ca961947</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005740500000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_config_case_creation</table><target_name>Case Creation Configuration</target_name><type>Table</type><update_domain>global</update_domain><update_guid>71ed5d403b727300f928ba7876a807f8</update_guid><update_guid_history>71ed5d403b727300f928ba7876a807f8:32254203,69ed5d403d727300021187b669693bf4:-1241060928</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_78b8aa094f303300ad404a10a310c7b2</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access>public</access><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Beneficiary</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_beneficiary</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:45</sys_created_on><sys_id>78b8aa094f303300ad404a10a310c7b2</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Beneficiary</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_78b8aa094f303300ad404a10a310c7b2</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:18</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>202663314</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>9cdac92fdb2600103dd39235ca96194a</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0057554b0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_beneficiary</table><target_name>HR Beneficiary</target_name><type>Table</type><update_domain>global</update_domain><update_guid>87ed9d406a7273009fbb5711ce54348d</update_guid><update_guid_history>87ed9d406a7273009fbb5711ce54348d:202663314,43ed9d4083727300abcf65373bd9958a:-766051117</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_b5a8e2094f303300ad404a10a310c715</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>Relationship</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_relationship</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:36</sys_created_on><sys_id>b5a8e2094f303300ad404a10a310c715</sys_id><sys_mod_count>3</sys_mod_count><sys_name>Relationship</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_b5a8e2094f303300ad404a10a310c715</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:24</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-353649334</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>9cdac92fdb2600103dd39235ca96194d</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00576a310000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_relationship</table><target_name>Relationship</target_name><type>Table</type><update_domain>global</update_domain><update_guid>98fd9d4020727300e4df337afc037bfb</update_guid><update_guid_history>98fd9d4020727300e4df337afc037bfb:-353649334,54fd9d40e5727300b749780e59acb8f8:575493545</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_edb82e094f303300ad404a10a310c78f</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>true</delete_access><extension_model/><is_extendable>false</is_extendable><label>Case Creation Service Configuration</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_config_case_creation_service</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2019-04-12 12:25:26</sys_created_on><sys_id>edb82e094f303300ad404a10a310c78f</sys_id><sys_mod_count>1</sys_mod_count><sys_name>Case Creation Service Configuration</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_edb82e094f303300ad404a10a310c78f</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:29</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-329456078</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>9cdac92fdb2600103dd39235ca961950</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00577eec0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_config_case_creation_service</table><target_name>Case Creation Service Configuration</target_name><type>Table</type><update_domain>global</update_domain><update_guid>2dfddd40c0727300b1d646648db199a5</update_guid><update_guid_history>2dfddd40c0727300b1d646648db199a5:-329456078,e5fddd4047727300d6d0fa3c0c2a93a2:733593463</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_documentation_sn_hr_core_nps_score_u_latest_en</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update><sys_documentation element="u_latest" label="Latest" language="en" table="sn_hr_core_nps_score"><sys_documentation action="INSERT_OR_UPDATE"><element>u_latest</element><help/><hint/><label>Latest</label><language>en</language><name>sn_hr_core_nps_score</name><plural>Latests</plural><sys_class_name>sys_documentation</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:45:35</sys_created_on><sys_id>f12162b34f2a3300ad404a10a310c799</sys_id><sys_mod_count>0</sys_mod_count><sys_name>Latest</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_documentation_sn_hr_core_nps_score_u_latest_en</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:45:35</sys_updated_on><url/><url_target/></sys_documentation></sys_documentation></record_update>]]></payload><payload_hash>2059007616</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>9cdac92fdb2600103dd39235ca961953</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd6446d50000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>HR NPS Score.Latest</target_name><type>Field Label</type><update_domain>global</update_domain><update_guid>4a2162b3a32a3300efc5bb35f27d85c5</update_guid><update_guid_history>4a2162b3a32a3300efc5bb35f27d85c5:2059007616</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_scope_privilege_595c7c044ffe3300ad404a10a310c767</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_scope_privilege"><sys_scope_privilege action="INSERT_OR_UPDATE"><operation>read</operation><source_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</source_scope><status>allowed</status><sys_class_name>sys_scope_privilege</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 12:05:30</sys_created_on><sys_id>595c7c044ffe3300ad404a10a310c767</sys_id><sys_mod_count>0</sys_mod_count><sys_name>asmt_assessment_instance</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_scope_privilege_595c7c044ffe3300ad404a10a310c767</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 12:05:30</sys_updated_on><target_name>asmt_assessment_instance</target_name><target_scope display_value="Global">global</target_scope><target_type>sys_db_object</target_type></sys_scope_privilege></record_update>]]></payload><payload_hash>-1201988845</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>9cdac92fdb2600103dd39235ca961956</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bffd2c25c0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>asmt_assessment_instance</target_name><type>Cross scope privilege</type><update_domain>global</update_domain><update_guid>b9ccb4442dfe3300c5c4908ddf7d953f</update_guid><update_guid_history>b9ccb4442dfe3300c5c4908ddf7d953f:-1201988845</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_5ccdae9d73d113001714cbce2ff6a739</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;public&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;sn_hr_core.hr_ContactUtils&lt;/api_name&gt;&lt;caller_access&gt;1&lt;/caller_access&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;description/&gt;&lt;name&gt;hr_ContactUtils&lt;/name&gt;&lt;script&gt;&lt;![CDATA[var hr_ContactUtils = Class.create();
hr_ContactUtils.prototype = {
    initialize: function() {
    },
	
	removeContact: function(contactId){
		var gr = new GlideRecord("sn_hr_core_contact");
		var isRecordPresent = gr.get(contactId);
		if(isRecordPresent){
			gr.deleteRecord();
		}
		return isRecordPresent;
	},

    type: 'hr_ContactUtils'
};]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-04-05 11:37:19&lt;/sys_created_on&gt;&lt;sys_id&gt;5ccdae9d73d113001714cbce2ff6a739&lt;/sys_id&gt;&lt;sys_mod_count&gt;7&lt;/sys_mod_count&gt;&lt;sys_name&gt;hr_ContactUtils&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_5ccdae9d73d113001714cbce2ff6a739&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 14:30:32&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload><payload_hash>1991006924</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>9cdac92fdb2600103dd39235ca961959</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005789f90000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_ContactUtils</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>16fddd4019727300ba00aa342c038cf7</update_guid><update_guid_history>16fddd4019727300ba00aa342c038cf7:1991006924,5efddd4064727300c2d9855ced7abbf4:1002221227</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_security_acl_252162b34f2a3300ad404a10a310c753</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl"><sys_security_acl action="INSERT_OR_UPDATE"><active>true</active><admin_overrides>true</admin_overrides><advanced>false</advanced><condition/><description>Default access control on sn_hr_core_nps_score</description><name>sn_hr_core_nps_score</name><operation display_value="create">create</operation><script/><sys_class_name>sys_security_acl</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:45:33</sys_created_on><sys_id>252162b34f2a3300ad404a10a310c753</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sn_hr_core_nps_score</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_security_acl_252162b34f2a3300ad404a10a310c753</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:45:33</sys_updated_on><type display_value="record">record</type></sys_security_acl></record_update>]]></payload><payload_hash>-847682956</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>9cdac92fdb2600103dd39235ca96195c</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd643edb0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>sn_hr_core_nps_score</target_name><type>Access Control</type><update_domain>global</update_domain><update_guid>252162b35e2a3300f2642398908a3963</update_guid><update_guid_history>252162b35e2a3300f2642398908a3963:-847682956</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_ui_application_a12162b34f2a3300ad404a10a310c74e</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_ui_application"><sys_ui_application action="INSERT_OR_UPDATE"><active>true</active><hint/><name>HR Case Management</name><order/><roles>sn_hr_core.case_reader</roles><sys_class_name>sys_ui_application</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:45:33</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>a12162b34f2a3300ad404a10a310c74e</sys_id><sys_mod_count>0</sys_mod_count><sys_name>HR Case Management</sys_name><sys_overrides/><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_ui_application_a12162b34f2a3300ad404a10a310c74e</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:45:33</sys_updated_on></sys_ui_application></record_update>]]></payload><payload_hash>1338648324</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>9cdac92fdb2600103dd39235ca96195f</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd643d9c0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>HR Case Management</target_name><type>Application Menu</type><update_domain>global</update_domain><update_guid>6d2162b3bf2a3300985effe411e4994f</update_guid><update_guid_history>6d2162b3bf2a3300985effe411e4994f:1338648324</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_user_role_2e5921114f633300ad404a10a310c7d8</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_user_role"><sys_user_role action="INSERT_OR_UPDATE"><assignable_by/><can_delegate>true</can_delegate><description/><elevated_privilege>false</elevated_privilege><encryption_context/><grantable>true</grantable><includes_roles/><name>sn_hr_core.asc_user</name><requires_subscription>-1</requires_subscription><scoped_admin>false</scoped_admin><suffix>asc_user</suffix><sys_class_name>sys_user_role</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-08-27 19:19:46</sys_created_on><sys_id>2e5921114f633300ad404a10a310c7d8</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sn_hr_core.asc_user</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_user_role_2e5921114f633300ad404a10a310c7d8</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-08-27 19:19:46</sys_updated_on></sys_user_role></record_update>]]></payload><payload_hash>1364484481</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>a4dac92fdb2600103dd39235ca961961</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16cd485127a0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>sn_hr_core.asc_user</target_name><type>Role</type><update_domain>global</update_domain><update_guid>a259a1518a6333009da235da887c94d8</update_guid><update_guid_history>a259a1518a6333009da235da887c94d8:1364484481</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>asmt_metric_definition_63226eb34f2a3300ad404a10a310c762</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="asmt_metric_definition"><asmt_metric_definition action="INSERT_OR_UPDATE"><display>N/A</display><metric/><order/><selected_image/><sys_class_name>asmt_metric_definition</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:50:03</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>63226eb34f2a3300ad404a10a310c762</sys_id><sys_mod_count>0</sys_mod_count><sys_name>N/A</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>asmt_metric_definition_63226eb34f2a3300ad404a10a310c762</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:50:03</sys_updated_on><unselected_image/><value>-1</value></asmt_metric_definition><sys_translated_text action="delete_multiple" query="documentkey=63226eb34f2a3300ad404a10a310c762"/></record_update>]]></payload><payload_hash>-272043317</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d0dac92fdb2600103dd39235ca96193d</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd685e150000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>N/A</target_name><type>Assessment Metric Definition</type><update_domain>global</update_domain><update_guid>eb22e2f3022a33008032aa1b66fb358e</update_guid><update_guid_history>eb22e2f3022a33008032aa1b66fb358e:-272043317</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sysevent_register_325370019f22120047a2d126c42e7065</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sysevent_register"><sysevent_register action="INSERT_OR_UPDATE"><caller_access>1</caller_access><description/><event_name>sn_hr_core_case.email.creation</event_name><fired_by>When a request is created via email</fired_by><queue/><suffix/><sys_class_name>sysevent_register</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2015-03-20 20:16:35</sys_created_on><sys_id>325370019f22120047a2d126c42e7065</sys_id><sys_mod_count>3</sys_mod_count><sys_name>sn_hr_core_case.email.creation</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sysevent_register_325370019f22120047a2d126c42e7065</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:35</sys_updated_on><table>sn_hr_core_case</table></sysevent_register></record_update>]]></payload><payload_hash>-357246057</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d0dac92fdb2600103dd39235ca961940</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005794530000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case</table><target_name>sn_hr_core_case.email.creation</target_name><type>Event Registration</type><update_domain>global</update_domain><update_guid>0ffd118098727300ec0dda7c036a9265</update_guid><update_guid_history>0ffd118098727300ec0dda7c036a9265:-357246057,8ffd1180ef727300b69b0ca3bcb58064:-364335754</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sysevent_register_fa5370019f22120047a2d126c42e7064</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sysevent_register"><sysevent_register action="INSERT_OR_UPDATE"><caller_access>1</caller_access><description/><event_name>sn_hr_core_case.inserted.unassigned</event_name><fired_by/><queue/><suffix/><sys_class_name>sysevent_register</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2013-11-04 11:50:46</sys_created_on><sys_id>fa5370019f22120047a2d126c42e7064</sys_id><sys_mod_count>2</sys_mod_count><sys_name>sn_hr_core_case.inserted.unassigned</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sysevent_register_fa5370019f22120047a2d126c42e7064</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:36</sys_updated_on><table>sn_hr_core_case</table></sysevent_register></record_update>]]></payload><payload_hash>-399348981</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d0dac92fdb2600103dd39235ca961943</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005798270000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case</table><target_name>sn_hr_core_case.inserted.unassigned</target_name><type>Event Registration</type><update_domain>global</update_domain><update_guid>d3fd11802a727300cbd3d64af965a996</update_guid><update_guid_history>d3fd11802a727300cbd3d64af965a996:-399348981,57fd1180bb727300136c6901425ee395:-533053044</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_28a822094f303300ad404a10a310c758</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Disability Benefit</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_disability_benefit</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="HR Benefit" name="sn_hr_core_benefit">9ca8eec54f303300ad404a10a310c7c0</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:33</sys_created_on><sys_id>28a822094f303300ad404a10a310c758</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Disability Benefit</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_28a822094f303300ad404a10a310c758</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:10</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-1458172643</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d0dac92fdb2600103dd39235ca961946</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0057335e0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_disability_benefit</table><target_name>HR Disability Benefit</target_name><type>Table</type><update_domain>global</update_domain><update_guid>30ed5d400f7273002fce88ecb0e295b1</update_guid><update_guid_history>30ed5d400f7273002fce88ecb0e295b1:-1458172643,b4ed5d4087727300a558a4b6f47a2aad:-971757380</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_59a862094f303300ad404a10a310c7ae</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Condition</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_condition</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:34</sys_created_on><sys_id>59a862094f303300ad404a10a310c7ae</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Condition</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_59a862094f303300ad404a10a310c7ae</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:15</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-1598016737</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d0dac92fdb2600103dd39235ca961949</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0057494a0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_condition</table><target_name>HR Condition</target_name><type>Table</type><update_domain>global</update_domain><update_guid>5aed9d401a727300b57b98ae9a64b61f</update_guid><update_guid_history>5aed9d401a727300b57b98ae9a64b61f:-1598016737,16ed9d4006727300f7a495a13f9a821c:361860896</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_8ab86e094f303300ad404a10a310c7ba</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>Who is covered</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_who_is_covered</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:48</sys_created_on><sys_id>8ab86e094f303300ad404a10a310c7ba</sys_id><sys_mod_count>3</sys_mod_count><sys_name>Who is covered</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_8ab86e094f303300ad404a10a310c7ba</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:21</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-1371036384</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d0dac92fdb2600103dd39235ca96194c</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00575dbb0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_who_is_covered</table><target_name>Who is covered</target_name><type>Table</type><update_domain>global</update_domain><update_guid>2fed9d40bf727300d764f4574c2468af</update_guid><update_guid_history>2fed9d40bf727300d764f4574c2468af:-1371036384,e7ed9d40e3727300bc97d2cd1755a8ac:1837578815</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_d0b86a094f303300ad404a10a310c71a</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Employee Relations Case</label><live_feed_enabled>true</live_feed_enabled><name>sn_hr_core_case_relations</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="HR Case" name="sn_hr_core_case">26986ec54f303300ad404a10a310c747</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-09-21 07:47:42</sys_created_on><sys_id>d0b86a094f303300ad404a10a310c71a</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Employee Relations Case</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_d0b86a094f303300ad404a10a310c71a</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:26</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-2121993989</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d0dac92fdb2600103dd39235ca96194f</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005774700000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case_relations</table><target_name>HR Employee Relations Case</target_name><type>Table</type><update_domain>global</update_domain><update_guid>cdfddd40f4727300dfa50eb740b53b5e</update_guid><update_guid_history>cdfddd40f4727300dfa50eb740b53b5e:-2121993989,f4fddd40f8727300bf3d62834e43135b:110454140</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_dictionary_sn_hr_core_nps_score_u_date</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update&gt;&lt;sys_dictionary action="INSERT_OR_UPDATE" element="u_date" table="sn_hr_core_nps_score"&gt;&lt;active&gt;true&lt;/active&gt;&lt;array&gt;false&lt;/array&gt;&lt;array_denormalized&gt;false&lt;/array_denormalized&gt;&lt;attributes/&gt;&lt;audit&gt;false&lt;/audit&gt;&lt;calculation&gt;&lt;![CDATA[(function calculatedFieldValue(current) {

	// Add your code here
	return '';  // return the calculated value

})(current);]]&gt;&lt;/calculation&gt;&lt;choice/&gt;&lt;choice_field/&gt;&lt;choice_table/&gt;&lt;column_label&gt;Date&lt;/column_label&gt;&lt;comments/&gt;&lt;create_roles/&gt;&lt;default_value/&gt;&lt;defaultsort/&gt;&lt;delete_roles/&gt;&lt;dependent/&gt;&lt;dependent_on_field/&gt;&lt;display&gt;false&lt;/display&gt;&lt;dynamic_creation&gt;false&lt;/dynamic_creation&gt;&lt;dynamic_creation_script/&gt;&lt;dynamic_default_value/&gt;&lt;dynamic_ref_qual/&gt;&lt;element&gt;u_date&lt;/element&gt;&lt;element_reference&gt;false&lt;/element_reference&gt;&lt;foreign_database/&gt;&lt;function_definition/&gt;&lt;function_field&gt;false&lt;/function_field&gt;&lt;internal_type display_value=""&gt;glide_date&lt;/internal_type&gt;&lt;mandatory&gt;false&lt;/mandatory&gt;&lt;max_length&gt;40&lt;/max_length&gt;&lt;name&gt;sn_hr_core_nps_score&lt;/name&gt;&lt;next_element/&gt;&lt;primary&gt;false&lt;/primary&gt;&lt;read_only&gt;false&lt;/read_only&gt;&lt;read_roles/&gt;&lt;reference/&gt;&lt;reference_cascade_rule/&gt;&lt;reference_floats&gt;false&lt;/reference_floats&gt;&lt;reference_key/&gt;&lt;reference_qual/&gt;&lt;reference_qual_condition/&gt;&lt;reference_type/&gt;&lt;sizeclass/&gt;&lt;spell_check&gt;false&lt;/spell_check&gt;&lt;staged&gt;false&lt;/staged&gt;&lt;sys_class_name&gt;sys_dictionary&lt;/sys_class_name&gt;&lt;sys_created_by&gt;tim_deniston&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2019-07-17 00:45:32&lt;/sys_created_on&gt;&lt;sys_id&gt;12e0ae734f2a3300ad404a10a310c792&lt;/sys_id&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_name&gt;Date&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_dictionary_sn_hr_core_nps_score_u_date&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 00:45:32&lt;/sys_updated_on&gt;&lt;table_reference&gt;false&lt;/table_reference&gt;&lt;text_index&gt;false&lt;/text_index&gt;&lt;unique&gt;false&lt;/unique&gt;&lt;use_dependent_field&gt;false&lt;/use_dependent_field&gt;&lt;use_dynamic_default&gt;false&lt;/use_dynamic_default&gt;&lt;use_reference_qualifier&gt;simple&lt;/use_reference_qualifier&gt;&lt;virtual&gt;false&lt;/virtual&gt;&lt;widget/&gt;&lt;write_roles/&gt;&lt;xml_view&gt;false&lt;/xml_view&gt;&lt;/sys_dictionary&gt;&lt;/record_update&gt;</payload><payload_hash>-769138794</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d0dac92fdb2600103dd39235ca961952</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd643b0f0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>sn_hr_core_nps_score.u_date</target_name><type>Dictionary</type><update_domain>global</update_domain><update_guid>992162b3582a3300757b51716ce1a342</update_guid><update_guid_history>992162b3582a3300757b51716ce1a342:-769138794</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_restricted_caller_access_0a3378f7db210010de1cfe1b68961989</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_restricted_caller_access"><sys_restricted_caller_access action="INSERT_OR_UPDATE"><operation>read</operation><source>0a3ac670c30202004e44dccdf3d3ae52</source><source_scope display_value="Global">global</source_scope><source_table>sys_security_acl</source_table><source_type>11</source_type><status>2</status><sys_class_name>sys_restricted_caller_access</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-12-12 19:53:38</sys_created_on><sys_id>0a3378f7db210010de1cfe1b68961989</sys_id><sys_mod_count>0</sys_mod_count><sys_name>global</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_restricted_caller_access_0a3378f7db210010de1cfe1b68961989</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-12-12 19:53:38</sys_updated_on><target name="sn_hr_core_service" target_table="sys_db_object">af98aec54f303300ad404a10a310c7ae</target><target_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</target_scope><target_table>sys_db_object</target_table><target_type>1</target_type></sys_restricted_caller_access></record_update>]]></payload><payload_hash>-259409225</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d0dac92fdb2600103dd39235ca961955</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16efbac89950000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>global</target_name><type>Restricted Caller Access Privilege</type><update_domain>global</update_domain><update_guid>4a3378f7452100104af0e115d60dde8b</update_guid><update_guid_history>4a3378f7452100104af0e115d60dde8b:-259409225</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_2cebfaa7c3033200a669d73bf3d3ae01</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;public&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;sn_hr_core.hr_UserCriteriaEvaluation&lt;/api_name&gt;&lt;caller_access&gt;1&lt;/caller_access&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;description&gt;This script include evaluates the number of users matching the given User Criteria.&lt;/description&gt;&lt;name&gt;hr_UserCriteriaEvaluation&lt;/name&gt;&lt;script&gt;&lt;![CDATA[var hr_UserCriteriaEvaluation = Class.create();
hr_UserCriteriaEvaluation.prototype = {
	initialize: function() {
	},

	/* Determine if a User meets a User Criteria
	 *
	 * @param userCriteriaId String sys_id of the user_criteria to check
	 * @param userId String sys_id of the user to check for
	 * @return boolean whether the @param userId meets the @param userCriteriaId
	 */
	checkUserMeetsUserCriteria: function(userCriteriaId, userId) {
		if (!userCriteriaId || !userId)
			return false;

		var userMatchGr;
		var userCriteriaResult = this._getUserCriteriaFilters(userCriteriaId, true, userId);

		if (userCriteriaResult.isMatchAll) {
			if (userCriteriaResult.resultQuery != "") {
				userMatchGr = new GlideRecord("sys_user");
				userMatchGr.addEncodedQuery(userCriteriaResult.resultQuery);
				userMatchGr.addQuery("sys_id", userId);
				userMatchGr.query();
				if (!userMatchGr.hasNext())
					return false;
				if (userCriteriaResult.hasRolesOrGroups)	
					return userCriteriaResult.generatedMatchAllResult;
				return true;	
			}
		} else {				
			if (userCriteriaResult.resultQuery != "" || (userCriteriaResult.resultQuery == "" &amp;&amp; !userCriteriaResult.hasRolesOrGroups)) {
				userMatchGr = new GlideRecord("sys_user");
				userMatchGr.addEncodedQuery(userCriteriaResult.resultQuery);
				userMatchGr.addQuery("sys_id", userId);
				userMatchGr.query();
				if (userMatchGr.hasNext())
					return true;
				if (userCriteriaResult.hasRolesOrGroups)
					return userCriteriaResult.generatedMatchAllResult;
				return false;
			}
		}

		if (userCriteriaResult.hasRolesOrGroups)
			return userCriteriaResult.generatedMatchAllResult;

		return false;
	},

	/* Get object from @function _getUserCriteriaFilters describing users that match a user_criteria
	 *
	 * @param userCriteriaId String sys_id of a user_criteria record
	 * @return Object from @function _getUsersBasedOnQueries, or String encoded query
	 */
	getAllUsersForUserCriteria: function(userCriteriaId){
		if (!userCriteriaId)
			return "sys_idINEMPTY";

		return this._getUserCriteriaFilters(userCriteriaId, false, "");
	},

	/* Get Object from @function _getUserCriteriaFilters describing users that match a user_criteria
	 *
	 * @param userCriteriaId String sys_id of a user_criteria record
	 * @param checkForSingleUser boolean Check user_criteria for a specific user
	 * @param userId (optional) String sys_id of the user to evaluate
	 * @return Object from @function _getUsersBasedOnQueries
	 */
	_getUserCriteriaFilters: function(userCriteriaId, checkForSingleUser, userId) {
		var userCriteriaGr = new GlideRecord('user_criteria');
		userCriteriaGr.addActiveQuery();
		userCriteriaGr.addQuery('sys_id', userCriteriaId);
		userCriteriaGr.addQuery("advanced", false);
		userCriteriaGr.query();
		if (userCriteriaGr.next())
			return this._getUsersBasedOnQueries(userCriteriaGr, checkForSingleUser, userId);
		
		// returns empty records when user criteria is not found or it is an advance user criteria.
		var userCriteriaResult = {
			isMatchAll: false,
			generatedMatchAllResult: true,
			resultQuery: "sys_idISEMPTY",
			hasRolesOrGroups: false,
			shouldHideCount: false
		};
		
		return userCriteriaResult; // get the default return object
	},

	/* Create an object to describe users that match a user_criteria
	 *
	 * @param criteriaGr GlideRecord of a User Criteria
	 * @param checkForSingleUser boolean Check user_criteria for a specific user
	 * @param userId String (optional) sys_id of the user to evaluate
	 * @return Object Descrbing users that match a user_criteria
	 *     {
	 *         isMatchAll boolean 
	 *         generatedMatchAllResult boolean
	 *         resultQuery String
	 *         hasRolesOrGroups boolean
	 *         shouldHideCount boolean
	 *     }
	 */
	_getUsersBasedOnQueries: function(criteriaGr, checkForSingleUser, userId) {
		var userCriteriaResult = {
			isMatchAll: criteriaGr.match_all == 1,
			generatedMatchAllResult: true,
			resultQuery: "",
			hasRolesOrGroups: false,
			shouldHideCount: false
		};
		
		if (!criteriaGr)
			return userCriteriaResult;
		
		var criteriaConditions = [];
		
		// Support 'role' field on user_criteria
		if (criteriaGr.getValue("role")) {
			userCriteriaResult.hasRolesOrGroups = true;
			if (!checkForSingleUser) {
				userCriteriaResult.shouldHideCount = userCriteriaResult.shouldHideCount || this._userRolesExceedsLimit(criteriaGr.role.toString());
				var resultRoleDynamicQuery = "sys_idINjavascript: new sn_hr_core.hr_BulkCaseCreation().getSysIdInRoles('" + criteriaGr.role.toString() + "',false)";
				criteriaConditions.push(resultRoleDynamicQuery);
			} else {
				var userHasAnyCriteriaRole = this._userHasAnyRole(criteriaGr.role.toString(), userId);
				if (userCriteriaResult.isMatchAll)
					userCriteriaResult.generatedMatchAllResult = userHasAnyCriteriaRole &amp;&amp; userCriteriaResult.generatedMatchAllResult;
				else {
					userCriteriaResult.generatedMatchAllResult = userHasAnyCriteriaRole;
					return userCriteriaResult; // TODO Why are we returning early? This should only return early if it's false
				}
			}
		}
		
		// Support 'group' field on user_criteria
		if (criteriaGr.getValue("group")) {
			userCriteriaResult.hasRolesOrGroups = true;
			if (!checkForSingleUser) {
				userCriteriaResult.shouldHideCount = userCriteriaResult.shouldHideCount || this._groupMembersExceedsLimit(criteriaGr.group.toString());
				var resultGroupDynamicQuery = "sys_idINjavascript: new sn_hr_core.hr_BulkCaseCreation().getSysIdInGroups('" + criteriaGr.group.toString() + "',false)";
				criteriaConditions.push(resultGroupDynamicQuery);
			} else {
				var userIsInAnyCriteriaGroup = this._userIsInAnyGroup(criteriaGr.group.toString(), userId);
				if (userCriteriaResult.isMatchAll)
					userCriteriaResult.generatedMatchAllResult = userIsInAnyCriteriaGroup &amp;&amp; userCriteriaResult.generatedMatchAllResult;
				else {
					userCriteriaResult.generatedMatchAllResult = userIsInAnyCriteriaGroup;
					return userCriteriaResult; // TODO Why are we returning early? This should only return early if it's false
				}
			}
		}
		
		// Support 'user' field on user_criteria
		if (criteriaGr.getValue("user"))
			criteriaConditions.push("sys_idIN" + criteriaGr.getValue("user"));
		
		// Support other fields on user_criteria
		var criteriaFields = ["company", "department", "location"];
		for (var i = 0; i &lt; criteriaFields.length; i++)
			if (criteriaGr.getValue(criteriaFields[i]))
				criteriaConditions.push(criteriaFields[i] + "IN" + criteriaGr.getValue(criteriaFields[i]));
		
		userCriteriaResult.resultQuery = criteriaConditions.join(userCriteriaResult.isMatchAll ? "^" : "^OR");

		return userCriteriaResult;
	},

	/* Determine if the numbers of users in the specified groups exceeds the limit  
	 *
	 * @param groupSysIds String Comma separated sys_id's of Groups to count members of
	 * @return boolean If there are too many users in the one of the specified @param groupSysIds
	 */
	_groupMembersExceedsLimit: function(groupSysIds) {
		if ((!gs.hasRole('sn_hr_core.content_reader') &amp;&amp; !gs.hasRole('sn_hr_core.case_writer')) || !gs.getProperty("sn_hr_core.hideUserSelectionCriteriaCount", true))
			return false;
		var groupMemberGa = new GlideAggregate('sys_user_grmember');
		groupMemberGa.addEncodedQuery('group.sys_idIN' + groupSysIds);
		groupMemberGa.addAggregate("COUNT");
		groupMemberGa.query();
		if (groupMemberGa.next())
			return groupMemberGa.getAggregate("COUNT") &gt;= parseInt(gs.getProperty('sn_hr_core.userSelectionCriteriaCountLimit', 5000));
		
		return false;
	},

	/* Determine if there are too many users with one of the specified roles
	 *
	 * @param roleSysIds String Comma separated sys_id's of Roles to count users who have one
	 * @return boolean If there are too many users with one of the specified @param roleSysIds
	 */
	_userRolesExceedsLimit: function(roleSysIds) {
		if ((!gs.hasRole('sn_hr_core.content_reader') &amp;&amp; !gs.hasRole('sn_hr_core.case_writer')) || !gs.getProperty("sn_hr_core.hideUserSelectionCriteriaCount", true))
			return false;
		var userHasRoleGa = new GlideAggregate('sys_user_has_role');
		userHasRoleGa.addEncodedQuery('state=active^role.sys_idIN' + roleSysIds);
		userHasRoleGa.addAggregate("COUNT");
		userHasRoleGa.query();
		if (userHasRoleGa.next())
			return userHasRoleGa.getAggregate("COUNT") &gt;= parseInt(gs.getProperty('sn_hr_core.userSelectionCriteriaCountLimit', 5000));
		
		return false;
	},

	/* Determine if a user is a member of any of the specified groups
	 *
	 * @param groupSysIds String Comma separated sys_id's of Groups to check
	 * @param userId String sys_id of a user
	 * @return boolean If the @param userId is a member of any of the @param groupSysIds
	 */
	_userIsInAnyGroup: function(groupSysIds, userId) {
		if (!groupSysIds || !userId)
			return false;
		
		var groupMemberGr = new GlideRecord('sys_user_grmember');
		groupMemberGr.addEncodedQuery('group.sys_idIN' + groupSysIds);
		groupMemberGr.addEncodedQuery('user.sys_id=' + userId);
		groupMemberGr.setLimit(1);
		groupMemberGr.query();
		return groupMemberGr.hasNext();
	},

	/* Determine if a user has any of the specified roles
	 *
	 * @param roleSysIds String Comma separated sys_id's of Roles to check
	 * @param userId String sys_id of a user
	 * @return boolean if the @param userId has any of the @param roleSysIds
	 */
	_userHasAnyRole: function(roleSysIds, userId){
		if (!roleSysIds || !userId)
			return false;
		
		var userHasRoleGr = new GlideRecord('sys_user_has_role');
		userHasRoleGr.addEncodedQuery('state=active^role.sys_idIN' + roleSysIds);
		userHasRoleGr.addEncodedQuery('user.sys_id=' + userId);
		userHasRoleGr.setLimit(1);
		userHasRoleGr.query();
		return userHasRoleGr.hasNext();
	},

	type: 'hr_UserCriteriaEvaluation'
};]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-06-05 19:51:24&lt;/sys_created_on&gt;&lt;sys_id&gt;2cebfaa7c3033200a669d73bf3d3ae01&lt;/sys_id&gt;&lt;sys_mod_count&gt;60&lt;/sys_mod_count&gt;&lt;sys_name&gt;hr_UserCriteriaEvaluation&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_2cebfaa7c3033200a669d73bf3d3ae01&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 14:30:31&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload><payload_hash>1130910286</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d0dac92fdb2600103dd39235ca961958</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005783f30000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_UserCriteriaEvaluation</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>b5fddd40de727300c51e0f2499ef44c7</update_guid><update_guid_history>b5fddd40de727300c51e0f2499ef44c7:1130910286,fdfddd40c4727300af8e8ce53d75cec4:-1484961555</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_9d51d33b0b30320036e62c7885673ad6</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;public&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;sn_hr_core.HRCoe&lt;/api_name&gt;&lt;caller_access&gt;1&lt;/caller_access&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;description/&gt;&lt;name&gt;HRCoe&lt;/name&gt;&lt;script&gt;&lt;![CDATA[var HRCoe = Class.create();

HRCoe.prototype = {
    initialize: function() {
    },
	
	process: function() {
		var tables = [];
		var inactiveTables = gs.getProperty("sn_hr_core.inactive_tables","").split(",");
		
		// Add non-inactive sn_hr_core_case tables
		var caseTables = hr.TABLE_CASE_EXTENSIONS;
		for (var i = 0; i &lt; caseTables.length; i++)
			if (inactiveTables.indexOf(caseTables[i]) == -1)
				tables.push(caseTables[i].toString());
		
		return tables;
	},
	
	getThisScopeCOEs : function (scope) {
		var result = [];
		var caseTables = hr.TABLE_CASE_EXTENSIONS; 
		for (var t in caseTables) {
			var table = new GlideRecord('sys_db_object');
			table.addQuery('name', caseTables[t]);
			if (scope != 'global')
				table.addQuery('sys_scope',scope);
			table.query();
			if (table.next())
				result.push(table.name);
		}
		return result.join(',');
	},

    type: 'HRCoe'
};]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-02-14 19:50:01&lt;/sys_created_on&gt;&lt;sys_id&gt;9d51d33b0b30320036e62c7885673ad6&lt;/sys_id&gt;&lt;sys_mod_count&gt;19&lt;/sys_mod_count&gt;&lt;sys_name&gt;HRCoe&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_9d51d33b0b30320036e62c7885673ad6&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 14:30:33&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload><payload_hash>-1784943073</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d0dac92fdb2600103dd39235ca96195b</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00578e270000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>HRCoe</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>66fd1180d772730009e9932ba373c92c</update_guid><update_guid_history>66fd1180d772730009e9932ba373c92c:-1784943073,e6fd1180be727300c488e4f088cde11d:412234494</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_security_acl_fd2162b34f2a3300ad404a10a310c784</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl"><sys_security_acl action="INSERT_OR_UPDATE"><active>true</active><admin_overrides>true</admin_overrides><advanced>false</advanced><condition/><description>Default access control on sn_hr_core_nps_score</description><name>sn_hr_core_nps_score</name><operation display_value="delete">delete</operation><script/><sys_class_name>sys_security_acl</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:45:34</sys_created_on><sys_id>fd2162b34f2a3300ad404a10a310c784</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sn_hr_core_nps_score</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_security_acl_fd2162b34f2a3300ad404a10a310c784</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:45:34</sys_updated_on><type display_value="record">record</type></sys_security_acl></record_update>]]></payload><payload_hash>-994929070</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d0dac92fdb2600103dd39235ca96195e</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd6441fd0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>sn_hr_core_nps_score</target_name><type>Access Control</type><update_domain>global</update_domain><update_guid>312162b3182a330083a8752293f79e88</update_guid><update_guid_history>312162b3182a330083a8752293f79e88:-994929070</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_ui_view_aa896d114f633300ad404a10a310c7f7</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ui_view"><sys_ui_view action="INSERT_OR_UPDATE"><group/><hidden>false</hidden><name>case_creation</name><roles/><sys_class_name>sys_ui_view</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-08-27 19:20:36</sys_created_on><sys_id>aa896d114f633300ad404a10a310c7f7</sys_id><sys_mod_count>0</sys_mod_count><sys_name>Case_creation</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_ui_view_aa896d114f633300ad404a10a310c7f7</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-08-27 19:20:36</sys_updated_on><title>Case_creation</title><user/></sys_ui_view></record_update>]]></payload><payload_hash>404532852</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d0dac92fdb2600103dd39235ca961961</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16cd485d3e60000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>Case_creation</target_name><type>UI View</type><update_domain>global</update_domain><update_guid>36896d11ad633300eb0e84fdeae40ff9</update_guid><update_guid_history>36896d11ad633300eb0e84fdeae40ff9:404532852</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>asmt_metric_definition_251262f34f2a3300ad404a10a310c700</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="asmt_metric_definition"><asmt_metric_definition action="INSERT_OR_UPDATE"><display>10</display><metric display_value="">50e1aeb34f2a3300ad404a10a310c764</metric><order>10</order><selected_image/><sys_class_name>asmt_metric_definition</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:49:39</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>251262f34f2a3300ad404a10a310c700</sys_id><sys_mod_count>0</sys_mod_count><sys_name>10</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>asmt_metric_definition_251262f34f2a3300ad404a10a310c700</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:49:39</sys_updated_on><unselected_image/><value>10</value></asmt_metric_definition><sys_translated_text action="delete_multiple" query="documentkey=251262f34f2a3300ad404a10a310c700"/></record_update>]]></payload><payload_hash>-981851235</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d4dac92fdb2600103dd39235ca96193c</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd67ff840000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>10</target_name><type>Assessment Metric Definition</type><update_domain>global</update_domain><update_guid>251262f31f2a33003788d8f10926ba01</update_guid><update_guid_history>251262f31f2a33003788d8f10926ba01:-981851235</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sysevent_register_0f8278a3537232003585c3c606dc345c</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sysevent_register"><sysevent_register action="INSERT_OR_UPDATE"><caller_access>1</caller_access><description>Fired when a case agent takes an action to resolve a rejected approval</description><event_name>sn_hr_core.approval_rejection_resolved</event_name><fired_by>Workflow</fired_by><queue/><suffix>approval_rejection_resolved</suffix><sys_class_name>sysevent_register</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-05-23 23:34:56</sys_created_on><sys_id>0f8278a3537232003585c3c606dc345c</sys_id><sys_mod_count>3</sys_mod_count><sys_name>sn_hr_core.approval_rejection_resolved</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sysevent_register_0f8278a3537232003585c3c606dc345c</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:35</sys_updated_on><table>sn_hr_core_case</table></sysevent_register></record_update>]]></payload><payload_hash>1860975387</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d4dac92fdb2600103dd39235ca96193f</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005793560000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case</table><target_name>sn_hr_core.approval_rejection_resolved</target_name><type>Event Registration</type><update_domain>global</update_domain><update_guid>76fd11808f72730034d894359f28c650</update_guid><update_guid_history>76fd11808f72730034d894359f28c650:1860975387,f6fd11807a727300107974d82d41344f:906562524</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sysevent_register_dfb59eb553133200d901a7e6a11c084d</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sysevent_register"><sysevent_register action="INSERT_OR_UPDATE"><caller_access>1</caller_access><description>HR Approval subflow fires this event when it closes a case incomplete due to missing data</description><event_name>sn_hr_core.closed_incomplete_missing</event_name><fired_by/><queue/><suffix>closed_incomplete_missing</suffix><sys_class_name>sysevent_register</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-06-12 16:50:48</sys_created_on><sys_id>dfb59eb553133200d901a7e6a11c084d</sys_id><sys_mod_count>3</sys_mod_count><sys_name>sn_hr_core.closed_incomplete_missing</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sysevent_register_dfb59eb553133200d901a7e6a11c084d</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:36</sys_updated_on><table>sn_hr_core_case</table></sysevent_register></record_update>]]></payload><payload_hash>1093951964</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d4dac92fdb2600103dd39235ca961942</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005797470000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case</table><target_name>sn_hr_core.closed_incomplete_missing</target_name><type>Event Registration</type><update_domain>global</update_domain><update_guid>c3fd1180747273009fe52cb6a400da8d</update_guid><update_guid_history>c3fd1180747273009fe52cb6a400da8d:1093951964,47fd1180db72730031dd1a61d276c68c:966155387</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_14b86a094f303300ad404a10a310c751</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>false</actions_access><alter_access>false</alter_access><caller_access>1</caller_access><client_scripts_access>false</client_scripts_access><configuration_access>false</configuration_access><create_access>false</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>Badge</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_badge</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="Application File" name="sys_metadata">8a12332181131300aadba4a47c598e5e</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2019-04-12 12:25:21</sys_created_on><sys_id>14b86a094f303300ad404a10a310c751</sys_id><sys_mod_count>1</sys_mod_count><sys_name>Badge</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_14b86a094f303300ad404a10a310c751</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:08</sys_updated_on><update_access>false</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-725252211</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d4dac92fdb2600103dd39235ca961945</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00572cb10000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_badge</table><target_name>Badge</target_name><type>Table</type><update_domain>global</update_domain><update_guid>28ed5d408b727300e55dd53f66271e6f</update_guid><update_guid_history>28ed5d408b727300e55dd53f66271e6f:-725252211,10ed5d40cf727300eb1da8a147bb866c:-1330023468</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_4cb82a094f303300ad404a10a310c787</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Health Benefit</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_health_benefit</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="HR Benefit" name="sn_hr_core_benefit">9ca8eec54f303300ad404a10a310c7c0</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:43</sys_created_on><sys_id>4cb82a094f303300ad404a10a310c787</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Health Benefit</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_4cb82a094f303300ad404a10a310c787</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:14</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-1089976419</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d4dac92fdb2600103dd39235ca961948</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0057441f0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_health_benefit</table><target_name>HR Health Benefit</target_name><type>Table</type><update_domain>global</update_domain><update_guid>c2ed9d404d72730079b5f381a6373407</update_guid><update_guid_history>c2ed9d404d72730079b5f381a6373407:-1089976419,79ed9d406c72730052dec2a88795c803:-90990148</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_7aa866094f303300ad404a10a310c78b</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>false</actions_access><alter_access>false</alter_access><caller_access>1</caller_access><client_scripts_access>false</client_scripts_access><configuration_access>false</configuration_access><create_access>false</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Service Based Case Configuration</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_config_case</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="Application File" name="sys_metadata">8a12332181131300aadba4a47c598e5e</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2019-04-12 12:25:15</sys_created_on><sys_id>7aa866094f303300ad404a10a310c78b</sys_id><sys_mod_count>1</sys_mod_count><sys_name>HR Service Based Case Configuration</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_7aa866094f303300ad404a10a310c78b</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:19</sys_updated_on><update_access>false</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>204566595</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d4dac92fdb2600103dd39235ca96194b</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005758f40000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_config_case</table><target_name>HR Service Based Case Configuration</target_name><type>Table</type><update_domain>global</update_domain><update_guid>53ed9d40ae7273008d646cd3adcee89c</update_guid><update_guid_history>53ed9d40ae7273008d646cd3adcee89c:204566595,4bed9d4007727300ea1a916002e91198:547216954</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_cba8a6094f303300ad404a10a310c73e</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>true</delete_access><extension_model/><is_extendable>false</is_extendable><label>PDF Template Mapping</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_pdf_template_mapping</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:40</sys_created_on><sys_id>cba8a6094f303300ad404a10a310c73e</sys_id><sys_mod_count>3</sys_mod_count><sys_name>PDF Template Mapping</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_cba8a6094f303300ad404a10a310c73e</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:25</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-38787927</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d4dac92fdb2600103dd39235ca96194e</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00576e850000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_pdf_template_mapping</table><target_name>PDF Template Mapping</target_name><type>Table</type><update_domain>global</update_domain><update_guid>68fddd40bd7273009c8c6f85dff2bc17</update_guid><update_guid_history>68fddd40bd7273009c8c6f85dff2bc17:-38787927,24fddd40077273005490591719c00614:2056753514</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_dictionary_sn_hr_core_case_asc_null</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update&gt;&lt;sys_dictionary action="INSERT_OR_UPDATE" element="" extends="sn_hr_core_case" table="sn_hr_core_case_asc"&gt;&lt;active&gt;true&lt;/active&gt;&lt;array&gt;false&lt;/array&gt;&lt;array_denormalized&gt;false&lt;/array_denormalized&gt;&lt;attributes/&gt;&lt;audit&gt;false&lt;/audit&gt;&lt;calculation&gt;&lt;![CDATA[(function calculatedFieldValue(current) {

	// Add your code here
	return '';  // return the calculated value

})(current);]]&gt;&lt;/calculation&gt;&lt;choice/&gt;&lt;choice_field/&gt;&lt;choice_table/&gt;&lt;column_label/&gt;&lt;comments/&gt;&lt;create_roles/&gt;&lt;default_value/&gt;&lt;defaultsort/&gt;&lt;delete_roles/&gt;&lt;dependent/&gt;&lt;dependent_on_field/&gt;&lt;display&gt;false&lt;/display&gt;&lt;dynamic_creation&gt;false&lt;/dynamic_creation&gt;&lt;dynamic_creation_script/&gt;&lt;dynamic_default_value/&gt;&lt;dynamic_ref_qual/&gt;&lt;element/&gt;&lt;element_reference&gt;false&lt;/element_reference&gt;&lt;foreign_database/&gt;&lt;function_definition/&gt;&lt;function_field&gt;false&lt;/function_field&gt;&lt;internal_type display_value="Collection"&gt;collection&lt;/internal_type&gt;&lt;mandatory&gt;false&lt;/mandatory&gt;&lt;max_length&gt;40&lt;/max_length&gt;&lt;name&gt;sn_hr_core_case_asc&lt;/name&gt;&lt;next_element/&gt;&lt;primary&gt;false&lt;/primary&gt;&lt;read_only&gt;false&lt;/read_only&gt;&lt;read_roles/&gt;&lt;reference/&gt;&lt;reference_cascade_rule/&gt;&lt;reference_floats&gt;false&lt;/reference_floats&gt;&lt;reference_key/&gt;&lt;reference_qual/&gt;&lt;reference_qual_condition/&gt;&lt;reference_type/&gt;&lt;sizeclass/&gt;&lt;spell_check&gt;false&lt;/spell_check&gt;&lt;staged&gt;false&lt;/staged&gt;&lt;sys_class_name&gt;sys_dictionary&lt;/sys_class_name&gt;&lt;sys_created_by&gt;tim_deniston&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2019-08-27 19:19:47&lt;/sys_created_on&gt;&lt;sys_id&gt;3259e1514f633300ad404a10a310c70f&lt;/sys_id&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_name&gt;sn_hr_core_case_asc&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_dictionary_sn_hr_core_case_asc_null&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-08-27 19:19:47&lt;/sys_updated_on&gt;&lt;table_reference&gt;false&lt;/table_reference&gt;&lt;text_index&gt;false&lt;/text_index&gt;&lt;unique&gt;false&lt;/unique&gt;&lt;use_dependent_field&gt;false&lt;/use_dependent_field&gt;&lt;use_dynamic_default&gt;false&lt;/use_dynamic_default&gt;&lt;use_reference_qualifier&gt;simple&lt;/use_reference_qualifier&gt;&lt;virtual&gt;false&lt;/virtual&gt;&lt;widget/&gt;&lt;write_roles/&gt;&lt;xml_view&gt;false&lt;/xml_view&gt;&lt;/sys_dictionary&gt;&lt;/record_update&gt;</payload><payload_hash>-2041125657</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d4dac92fdb2600103dd39235ca961951</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16cd4851a110000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case_asc</table><target_name>ASC</target_name><type>Dictionary</type><update_domain>global</update_domain><update_guid>8b59e151cf63330077f080a67a9adb23</update_guid><update_guid_history>8b59e151cf63330077f080a67a9adb23:-2041125657</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_documentation_sn_hr_core_nps_score__en</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update><sys_documentation element="" label="HR NPS Score" language="en" table="sn_hr_core_nps_score"><sys_documentation action="INSERT_OR_UPDATE"><element/><help/><hint/><label>HR NPS Score</label><language>en</language><name>sn_hr_core_nps_score</name><plural>HR NPS Scores</plural><sys_class_name>sys_documentation</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:45:34</sys_created_on><sys_id>b12162b34f2a3300ad404a10a310c794</sys_id><sys_mod_count>0</sys_mod_count><sys_name>HR NPS Score</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_documentation_sn_hr_core_nps_score__en</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:45:34</sys_updated_on><url/><url_target/></sys_documentation></sys_documentation></record_update>]]></payload><payload_hash>1316654992</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d4dac92fdb2600103dd39235ca961954</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd6446950000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>HR NPS Score</target_name><type>Field Label</type><update_domain>global</update_domain><update_guid>c62162b3912a33008bdae14e06c52cc3</update_guid><update_guid_history>c62162b3912a33008bdae14e06c52cc3:1316654992</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_client_ac7232a8c3331200b599b4ad81d3ae4c</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="sys_script_client"&gt;&lt;sys_script_client action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;applies_extended&gt;true&lt;/applies_extended&gt;&lt;condition/&gt;&lt;description/&gt;&lt;field&gt;subject_person&lt;/field&gt;&lt;global&gt;true&lt;/global&gt;&lt;isolate_script&gt;false&lt;/isolate_script&gt;&lt;messages/&gt;&lt;name&gt;Highlight VIP Subject person&lt;/name&gt;&lt;order/&gt;&lt;script&gt;&lt;![CDATA[function onChange(control, oldValue, newValue, isLoading, isTemplate) {
	g_form.getReference('subject_person',setColor);	
}
function setColor(subjectPerson) {
	var subjectPersonField = g_form.getElement('sys_display.' + g_form.getTableName() + '.subject_person');
	if (subjectPerson.u_nps_rating == '1'){
		subjectPersonField.setStyle({color : "red"});
		g_form.addDecoration('subject_person', 'icon-star', 'VIP');


	}
	else 
		subjectPersonField.setStyle({color : ""});
}]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_client&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2016-06-01 01:52:27&lt;/sys_created_on&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;ac7232a8c3331200b599b4ad81d3ae4c&lt;/sys_id&gt;&lt;sys_mod_count&gt;10&lt;/sys_mod_count&gt;&lt;sys_name&gt;Highlight VIP Subject person&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_client_ac7232a8c3331200b599b4ad81d3ae4c&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 15:00:05&lt;/sys_updated_on&gt;&lt;table&gt;sn_hr_core_case&lt;/table&gt;&lt;type&gt;onChange&lt;/type&gt;&lt;ui_type&gt;0&lt;/ui_type&gt;&lt;view/&gt;&lt;/sys_script_client&gt;&lt;/record_update&gt;</payload><payload_hash>-407423743</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d4dac92fdb2600103dd39235ca961957</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c007296320000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case</table><target_name>Highlight VIP Subject person</target_name><type>Client Script</type><update_domain>global</update_domain><update_guid>47b4ad08de727300927ce273c919b16a</update_guid><update_guid_history>47b4ad08de727300927ce273c919b16a:-407423743,8393a5c4de7273005fceec2aacc02160:1078302638,cb53a1c49e72730044c4a229d43f2d71:1066630617,220321840272730060ca1c341169f278:-1240679575,9a8269844872730024f0daf334285e7e:1566346856,da8269844a7273007426bbb22bd21f7c:-1140242815</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_765370019f22120047a2d126c42e7000</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;
  &lt;sys_script_include action="INSERT_OR_UPDATE"&gt;
    &lt;access&gt;public&lt;/access&gt;
    &lt;active&gt;true&lt;/active&gt;
    &lt;api_name&gt;sn_hr_core.hr_Task&lt;/api_name&gt;
    &lt;caller_access&gt;2&lt;/caller_access&gt;
    &lt;client_callable&gt;false&lt;/client_callable&gt;
    &lt;description/&gt;
    &lt;name&gt;hr_Task&lt;/name&gt;
    &lt;script&gt;&lt;![CDATA[var hr_Task = Class.create();

hr_Task.prototype = {
    initialize: function(_gr, _gs) {
        //this._log = new GSLog(hr.LOG, this.type).setLog4J();
        this._gr = _gr;
        this._gs = _gs || gs;

    },

    isClosed: function(record) {
        return (record.state == 3) || (record.state == 4) || (record.state == 7);
    },

    clearDependencies: function(taskRecord) {
        // TODO: clear dependencies
    },
  
    /**
     * Return true if:
     *   the user has case writer role
     *   the task status is assigned or ready
     *   the task isn't already assigned to the user
     *   if there is an assignment group, the user is in the assignment group
     * @return boolean user can assign the task to self
     */
    canAssignToSelf: function() {
        if (!this._gr)
            return false;

        if (this._gr.assigned_to == gs.getUserID())
            return false; // already assigned to user so return false

        var assignableState = this._gr.state == hr_Constants.TASK_ASSIGNED || this._gr.state == hr_Constants.TASK_PENDING_DISPATCH;
        if (!assignableState)
            return false;

        var hasRole = this._gs.hasRole("sn_hr_core.case_writer");
        if (!hasRole)
            return false;

        if (this._gr.assignment_group.nil()) // no longer requiring an assignment group to be set
            return true;

        var user_group = new GlideRecord("sys_user_grmember");
        user_group.addQuery("user", this._gs.getUserID());
        user_group.addQuery("group", this._gr.assignment_group.toString());
        user_group.query();
        var userIsAgentForGroup = user_group.hasNext();

        return userIsAgentForGroup;
    },

    // helper method for read/write ACLs
    canEditTask: function(userId) {
		var user;
		if (gs.nil(userId)) {
			if (new hr_Utils().checkUserHasRole(hr.ROLE_HR_CASE_WRITER))
				return true;
			
			userId = this._gs.getUserID();
			user = this._gs.getUser();
		} else {
			var roles = new hr_Utils().getRolesOfUser(userId);
			if (this._arrayContains(roles, hr.ROLE_HR_CASE_WRITER))
				return true;
		}

        // Check if it's the user who opened the case
        if (!gs.nil(this._gr.parent) &amp;&amp; this._gr.parent.opened_by == userId)
            return true;

        // Check if it's the user the case is opened for
        if (!gs.nil(this._gr.parent) &amp;&amp; this._gr.parent.opened_for == userId)
            return true;

        // Check if the user belongs to the assignment group
		if (user) {
			if (!gs.nil(this._gr.assignment_group) &amp;&amp; user.isMemberOf(this._gr.assignment_group.toString()))
				return true;
		} else {
			if (!gs.nil(this._gr.assignment_group) &amp;&amp; new global.HRSecurityUtils().isMemberOfGroup(userId, this._gr.assignment_group.toString()))
				return true;
		}
		
        // Check if the task is assigned to the user
        if (!gs.nil(this._gr.assigned_to) &amp;&amp; this._gr.assigned_to == userId)
            return true;

        // Check if it's a user in the watch list field
        if (!gs.nil(this._gr.watch_list) &amp;&amp; this._gr.watch_list.indexOf(userId) &gt; -1)
            return true;

        return false;
    },
	
	_arrayContains : function(ary, seed) {
		for (var i = 0; i &lt; ary.length; i++)
			if (ary[i].trim() === seed)
				return true;
		return false;
	},
	
    updateAttachments: function(current) {
        var taskAttachments = new GlideSysAttachment().copy(current.sys_class_name, current.sys_id, current.parent.sys_class_name, current.parent.sys_id);

        if (taskAttachments.length &gt; 0) {

            if (new GlidePluginManager().isActive('com.sn_employee_document_management')) {
                for (var i = 0; i &lt; taskAttachments.length; i++) {
                    var IDs = taskAttachments[i].split(',');
                    var attachmentCopyRecord = new GlideRecord('sn_hr_ef_attachment_tracking');
                    attachmentCopyRecord.initialize();
                    attachmentCopyRecord.original = IDs[0];
                    attachmentCopyRecord.copy = IDs[1];
                    attachmentCopyRecord.insert();
                }
            }

            current.comments = gs.getMessage('File attachment was successful.');
            current.update();
        }
    },

    canSignDocument: function() {
        //Task must be active, assigned to user, and e_signature type
        if (this._gr.assigned_to != this._gs.getUserID() || !this._gr.active || this._gr.hr_task_type != 'e_signature')
            return false;

        //State must be Ready or Work In Progress
        if (this._gr.state != 10 &amp;&amp; this._gr.state != 18)
            return false;

        //There must be a published Document Revision
        var docRev = new GlideRecord('dms_document_revision');
        docRev.addQuery('document', this._gr.hr_task_document);
        docRev.addQuery('stage', 'published');
        docRev.addActiveQuery();
        docRev.query();

        return docRev.hasNext();
    },

    canSignGeneratedDocument: function() {
        //Task must be active, assigned to user, and has the proper type
        if (this._gr.assigned_to != this._gs.getUserID() || !this._gr.active || this._gr.hr_task_type != 'sign_document')
            return false;

        //State must be Ready or Work In Progress
        if (this._gr.state != 10 &amp;&amp; this._gr.state != 18)
            return false;

        //The task must have a PDF template
        if (this._gr.parent.ref_sn_hr_core_case.pdf_template == '')
            return false;

        //Task must have an associated Pdf_draft or draft_document
        if (!this.hasDraftDocument())
            return false;

        return true;
    },
	
    canESign: function() {
        if (this._gr.assigned_to != this._gs.getUserID() || !this._gr.active || this._gr.hr_task_type != 'e_sign')
            return false;
		if(!this._gr.sn_esign_esignature_configuration) 
			return false;
		if(this._gr.sn_esign_esignature_configuration.document_type == "document_template")
			return this.canESignDocumentTemplate();
		else
			return new sn_esign.esign_task(this._gr,this._gs).canSignDocument();
    },		
	
    canESignDocumentTemplate: function() {
        //Task must be active, assigned to user, and has the proper type
        if (this._gr.assigned_to != this._gs.getUserID() || !this._gr.active || this._gr.hr_task_type != 'e_sign')
            return false;

        //State must be Ready or Work In Progress
        if (this._gr.state != 10 &amp;&amp; this._gr.state != 18 &amp;&amp; this._gr.state != 2)
            return false;

		if(!this._gr.sn_esign_esignature_configuration) 
			return false;

		
		if(!(this._gr.sn_esign_esignature_configuration.document_type == "document_template" &amp;&amp; this._gr.sn_esign_esignature_configuration.signature_type == "signature"))	
			return false;	
		
        //The task must have a PDF template
        if (!this._gr.parent.ref_sn_hr_core_case.pdf_template)
            return false;

        //Task must have an associated Pdf_draft or draft_document
        if (!this.hasDraftDocument())
            return false;

        return true;
    },	

    hasDraftDocument: function() {
        var hasDraftDocument = new GeneralHRForm().hasDraftDocument(this._gr.sys_class_name, this._gr.getUniqueValue());
        var hasDraftPDF = new hr_PdfUtils().isValidPdfTemplate(this._gr.sys_class_name, this._gr.getUniqueValue());
        return (hasDraftPDF || hasDraftDocument);
    },

    canAuthenticate: function() {
        //Task must be active, assigned to user, and credential type
        if (this._gr.assigned_to != this._gs.getUserID() || !this._gr.active || this._gr.hr_task_type != 'credential')
            return false;

        //State must be Ready or Work In Progress
        if (this._gr.state != 10 &amp;&amp; this._gr.state != 18)
            return false;

        //There must be a published Document Revision
        var docRev = new GlideRecord('dms_document_revision');
        docRev.addQuery('document', this._gr.hr_task_document);
        docRev.addQuery('stage', 'published');
        docRev.addActiveQuery();
        docRev.query();

        return docRev.hasNext();
    },

    canCompleteURLTask: function() {
        //Task must be active and assigned to user
        if (this._gr.assigned_to != this._gs.getUserID() || !this._gr.active)
            return false;

        //State must be Ready or Work In Progress
        if (this._gr.state != 10 &amp;&amp; this._gr.state != 18)
            return false;

        //The URL must be defined
        return this._gr.url != '';
    },

    canCompleteSurveyTask: function() {
        //Task must be active and assigned to user
        if (this._gr.assigned_to != this._gs.getUserID() || !this._gr.active)
            return false;

        //State must be Ready or Work In Progress
        if (this._gr.state != 10 &amp;&amp; this._gr.state != 18)
            return false;

        //The Survey Instance must be defined
        return this._gr.survey_instance != '';
    },

    canCompleteAttachmentTask: function() {
        //Task must be active, assigned to user, and URL type
        if (this._gr.assigned_to != this._gs.getUserID() || !this._gr.active || this._gr.hr_task_type != 'upload_documents')
            return false;

        //State must be Ready or Work In Progress
        if (this._gr.state != 10 &amp;&amp; this._gr.state != 18)
            return false;

        return true;
    },

    //This method is being kept for backwards compatibility for a previous release
    getMyTasks: function(userId) {
        var gr = new GlideRecordSecure("sn_hr_core_task");
        gr.addQuery("state", "!=", "1");
        gr.addQuery("parent.state", "!=", "1");
        gr.addQuery("parent.active", "true");
        gr.addQuery("assigned_to", userId);
        gr.orderBy('due_date');
        gr.orderByDesc('sys_created_on');
        gr.query();
        var now = new GlideDateTime();
        var offset = now.getTZOffset();
        now = now.getNumericValue() + offset;
        var tasks = [];
        while (gr.next()) {
            var task = {};
            task.sys_id = gr.getValue("sys_id");
            task.case_id = gr.getValue("parent");
            task.short_description = gr.getValue("short_description");
            task.number = gr.getValue("number");
            task.order = gr.getValue("order");
            task.template = gr.getValue("template");
            task.state = gr.getValue("state");
            task.finished = gr.getValue("active") == "0";
            task.opened_by = gr.getValue("opened_by");
            task.assigned_to = gr.getValue("assigned_to");
            task.updated = gr.getValue("sys_updated_on");
            task.due_date = gr.getValue("due_date");
            task.closed_at = gr.getValue("closed_at");
            task.hr_task_type = gr.getValue("hr_task_type");
            task.url = gr.getDisplayValue("url");
            task.parent = gr.getValue("parent");
            task.isOverDue = now &gt; new GlideDateTime(gr.due_date).getNumericValue();
            task.assigned_to_me = gr.getValue("assigned_to") == userId;
            tasks.push(task);
        }
        return tasks;
    },

    cloneTask: function(original, cloneAsFollowOn) {
        var className = original.sys_class_name + '';
        // Clone this task to a new, mostly identical, task
        cloneAsFollowOn = cloneAsFollowOn === undefined ? false : cloneAsFollowOn;

        var includedFields = ['parent', 'location', 'hr_task_type', 'hr_service', 'sc_cat_item', 'order_guide', 'hr_task_document', 'survey', 'url', 'short_description', 'description', 'rich_description', 'optional', 'assignment_group', 'task_support_team', 'parent_case_users', 'groups', 'queue', 'skills', 'sys_domain'];

        var clone = new GlideRecord(className);
        clone.cloned_from = original.sys_id;
        clone.state = 1; // Default state is Draft
        clone.work_notes = gs.getMessage("Cloned from HR Task {0}", original.number);
        includedFields.forEach(function(field) {
            clone[field] = original[field];
        });
        clone.insert();

        // If the original was to be cloned as a follow on, set the "has follow on" flag
        if (cloneAsFollowOn) {
            original.has_follow_on = true;
            original.update();
        }

        // Return the newly cloned record
        return clone;

        // The following fields are not copied
        /*
		Acknowledged on
		Active
		Activity Due
		Actual duration
		Actual Travel Duration
		Actual Travel Start
		Actual Service end
		Actual Service start
		Approval
		Approval History
		Approval Set
		Close Notes
		Closed
		Closed By
		cmdb_ci
		Comments and Service notes
		Company
		Contact Type
		Contract
		Correlation ID
		Correlation display
		Created
		Created By
		Delivery Plan
		Delivery task
		Dispatched On
		Due Date
		Escelation
		Followup
		Group List
		Impact
		Knowledge
		Made SLA
		Number
		Opened
		Opened By
		Order
		Priority
		Reassignment count
		SLA Due
		task type
		Time serviced
		Updated
		Updated By
		Updates
		Upon approval
		Upon reject
		Urgency
		User input
		Watch List
		Work Notes
		Work Notes list
 		*/
    },

    getDueDays: function(dueDate) {
        if (!dueDate)
            return 'later'; //Assuming task with no due date can be done later

        var due_date = new GlideDateTime(dueDate);
        var gdTaskDueDate = due_date.getLocalDate();
        var gdLocal = new GlideDateTime().getLocalDate();
        return GlideDate.subtract(gdLocal, gdTaskDueDate).getDayPart();
    },
	
	/* Generate a URL link for a given to-do either in native UI or service portal
	@param : string - table name
	@param: string - sys id of the record associated with the table
	@output : string - url
	*/
	getToDoURL: function(tableName, recordSysId) {
		if(gs.nil(tableName) || gs.nil(recordSysId))
			return null;
		var gr = new GlideRecord(tableName);
		if (!gr.get(recordSysId))
			return null;
		
		// Display the to-do on service portal if HR SP plugin is active
		if (new GlidePluginManager().isActive("com.sn_hr_service_portal")) 
			return new sn_hr_sp.todoPageUtils().getTodoURL(gr);
		// If not, display the to-do in native UI
		return gs.getProperty("glide.servlet.uri") + 'nav_to.do?uri=' + gr.getTableName() + '.do?sys_id=' + recordSysId + '&amp;sysparm_stack=' + gr.getTableName() + '_list.do';
	},

    type: "hr_Task"
};]]&gt;&lt;/script&gt;
    &lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;
    &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
    &lt;sys_created_on&gt;2013-07-17 10:52:41&lt;/sys_created_on&gt;
    &lt;sys_id&gt;765370019f22120047a2d126c42e7000&lt;/sys_id&gt;
    &lt;sys_mod_count&gt;285&lt;/sys_mod_count&gt;
    &lt;sys_name&gt;hr_Task&lt;/sys_name&gt;
    &lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;
    &lt;sys_policy/&gt;
    &lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;
    &lt;sys_update_name&gt;sys_script_include_765370019f22120047a2d126c42e7000&lt;/sys_update_name&gt;
    &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
    &lt;sys_updated_on&gt;2019-11-21 22:31:05&lt;/sys_updated_on&gt;
  &lt;/sys_script_include&gt;
&lt;/record_update&gt;</payload><payload_hash>-1840781356</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>true</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d4dac92fdb2600103dd39235ca96195a</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00578bf40000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_Task</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>c876092bd9260010be4cdabec327cb9c</update_guid><update_guid_history>c876092bd9260010be4cdabec327cb9c:-1840781356,9efd1180f9727300fa8d202b8935900f:2115256746,d6fd11801d727300a9a81fed662c1e0d:-2041283383</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_security_acl_7e59a1514f633300ad404a10a310c7ff</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl"><sys_security_acl action="INSERT_OR_UPDATE"><active>true</active><admin_overrides>true</admin_overrides><advanced>false</advanced><condition/><description>Default access control on sn_hr_core_case_asc</description><name>sn_hr_core_case_asc</name><operation display_value="write">write</operation><script/><sys_class_name>sys_security_acl</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-08-27 19:19:47</sys_created_on><sys_id>7e59a1514f633300ad404a10a310c7ff</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sn_hr_core_case_asc</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_security_acl_7e59a1514f633300ad404a10a310c7ff</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-08-27 19:19:47</sys_updated_on><type display_value="record">record</type></sys_security_acl></record_update>]]></payload><payload_hash>1514958128</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d4dac92fdb2600103dd39235ca96195d</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16cd48516200000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case_asc</table><target_name>sn_hr_core_case_asc</target_name><type>Access Control</type><update_domain>global</update_domain><update_guid>be59e151e16333000432f151269b6202</update_guid><update_guid_history>be59e151e16333000432f151269b6202:1514958128</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_ui_module_a92162b34f2a3300ad404a10a310c750</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_ui_module"><sys_ui_module action="INSERT_OR_UPDATE"><active>true</active><application display_value="HR Case Management">a12162b34f2a3300ad404a10a310c74e</application><filter/><name>HR NPS Scores</name><order/><path/><path_relative_to_root>false</path_relative_to_root><roles>sn_hr_core.hr_nps_score_user</roles><sys_class_name>sys_ui_module</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:45:33</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>a92162b34f2a3300ad404a10a310c750</sys_id><sys_mod_count>0</sys_mod_count><sys_name>HR NPS Scores</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_ui_module_a92162b34f2a3300ad404a10a310c750</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:45:33</sys_updated_on><table>sn_hr_core_nps_score</table><uncancelable>false</uncancelable><view_name/></sys_ui_module></record_update>]]></payload><payload_hash>1788387497</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d4dac92fdb2600103dd39235ca961960</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd643e130000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>HR NPS Scores</target_name><type>Module</type><update_domain>global</update_domain><update_guid>e12162b3eb2a33005f089d61371c7552</update_guid><update_guid_history>e12162b3eb2a33005f089d61371c7552:1788387497</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>asmt_metric_50e1aeb34f2a3300ad404a10a310c764</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="asmt_metric"&gt;&lt;asmt_metric action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;add_info_label&gt;Additional Information&lt;/add_info_label&gt;&lt;allow_add_info&gt;false&lt;/allow_add_info&gt;&lt;allow_not_applicable&gt;false&lt;/allow_not_applicable&gt;&lt;auto_gen&gt;false&lt;/auto_gen&gt;&lt;category display_value="NPS"&gt;9ed16eb34f2a3300ad404a10a310c793&lt;/category&gt;&lt;cond_question&gt;always&lt;/cond_question&gt;&lt;correct_answer/&gt;&lt;correct_answer_checkbox&gt;1&lt;/correct_answer_checkbox&gt;&lt;correct_answer_choice/&gt;&lt;correct_answer_template/&gt;&lt;correct_answer_yesno&gt;1&lt;/correct_answer_yesno&gt;&lt;datatype&gt;numericscale&lt;/datatype&gt;&lt;default_value_field/&gt;&lt;depends_on/&gt;&lt;description/&gt;&lt;details/&gt;&lt;displayed_when/&gt;&lt;displayed_when_checkbox&gt;1&lt;/displayed_when_checkbox&gt;&lt;displayed_when_template/&gt;&lt;displayed_when_yesno&gt;1&lt;/displayed_when_yesno&gt;&lt;duration/&gt;&lt;mandatory&gt;true&lt;/mandatory&gt;&lt;max&gt;10&lt;/max&gt;&lt;max_weight/&gt;&lt;method&gt;assessment&lt;/method&gt;&lt;metric_type display_value="HR Request Satisfaction Survey"&gt;730330019f22120047a2d126c42e70e5&lt;/metric_type&gt;&lt;min&gt;1&lt;/min&gt;&lt;name&gt;nps&lt;/name&gt;&lt;order&gt;100&lt;/order&gt;&lt;plugin/&gt;&lt;question&gt;How likely are you to recommend this service to someone else?&lt;/question&gt;&lt;randomize_answers&gt;false&lt;/randomize_answers&gt;&lt;reference_table/&gt;&lt;scale&gt;high&lt;/scale&gt;&lt;scored&gt;false&lt;/scored&gt;&lt;script&gt;&lt;![CDATA[// The following variables are available:  // - primary: contains the sys_id of the assessable object to be evaluated  // - string_result: the script sets the display string value for this metric to this variable  // - actual_result: the script sets the actual value for this metric to this variable  // - scaled_result: the script sets the scaled value (used in calculations) for this metric to this variable  //  // For example: // var gr = new GlideRecord('cmdb_ci'); // gr.addQuery('manufacturer', primary); // gr.query(); // actual_result = gr.getRowCount(); // string_result = actual_result + ''; // if (actual_result &amp;gt; 100) scaled_result = 5; // else scaled_result = 1;]]&gt;&lt;/script&gt;&lt;source_field/&gt;&lt;string_option&gt;short&lt;/string_option&gt;&lt;sys_class_name&gt;asmt_metric&lt;/sys_class_name&gt;&lt;sys_created_by&gt;tim_deniston&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2019-07-17 00:49:39&lt;/sys_created_on&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;50e1aeb34f2a3300ad404a10a310c764&lt;/sys_id&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_name&gt;nps&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;asmt_metric_50e1aeb34f2a3300ad404a10a310c764&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 00:49:39&lt;/sys_updated_on&gt;&lt;template/&gt;&lt;weight&gt;10&lt;/weight&gt;&lt;/asmt_metric&gt;&lt;sys_translated_text action="delete_multiple" query="documentkey=50e1aeb34f2a3300ad404a10a310c764"/&gt;&lt;/record_update&gt;</payload><payload_hash>1817472407</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d8dac92fdb2600103dd39235ca96193b</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd67fff10000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>nps</target_name><type>Assessment Metric</type><update_domain>global</update_domain><update_guid>691262f3b82a3300119970bc63701e05</update_guid><update_guid_history>691262f3b82a3300119970bc63701e05:1817472407</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>DELETE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>db_image_a447a1484f727300ad404a10a310c715</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="db_image"><db_image action="DELETE"><active>true</active><category>general</category><format>png</format><height>70</height><image>1037a5084f727300ad404a10a310c737</image><name>indifferent.png</name><size_bytes>2897</size_bytes><sys_class_name>db_image</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 15:11:06</sys_created_on><sys_id>a447a1484f727300ad404a10a310c715</sys_id><sys_mod_count>0</sys_mod_count><sys_name>indifferent.png</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>db_image_a447a1484f727300ad404a10a310c715</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 15:11:06</sys_updated_on><thumbnail/><width>72</width></db_image></record_update>]]></payload><payload_hash>-2086713960</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d8dac92fdb2600103dd39235ca96193e</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c007d1eef0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>indifferent.png</target_name><type>Images</type><update_domain>global</update_domain><update_guid>ab5761c889727300f5e010429bf8624c</update_guid><update_guid_history>ab5761c889727300f5e010429bf8624c:-2086713960,e447a148ea727300d2eb8bfbe9924016:1973160228</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sysevent_register_b25370019f22120047a2d126c42e7065</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sysevent_register"><sysevent_register action="INSERT_OR_UPDATE"><caller_access>1</caller_access><description>Task is closed and parent case is resumed</description><event_name>sn_hr_core_task.resume</event_name><fired_by>Task is closed complete</fired_by><queue/><suffix/><sys_class_name>sysevent_register</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2015-04-22 16:02:10</sys_created_on><sys_id>b25370019f22120047a2d126c42e7065</sys_id><sys_mod_count>6</sys_mod_count><sys_name>sn_hr_core_task.resume</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sysevent_register_b25370019f22120047a2d126c42e7065</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:35</sys_updated_on><table>sn_hr_core_task</table></sysevent_register></record_update>]]></payload><payload_hash>755476281</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d8dac92fdb2600103dd39235ca961941</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0057965e0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_task</table><target_name>sn_hr_core_task.resume</target_name><type>Event Registration</type><update_domain>global</update_domain><update_guid>c3fd1180cc727300bbc3f3abdb966f84</update_guid><update_guid_history>c3fd1180cc727300bbc3f3abdb966f84:755476281,47fd1180eb7273003128c2b83b427483:656789592</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_03986ec54f303300ad404a10a310c7d9</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Contact</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_contact</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:29</sys_created_on><sys_id>03986ec54f303300ad404a10a310c7d9</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Contact</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_03986ec54f303300ad404a10a310c7d9</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:06</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>926628272</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d8dac92fdb2600103dd39235ca961944</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005726820000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_contact</table><target_name>HR Contact</target_name><type>Table</type><update_domain>global</update_domain><update_guid>cced5d407f72730031f309e78ab59e4e</update_guid><update_guid_history>cced5d407f72730031f309e78ab59e4e:926628272,8cedd54040727300be73fb981a5fa9da:188607089</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_3a986ec54f303300ad404a10a310c77c</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>Topic Detail</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_topic_detail</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:27</sys_created_on><sys_id>3a986ec54f303300ad404a10a310c77c</sys_id><sys_mod_count>3</sys_mod_count><sys_name>Topic Detail</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_3a986ec54f303300ad404a10a310c77c</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:13</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>2085283009</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d8dac92fdb2600103dd39235ca961947</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00573f210000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_topic_detail</table><target_name>Topic Detail</target_name><type>Table</type><update_domain>global</update_domain><update_guid>21ed5d40d27273003e0e4e68387fc2f3</update_guid><update_guid_history>21ed5d40d27273003e0e4e68387fc2f3:2085283009,e9ed5d40ef727300292a197fb9c91def:-1280541408</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_78a862094f303300ad404a10a310c705</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>Background Check Search Details</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_background_check_search_details</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2019-04-12 12:25:06</sys_created_on><sys_id>78a862094f303300ad404a10a310c705</sys_id><sys_mod_count>1</sys_mod_count><sys_name>Background Check Search Details</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_78a862094f303300ad404a10a310c705</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:18</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-960372077</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d8dac92fdb2600103dd39235ca96194a</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005754430000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_background_check_search_details</table><target_name>Background Check Search Details</target_name><type>Table</type><update_domain>global</update_domain><update_guid>8bed9d40907273008b971bfc2b1c0e88</update_guid><update_guid_history>8bed9d40907273008b971bfc2b1c0e88:-960372077,76ed9d4054727300219cbb8e47be3d85:-676766856</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_af98aec54f303300ad404a10a310c7ae</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access>public</access><actions_access>false</actions_access><alter_access>false</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>false</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Service</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_service</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="Application File" name="sys_metadata">8a12332181131300aadba4a47c598e5e</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2018-02-27 18:42:20</sys_created_on><sys_id>af98aec54f303300ad404a10a310c7ae</sys_id><sys_mod_count>2</sys_mod_count><sys_name>HR Service</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_af98aec54f303300ad404a10a310c7ae</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:23</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-1987383950</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d8dac92fdb2600103dd39235ca96194d</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005768af0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_service</table><target_name>HR Service</target_name><type>Table</type><update_domain>global</update_domain><update_guid>5cfd9d40fe72730006bc67dda92f0df6</update_guid><update_guid_history>5cfd9d40fe72730006bc67dda92f0df6:-1987383950,c4fd9d40a77273005f665ace7a2b20da:-1666759407</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_eca822094f303300ad404a10a310c7c9</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>Position</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_position</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:33</sys_created_on><sys_id>eca822094f303300ad404a10a310c7c9</sys_id><sys_mod_count>3</sys_mod_count><sys_name>Position</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_eca822094f303300ad404a10a310c7c9</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:29</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-174183399</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d8dac92fdb2600103dd39235ca961950</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c00577dc90000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_position</table><target_name>Position</target_name><type>Table</type><update_domain>global</update_domain><update_guid>edfddd400f727300d10189b2dee9dca0</update_guid><update_guid_history>edfddd400f727300d10189b2dee9dca0:-174183399,a9fddd40857273002653b247589f749d:-1923998984</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_documentation_sn_hr_core_nps_score_u_employee_en</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update><sys_documentation element="u_employee" label="Employee" language="en" table="sn_hr_core_nps_score"><sys_documentation action="INSERT_OR_UPDATE"><element>u_employee</element><help/><hint/><label>Employee</label><language>en</language><name>sn_hr_core_nps_score</name><plural>Employees</plural><sys_class_name>sys_documentation</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:45:35</sys_created_on><sys_id>b52162b34f2a3300ad404a10a310c798</sys_id><sys_mod_count>0</sys_mod_count><sys_name>Employee</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_documentation_sn_hr_core_nps_score_u_employee_en</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:45:35</sys_updated_on><url/><url_target/></sys_documentation></sys_documentation></record_update>]]></payload><payload_hash>-1161585458</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d8dac92fdb2600103dd39235ca961953</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd6446af0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>HR NPS Score.Employee</target_name><type>Field Label</type><update_domain>global</update_domain><update_guid>0a2162b3c52a330091a916b907cd33c4</update_guid><update_guid_history>0a2162b3c52a330091a916b907cd33c4:-1161585458</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_scope_privilege_302d74844ffe3300ad404a10a310c70b</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_scope_privilege"><sys_scope_privilege action="INSERT_OR_UPDATE"><operation>read</operation><source_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</source_scope><status>allowed</status><sys_class_name>sys_scope_privilege</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 12:07:13</sys_created_on><sys_id>302d74844ffe3300ad404a10a310c70b</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sn_hr_core_case</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_scope_privilege_302d74844ffe3300ad404a10a310c70b</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 12:07:13</sys_updated_on><target_name>sn_hr_core_case</target_name><target_scope display_value="Global">global</target_scope><target_type>sys_db_object</target_type></sys_scope_privilege></record_update>]]></payload><payload_hash>1112374641</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d8dac92fdb2600103dd39235ca961956</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bffd453a00000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>sn_hr_core_case</target_name><type>Cross scope privilege</type><update_domain>global</update_domain><update_guid>f62dfc44b6fe33005f4151c72d304c72</update_guid><update_guid_history>f62dfc44b6fe33005f4151c72d304c72:1112374641</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_5776131c0bf032001c252c7885673aa6</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;public&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;sn_hr_core.hr_BulkCaseUpload&lt;/api_name&gt;&lt;caller_access&gt;1&lt;/caller_access&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;description/&gt;&lt;name&gt;hr_BulkCaseUpload&lt;/name&gt;&lt;script&gt;&lt;![CDATA[var hr_BulkCaseUpload = Class.create();
hr_BulkCaseUpload.prototype = Object.extendsObject(global.AbstractAjaxProcessor, {

    type: 'hr_BulkCaseUpload',
	
	uploadOperation: function(firstHeader, searchList) {
		var tracker = GlideExecutionTracker.getLastRunning();
        tracker.run();
		if (searchList.length != 0) 
			searchList = searchList.split(",");
		else 
			searchList = [];
		
		var bulkCaseRunGR = new GlideRecord("sn_hr_core_bulk_case_creation_run");
		var bulkCaseDataGR = new GlideRecord("sn_hr_core_bulk_case_creation_data");
		
		var userFound = 0;
		var userNotFound = 0;
		var foundList = [];
		// create a new record for bulk case run table
		bulkCaseRunGR.initialize();
		var bulkCaseRunSysID = bulkCaseRunGR.sys_id;
		var bulkCaseRunNumber = bulkCaseRunGR.number;
			bulkCaseRunGR.insert();
		
		var timeStartStr = this._currentDateGenerateTimeStr();
		
		//search and import uploaded data to bulk case data table
		var currentList = [];
		var totalRecords = searchList.length;
		if (firstHeader == "user_name") {
			for (var i = 0; i &lt; totalRecords; i++) {

				if (totalRecords &lt; 100) {
					//determine how many percent to increment for each interval
					var intervalPercentPro = Math.floor(100 / totalRecords);
					tracker.incrementPercentComplete(intervalPercentPro);
				} else {
					//determine number of things for one percent
					var onePercentIntervalPro = Math.floor(totalRecords / 100);
					if (i % onePercentIntervalPro == 0) 
						//increment one percent more
						tracker.incrementPercentComplete(1);
				}
				
				var cur = searchList[i];
				bulkCaseDataGR.initialize();
				bulkCaseDataGR.bulk_case_creation_run = bulkCaseRunSysID;
				bulkCaseDataGR.user_name = cur;
				var sysUserGR = new GlideRecord("sys_user");
				sysUserGR.addQuery("user_name", cur);
				sysUserGR.query();
				
				if (sysUserGR.next()) {
					bulkCaseDataGR.user = sysUserGR.sys_id;
					bulkCaseDataGR.email = sysUserGR.email;
					if (currentList.indexOf(cur) == -1) {
						userFound++;
						bulkCaseDataGR.query_result = "Found";
						foundList.push(sysUserGR.sys_id);
					} else 
						bulkCaseDataGR.query_result = "Found &amp; Duplicate";
				} else {
					userNotFound++;
					bulkCaseDataGR.query_result = "Not found";
					if (currentList.indexOf(cur) != -1)
						bulkCaseDataGR.query_result = "Not found &amp; Duplicate";
				}
				currentList.push(cur);
					bulkCaseDataGR.insert();
			}
		} else if (firstHeader == "email") {
			for (var i = 0; i &lt; totalRecords; i++) {
		
			if (totalRecords &lt; 100) {
				//determine how many percent to increment for each interval
				var intervalPercentPro = Math.floor(100 / totalRecords);
				tracker.incrementPercentComplete(intervalPercentPro);
			} else {
				//determine number of things for one percent
				var onePercentIntervalPro = Math.floor(totalRecords / 100);
				if (i % onePercentIntervalPro == 0) 
					//increment one percent more
					tracker.incrementPercentComplete(1);
			}

				var cur = searchList[i];
				bulkCaseDataGR.initialize();
				bulkCaseDataGR.bulk_case_creation_run = bulkCaseRunSysID;
				bulkCaseDataGR.email = cur;
				var sysUserGR = new GlideRecord("sys_user");
				sysUserGR.addQuery("email", cur);
				sysUserGR.query();
				
				if (sysUserGR.next()) {
					bulkCaseDataGR.user = sysUserGR.sys_id;
					bulkCaseDataGR.user_name = sysUserGR.user_name;
					if (currentList.indexOf(cur) == -1) {
						userFound++;
						bulkCaseDataGR.query_result = "Found";
						foundList.push(sysUserGR.sys_id);
					} else 
						bulkCaseDataGR.query_result = "Found &amp; Duplicate";
				} else {
					userNotFound++;
					bulkCaseDataGR.query_result = "Not found";
					if (currentList.indexOf(cur) != -1)
						bulkCaseDataGR.query_result = "Not found &amp; Duplicate";
				}
				currentList.push(cur);
					bulkCaseDataGR.insert();
			}
		}
	
		var timeEndStr = this._currentDateGenerateTimeStr();
		
		bulkCaseRunGR.addQuery("sys_id", bulkCaseRunSysID);
		bulkCaseRunGR.query();
		if (bulkCaseRunGR.next()) {
			bulkCaseRunGR.total_records = totalRecords;
			bulkCaseRunGR.user_found = userFound;
			bulkCaseRunGR.user_not_found = userNotFound;
		}
			bulkCaseRunGR.update();
		
		var url = "/sn_hr_core_bulk_case_creation_data" + "_list?sysparm_query=sys_created_on&gt;="+timeStartStr+"^sys_created_by="+gs.getUserName()+"^sys_created_on&lt;="+timeEndStr+"&amp;sysparm_domain_restore=false&amp;sysparm_stack=no";
		
		var encodedQuery = "";
		for (var i = 0; i &lt; foundList.length; i++) {
			if (i == foundList.length - 1)
				encodedQuery += "sys_id=" + foundList[i] + "^EQ";
			else 
				encodedQuery += "sys_id=" + foundList[i] + "^OR";
		}
		
        tracker.updateResult({
            recordCount: totalRecords,
			bulkCaseRunID: bulkCaseRunSysID,
            url: url,
			userFound: userFound,
			userNotFound: userNotFound,
			encodedQuery: encodedQuery
        });
    },
	
	//Used in encoded query generation for time comparison
	_currentDateGenerateTimeStr: function(){
		var currentTime = new GlideDateTime();
		currentTime= currentTime.getDisplayValueInternal().toString();
		currentTime= currentTime.split(" ");
		var date = currentTime[0];
		var time = currentTime[1];
		return "javascript:gs.dateGenerate('"+date+"','"+time+"')";
	}

});]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-02-03 23:05:36&lt;/sys_created_on&gt;&lt;sys_id&gt;5776131c0bf032001c252c7885673aa6&lt;/sys_id&gt;&lt;sys_mod_count&gt;48&lt;/sys_mod_count&gt;&lt;sys_name&gt;hr_BulkCaseUpload&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_5776131c0bf032001c252c7885673aa6&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 14:30:32&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload><payload_hash>-810898448</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d8dac92fdb2600103dd39235ca961959</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0057892d0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_BulkCaseUpload</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>96fddd407d72730000ff5875e7900bf3</update_guid><update_guid_history>96fddd407d72730000ff5875e7900bf3:-810898448,defddd404b727300687c7a9d6750ddf0:-1884016655</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_fe5330019f22120047a2d126c42e70ff</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;public&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;sn_hr_core.hr_CoreUtils&lt;/api_name&gt;&lt;caller_access&gt;1&lt;/caller_access&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;description/&gt;&lt;name&gt;hr_CoreUtils&lt;/name&gt;&lt;script&gt;&lt;![CDATA[var hr_CoreUtils = Class.create();
hr_CoreUtils.prototype = {
    initialize: function() {
    },

	hasRoles: function() {
		var roles = gs.getUser().getRoles();
		
		if (roles.length == 0)
			return false;
		else if (roles.length == 1 &amp;&amp; roles[0] == 'snc_internal') //For explicit roles plugin
			return false;
		
		return true;
	},
	
 	impersonateCheck: function() {
	 	return gs.getSession().isImpersonating() &amp;&amp; gs.getProperty('sn_hr_core.impersonateCheck') == 'true';
 	},

 	isAssigned: function(request) {
		return (!request.assignment_group.nil() || !request.assigned_to.nil());
 	},

 	hasValidAssignee: function(record) {
		var grMember = new GlideRecord('sys_user_grmember');
		grMember.addQuery('user', record.assigned_to);
		grMember.addQuery('group', record.assignment_group);
		grMember.setLimit(1);
		grMember.query();
		var assigneeInAssignmentGroup = grMember.hasNext();
		if (assigneeInAssignmentGroup)
			return true;

		var asmtGroup = new GlideRecord('sys_user_group');
		asmtGroup.get(record.assignment_group);
		var assigneeIsAssignmentGroupMgr = asmtGroup.manager + '' == record.assigned_to + '';
		if (assigneeIsAssignmentGroupMgr)
			return true;

		return false;
 	},

	isClosed: function(record) {
		return (record.state == 3) || (record.state == 4) || (record.state == 7);
	},

	isParentClosed : function(record) {
		return (record.parent.state == 3) || (record.parent.state == 4) || (record.parent.state == 7);
	},

	canEscalate: function(task) {
		if (this.isClosed(task) || task.assignment_group.nil())
			return false;

		var gr = new GlideRecord('sn_hr_core_tier_definition');
		gr.addQuery('escalate_from', task.assignment_group);
		gr.addNotNullQuery('escalate_to');
		gr.query();
		if (gr.getRowCount() &gt; 0)
			return true;

		return false;
	},

 	hasOpenTasks : function() {
		// we are now allowing an hr case to have child tasks other than hr_task, so removing sm logic to restrict to sm tables only
		var gr = new GlideRecord('task');
		gr.addQuery("parent", current.sys_id);
		gr.addEncodedQuery("stateNOT IN3,4,7,9"); // SM assumed that 3, 4, 7 and 9 were the only ones that indicated closed
		gr.query();
		if(gr.getRowCount() != 0){
			while(gr.next()){
				var grTask = new GlideRecord('sn_hr_core_task');
				if(grTask.get(gr.getUniqueValue())){
					if(grTask.optional == false)
						return true;
				}
			}
		}
		return false;
 	},

	fieldChangeCheck: function(fieldList) {
		var fieldArray = fieldList.split(",");
		for (var x=0; x&lt;fieldArray.length; x++) {
			if (current.isValidField(fieldArray[x])) {
				if (current[fieldArray[x]].changes()) {
					return true;
				}
			}
		}
		return false;
	},
	
	isCase: function (className) {
		return className == hr.TABLE_CASE || hr.TABLE_CASE_EXTENSIONS.toString().indexOf(className) &gt;= 0;
	},

	//Returning display value only for Refernce type fields 	
	getFieldsDisplayValue: function (field,value,table) {
		var referenceTable = this._getReferenceTable(table,field);
		if(referenceTable){
			var refGr = new GlideRecord(referenceTable);
			return (refGr.get(value))? refGr.getDisplayValue(): "";
		}
	},

	_getReferenceTable: function (table, field) {
		var fTypeRef = new GlideRecord("sys_dictionary");
		fTypeRef.addQuery('name', table);
		fTypeRef.addQuery('element',field);
		fTypeRef.addQuery('internal_type','reference');
		fTypeRef.query();
		return (fTypeRef.next())? String(fTypeRef.reference):"";
	},

	type : 'hr_CoreUtils'
};
]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2016-03-23 17:46:49&lt;/sys_created_on&gt;&lt;sys_id&gt;fe5330019f22120047a2d126c42e70ff&lt;/sys_id&gt;&lt;sys_mod_count&gt;48&lt;/sys_mod_count&gt;&lt;sys_name&gt;hr_CoreUtils&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_fe5330019f22120047a2d126c42e70ff&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 14:30:34&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload><payload_hash>-1808802159</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d8dac92fdb2600103dd39235ca96195c</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005792b50000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_CoreUtils</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>36fd118024727300d09b1b99a2836a4b</update_guid><update_guid_history>36fd118024727300d09b1b99a2836a4b:-1808802159,7efd1180b9727300a4678f9d5cc35948:1602093104</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_security_acl_role_fa59e1514f633300ad404a10a310c703</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl_role"><sys_security_acl_role action="INSERT_OR_UPDATE"><sys_class_name>sys_security_acl_role</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-08-27 19:19:47</sys_created_on><sys_id>fa59e1514f633300ad404a10a310c703</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sn_hr_core_case_asc.sn_hr_core.asc_user</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_security_acl display_value="sn_hr_core_case_asc">7e59a1514f633300ad404a10a310c7ff</sys_security_acl><sys_update_name>sys_security_acl_role_fa59e1514f633300ad404a10a310c703</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-08-27 19:19:47</sys_updated_on><sys_user_role display_value="sn_hr_core.asc_user" name="sn_hr_core.asc_user">2e5921114f633300ad404a10a310c7d8</sys_user_role><transaction_id/></sys_security_acl_role></record_update>]]></payload><payload_hash>1603591726</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>d8dac92fdb2600103dd39235ca96195f</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16cd485164e0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case_asc</table><target_name>sn_hr_core_case_asc.sn_hr_core.asc_user</target_name><type>Access Roles</type><update_domain>global</update_domain><update_guid>ba59e151da633300517a1b33e8cf0706</update_guid><update_guid_history>ba59e151da633300517a1b33e8cf0706:1603591726</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>asmt_metric_definition_ad1222f34f2a3300ad404a10a310c7f4</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="asmt_metric_definition"><asmt_metric_definition action="INSERT_OR_UPDATE"><display>3</display><metric display_value="">50e1aeb34f2a3300ad404a10a310c764</metric><order>3</order><selected_image/><sys_class_name>asmt_metric_definition</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:49:39</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>ad1222f34f2a3300ad404a10a310c7f4</sys_id><sys_mod_count>0</sys_mod_count><sys_name>3</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>asmt_metric_definition_ad1222f34f2a3300ad404a10a310c7f4</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:49:39</sys_updated_on><unselected_image/><value>3</value></asmt_metric_definition><sys_translated_text action="delete_multiple" query="documentkey=ad1222f34f2a3300ad404a10a310c7f4"/></record_update>]]></payload><payload_hash>-311225087</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>dcdac92fdb2600103dd39235ca96193d</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd67fea90000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>3</target_name><type>Assessment Metric Definition</type><update_domain>global</update_domain><update_guid>ad1222f3eb2a330002cf5f9e1e74e6f5</update_guid><update_guid_history>ad1222f3eb2a330002cf5f9e1e74e6f5:-311225087</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sysevent_register_7a5370019f22120047a2d126c42e7064</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sysevent_register"><sysevent_register action="INSERT_OR_UPDATE"><caller_access>1</caller_access><description/><event_name>sn_hr_core_case.inserted.assigned</event_name><fired_by/><queue/><suffix/><sys_class_name>sysevent_register</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2013-11-04 11:50:41</sys_created_on><sys_id>7a5370019f22120047a2d126c42e7064</sys_id><sys_mod_count>2</sys_mod_count><sys_name>sn_hr_core_case.inserted.assigned</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sysevent_register_7a5370019f22120047a2d126c42e7064</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:35</sys_updated_on><table>sn_hr_core_case</table></sysevent_register></record_update>]]></payload><payload_hash>1451687677</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>dcdac92fdb2600103dd39235ca961940</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005795500000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case</table><target_name>sn_hr_core_case.inserted.assigned</target_name><type>Event Registration</type><update_domain>global</update_domain><update_guid>c3fd11801e7273002cfe2a63aa4d437b</update_guid><update_guid_history>c3fd11801e7273002cfe2a63aa4d437b:1451687677,47fd1180e07273000f577fcf9183097a:-1757921794</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_app_module_e52162b34f2a3300ad404a10a310c74b</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_app_module"><sys_app_module action="INSERT_OR_UPDATE"><active>true</active><application display_value="HR Case Management">7f0370019f22120047a2d126c42e7075</application><assessment/><content_page/><device_type/><filter/><hint/><homepage/><image/><link_type>LIST</link_type><map_page/><mobile_title>HR NPS Scores</mobile_title><mobile_view_name>Mobile</mobile_view_name><name>sn_hr_core_nps_score</name><order/><override_menu_roles>false</override_menu_roles><query/><report/><roles>sn_hr_core.hr_nps_score_user</roles><sys_class_name>sys_app_module</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:45:33</sys_created_on><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>e52162b34f2a3300ad404a10a310c74b</sys_id><sys_mod_count>0</sys_mod_count><sys_name>HR NPS Scores</sys_name><sys_overrides/><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_app_module_e52162b34f2a3300ad404a10a310c74b</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:45:33</sys_updated_on><timeline_page/><title>HR NPS Scores</title><uncancelable>false</uncancelable><view_name/><window_name/></sys_app_module></record_update>]]></payload><payload_hash>1757701790</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>dcdac92fdb2600103dd39235ca961943</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd643cfa0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>HR NPS Scores</target_name><type>Module</type><update_domain>global</update_domain><update_guid>e12162b39d2a3300d2ff02ee14564b4d</update_guid><update_guid_history>e12162b39d2a3300d2ff02ee14564b4d:1757701790</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_3398eec54f303300ad404a10a310c71d</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Operations Report Type</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_op_report_type</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:32</sys_created_on><sys_id>3398eec54f303300ad404a10a310c71d</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Operations Report Type</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_3398eec54f303300ad404a10a310c71d</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:11</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-1951199879</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>dcdac92fdb2600103dd39235ca961946</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005738f00000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_op_report_type</table><target_name>HR Operations Report Type</target_name><type>Table</type><update_domain>global</update_domain><update_guid>19ed5d402e727300bec75cec64ab5dd1</update_guid><update_guid_history>19ed5d402e727300bec75cec64ab5dd1:-1951199879,d1ed5d40bb72730004e3b157a8015fce:-1679396520</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_63a8e6094f303300ad404a10a310c739</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>true</is_extendable><label>HR Document Template</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_document_template</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:41</sys_created_on><sys_id>63a8e6094f303300ad404a10a310c739</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Document Template</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_63a8e6094f303300ad404a10a310c739</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:17</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>716234825</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>dcdac92fdb2600103dd39235ca961949</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0057500a0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_document_template</table><target_name>HR Document Template</target_name><type>Table</type><update_domain>global</update_domain><update_guid>aaed9d40197273000f209590220dda67</update_guid><update_guid_history>aaed9d40197273000f209590220dda67:716234825,e6ed9d4028727300dc54fb22bec7cf62:1712952104</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_9ca8eec54f303300ad404a10a310c7c0</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>true</is_extendable><label>HR Benefit</label><live_feed_enabled>false</live_feed_enabled><name>sn_hr_core_benefit</name><number_ref/><provider_class/><read_access>true</read_access><super_class/><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-08-21 22:09:32</sys_created_on><sys_id>9ca8eec54f303300ad404a10a310c7c0</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Benefit</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_9ca8eec54f303300ad404a10a310c7c0</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:22</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-65862464</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>dcdac92fdb2600103dd39235ca96194c</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005763490000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_benefit</table><target_name>HR Benefit</target_name><type>Table</type><update_domain>global</update_domain><update_guid>f7ed9d4053727300a5cbaeda337dddca</update_guid><update_guid_history>f7ed9d4053727300a5cbaeda337dddca:-65862464,b3ed9d40057273004dc8bc73dfeeb8c0:1988540383</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_db_object_e9a8a2094f303300ad404a10a310c7d1</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_db_object"><sys_db_object action="INSERT_OR_UPDATE"><access/><actions_access>true</actions_access><alter_access>true</alter_access><caller_access>1</caller_access><client_scripts_access>true</client_scripts_access><configuration_access>false</configuration_access><create_access>true</create_access><create_access_controls>false</create_access_controls><delete_access>false</delete_access><extension_model/><is_extendable>false</is_extendable><label>HR Talent Management Case</label><live_feed_enabled>true</live_feed_enabled><name>sn_hr_core_case_talent_management</name><number_ref/><provider_class/><read_access>true</read_access><super_class display_value="HR Case" name="sn_hr_core_case">26986ec54f303300ad404a10a310c747</super_class><sys_class_code/><sys_class_name>sys_db_object</sys_class_name><sys_class_path/><sys_created_by>system</sys_created_by><sys_created_on>2017-09-21 07:47:16</sys_created_on><sys_id>e9a8a2094f303300ad404a10a310c7d1</sys_id><sys_mod_count>3</sys_mod_count><sys_name>HR Talent Management Case</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_db_object_e9a8a2094f303300ad404a10a310c7d1</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:30:28</sys_updated_on><update_access>true</update_access><user_role/><ws_access>true</ws_access></sys_db_object></record_update>]]></payload><payload_hash>-715312930</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>dcdac92fdb2600103dd39235ca96194f</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0057793f0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_case_talent_management</table><target_name>HR Talent Management Case</target_name><type>Table</type><update_domain>global</update_domain><update_guid>d1fddd402e7273005c6fa096e116a181</update_guid><update_guid_history>d1fddd402e7273005c6fa096e116a181:-715312930,d5fddd408f727300ab179719c24ea57d:1229619359</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_dictionary_sn_hr_core_nps_score_u_score</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update&gt;&lt;sys_dictionary action="INSERT_OR_UPDATE" element="u_score" table="sn_hr_core_nps_score"&gt;&lt;active&gt;true&lt;/active&gt;&lt;array&gt;false&lt;/array&gt;&lt;array_denormalized&gt;false&lt;/array_denormalized&gt;&lt;attributes/&gt;&lt;audit&gt;false&lt;/audit&gt;&lt;calculation&gt;&lt;![CDATA[(function calculatedFieldValue(current) {

	// Add your code here
	return '';  // return the calculated value

})(current);]]&gt;&lt;/calculation&gt;&lt;choice&gt;1&lt;/choice&gt;&lt;choice_field/&gt;&lt;choice_table/&gt;&lt;column_label&gt;Score&lt;/column_label&gt;&lt;comments/&gt;&lt;create_roles/&gt;&lt;default_value/&gt;&lt;defaultsort/&gt;&lt;delete_roles/&gt;&lt;dependent/&gt;&lt;dependent_on_field/&gt;&lt;display&gt;false&lt;/display&gt;&lt;dynamic_creation&gt;false&lt;/dynamic_creation&gt;&lt;dynamic_creation_script/&gt;&lt;dynamic_default_value/&gt;&lt;dynamic_ref_qual/&gt;&lt;element&gt;u_score&lt;/element&gt;&lt;element_reference&gt;false&lt;/element_reference&gt;&lt;foreign_database/&gt;&lt;function_definition/&gt;&lt;function_field&gt;false&lt;/function_field&gt;&lt;internal_type display_value="Integer"&gt;integer&lt;/internal_type&gt;&lt;mandatory&gt;false&lt;/mandatory&gt;&lt;max_length&gt;40&lt;/max_length&gt;&lt;name&gt;sn_hr_core_nps_score&lt;/name&gt;&lt;next_element/&gt;&lt;primary&gt;false&lt;/primary&gt;&lt;read_only&gt;false&lt;/read_only&gt;&lt;read_roles/&gt;&lt;reference/&gt;&lt;reference_cascade_rule/&gt;&lt;reference_floats&gt;false&lt;/reference_floats&gt;&lt;reference_key/&gt;&lt;reference_qual/&gt;&lt;reference_qual_condition/&gt;&lt;reference_type/&gt;&lt;sizeclass/&gt;&lt;spell_check&gt;false&lt;/spell_check&gt;&lt;staged&gt;false&lt;/staged&gt;&lt;sys_class_name&gt;sys_dictionary&lt;/sys_class_name&gt;&lt;sys_created_by&gt;tim_deniston&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2019-07-17 00:45:32&lt;/sys_created_on&gt;&lt;sys_id&gt;77c0e27b4fe63300ad404a10a310c7a3&lt;/sys_id&gt;&lt;sys_mod_count&gt;1&lt;/sys_mod_count&gt;&lt;sys_name&gt;Score&lt;/sys_name&gt;&lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_dictionary_sn_hr_core_nps_score_u_score&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;tim_deniston&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2019-07-17 00:46:42&lt;/sys_updated_on&gt;&lt;table_reference&gt;false&lt;/table_reference&gt;&lt;text_index&gt;false&lt;/text_index&gt;&lt;unique&gt;false&lt;/unique&gt;&lt;use_dependent_field&gt;false&lt;/use_dependent_field&gt;&lt;use_dynamic_default&gt;false&lt;/use_dynamic_default&gt;&lt;use_reference_qualifier&gt;simple&lt;/use_reference_qualifier&gt;&lt;virtual&gt;false&lt;/virtual&gt;&lt;widget/&gt;&lt;write_roles/&gt;&lt;xml_view&gt;false&lt;/xml_view&gt;&lt;/sys_dictionary&gt;&lt;/record_update&gt;</payload><payload_hash>1292779662</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>dcdac92fdb2600103dd39235ca961952</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd654a200000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>HR NPS Score.Score</target_name><type>Dictionary</type><update_domain>global</update_domain><update_guid>1661a6b37e2a3300ed9f20a192be66fe</update_guid><update_guid_history>1661a6b37e2a3300ed9f20a192be66fe:1292779662,5d2162b37c2a330054063d52d3bdcf3d:-869442336</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_restricted_caller_access_7a41ad044f727300ad404a10a310c71b</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_restricted_caller_access"><sys_restricted_caller_access action="INSERT_OR_UPDATE"><operation>read</operation><source>3b1912c30b32320036e62c7885673ab8</source><source_scope display_value="Templated Snippets">2d3597c80b67320036e62c7885673a43</source_scope><source_table>sys_script_include</source_table><source_type>2</source_type><status>2</status><sys_class_name>sys_restricted_caller_access</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 14:45:03</sys_created_on><sys_id>7a41ad044f727300ad404a10a310c71b</sys_id><sys_mod_count>0</sys_mod_count><sys_name>2d3597c80b67320036e62c7885673a43</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_update_name>sys_restricted_caller_access_7a41ad044f727300ad404a10a310c71b</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 14:45:03</sys_updated_on><target name="sn_hr_core_case_workforce_admin" target_table="sys_db_object">65b82e094f303300ad404a10a310c726</target><target_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</target_scope><target_table>sys_db_object</target_table><target_type>1</target_type></sys_restricted_caller_access></record_update>]]></payload><payload_hash>-854701053</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>dcdac92fdb2600103dd39235ca961955</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c0064d3bf0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>2d3597c80b67320036e62c7885673a43</target_name><type>Restricted Caller Access Privilege</type><update_domain>global</update_domain><update_guid>fa41ad04ac72730093a1781ed3e5bb1c</update_guid><update_guid_history>fa41ad04ac72730093a1781ed3e5bb1c:-854701053</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_3f09e559536232003585c3c606dc34d6</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;
  &lt;sys_script_include action="INSERT_OR_UPDATE"&gt;
    &lt;access&gt;public&lt;/access&gt;
    &lt;active&gt;true&lt;/active&gt;
    &lt;api_name&gt;sn_hr_core.hr_ApprovalUtil&lt;/api_name&gt;
    &lt;caller_access&gt;2&lt;/caller_access&gt;
    &lt;client_callable&gt;false&lt;/client_callable&gt;
    &lt;description&gt;Provides utility for HR approvals and subflows.&lt;/description&gt;
    &lt;name&gt;hr_ApprovalUtil&lt;/name&gt;
    &lt;script&gt;&lt;![CDATA[var hr_ApprovalUtil = Class.create();
hr_ApprovalUtil.prototype = {
    type: 'hr_ApprovalUtil'
};

hr_ApprovalUtil.WORKFLOW_ID = '8de6490c53032200d901a7e6a11c0838';

hr_ApprovalUtil.checkApprovalParameters = function(caseGr, workflow) {
	var serviceActivity = workflow.variables.service_activity_sys_id;
	var leActivity = workflow.variables.le_activity_sys_id;

	if (serviceActivity)
		hr_ApprovalUtil.getServiceActivityParameters(serviceActivity, workflow);
	else if (leActivity)
		hr_ApprovalUtil.getLEActivityParameters(leActivity, workflow);
	else
		hr_ApprovalUtil.getHRServiceParameters(caseGr, workflow);

	return !hr_ApprovalUtil.noApproversSet(workflow);
};

hr_ApprovalUtil.noApproversSet = function (workflow) {
	var noOptions = gs.nil(workflow.scratchpad.approvalOptions);
	var noGroups = gs.nil(workflow.scratchpad.approvalGroups);
	var noUsers = gs.nil(workflow.scratchpad.approvalUsers);

	return noOptions &amp;&amp; noGroups &amp;&amp; noUsers;
};

hr_ApprovalUtil.getServiceActivityParameters = function(activityId, workflow) {
	var grSA = new GlideRecord('sn_hr_core_service_activity');

	if (grSA.get(activityId)) {
		workflow.scratchpad.approvalOptions = grSA.approval_options.toString();
		workflow.scratchpad.approvalGroups = grSA.approver_groups.toString();
		workflow.scratchpad.approvalUsers = grSA.approver_users.toString();
		workflow.scratchpad.approval_accept_option = grSA.approval_accept_option || 'first_response';
		workflow.scratchpad.approval_reject_option = grSA.approval_reject_option || 'close_case';
		workflow.scratchpad.missing_some_approvers = grSA.missing_some_approvers || 'skip';
		workflow.scratchpad.missing_all_approvers = grSA.missing_all_approvers || 'substitute';
	}
};

hr_ApprovalUtil.getLEActivityParameters = function(activityId, workflow) {
	var grLA = new GlideRecord('sn_hr_le_activity');

	if (grLA.get(activityId)) {
		workflow.scratchpad.approvalOptions = grLA.approvers.toString();
		workflow.scratchpad.approvalGroups = grLA.approver_groups.toString();
		workflow.scratchpad.approvalUsers = grLA.approver_users.toString();
		workflow.scratchpad.approval_accept_option = grLA.approval_accept_option || 'anyone';
		workflow.scratchpad.approval_reject_option = grLA.approval_reject_option || 'reapprove';
		workflow.scratchpad.missing_some_approvers = grLA.missing_some_approvers || 'skip';
		workflow.scratchpad.missing_all_approvers = grLA.missing_all_approvers || 'substitute';
	}
};

hr_ApprovalUtil.getHRServiceParameters = function(caseGr, workflow) {
	// set fields to mimic the OOB functionality of Jakarta
	if (caseGr.hr_service.approval_options) {
		workflow.scratchpad.approvalOptions = caseGr.hr_service.approval_options.toString();
		workflow.scratchpad.approval_accept_option = 'first_response';
		// approval subflow in Jakarta returns "rejected" and lets caller decide how to handle it
		workflow.scratchpad.approval_reject_option = 'legacy';
	}
	workflow.scratchpad.insufficient_data_is_an_option = true;
};

hr_ApprovalUtil.approverCount = function(caseGr, workflow) {
	workflow.scratchpad.approvers = [];
	workflow.scratchpad.missingApprovers = [];

	if (workflow.scratchpad.approvalOptions)
		hr_ApprovalUtil._getApproversFromOptions(caseGr, workflow);
	if (workflow.scratchpad.approvalGroups)
		hr_ApprovalUtil._getApproversFromGroups(workflow);
	if (workflow.scratchpad.approvalUsers)
		hr_ApprovalUtil._getApproversFromUsers(workflow);

	workflow.scratchpad.missingApprovers.sort();
	return workflow.scratchpad.approvers.length;
};

hr_ApprovalUtil.missingApprovers = function(caseGr) {
	var approvalContext = hr_ApprovalUtil.getApprovalSubflowsForCase(caseGr);
	return approvalContext.scratchpad.missingApprovers;
};

hr_ApprovalUtil._getApproversFromOptions = function(caseGr, workflow) {
	var gr = new GlideRecord('sn_hr_core_service_approval_option');
	gr.addActiveQuery();
	gr.addQuery('sys_id', 'IN', workflow.scratchpad.approvalOptions);
	gr.query();

	while (gr.next()) {
		var glideEle = caseGr.getElement(gr.approval_assign_to);

		if (glideEle) {
			var refTo = glideEle.getReferenceTable();
			var rootTable = new GlideTableHierarchy(refTo).getRoot();

			switch (rootTable) {
				case 'sys_user':
					if (hr_ApprovalUtil.isValidUser(glideEle))
						workflow.scratchpad.approvers.push(glideEle.toString());
					else
						workflow.scratchpad.missingApprovers.push(String(gr.name));
					break;
				case 'sys_user_group':
					if (hr_ApprovalUtil.isValidGroup(glideEle))
						workflow.scratchpad.approvers.push(glideEle.toString());
					else
						workflow.scratchpad.missingApprovers.push(String(gr.name));
					break;
			}
		} else
			workflow.scratchpad.missingApprovers.push(String(gr.name));
	}
};

hr_ApprovalUtil._getApproversFromGroups = function(workflow) {
	var approverGroups = String(workflow.scratchpad.approvalGroups).split(',');

	for (var i = 0; i &lt; approverGroups.length; i++) {
		if (hr_ApprovalUtil.isValidGroup(approverGroups[i]))
			workflow.scratchpad.approvers.push(approverGroups[i]);
		else {
			var group = new GlideRecord('sys_user_group');
			group.get(approverGroups[i]);
			workflow.scratchpad.missingApprovers.push(String(group.name));
		}
	}
};

hr_ApprovalUtil._getApproversFromUsers = function(workflow) {
	var approverUsers = String(workflow.scratchpad.approvalUsers).split(',');

	for (var j = 0; j &lt; approverUsers.length; j++) {

		if (hr_ApprovalUtil.isValidUser(approverUsers[j]))
			workflow.scratchpad.approvers.push(approverUsers[j]);
		else {
			var grUser = new GlideRecord('sys_user');
			grUser.get(approverUsers[j]);
			workflow.scratchpad.missingApprovers.push(String(grUser.name));
		}
	}
};

hr_ApprovalUtil.isValidGroup = function(groupId) {
	var grMember = new GlideRecord('sys_user_grmember');
	grMember.addQuery('user.active', 'true');
	grMember.addQuery('group', groupId);
	grMember.setLimit(1);
	grMember.query();

	return grMember.hasNext();
};

hr_ApprovalUtil.isValidUser = function(userId) {
	var grUser = new GlideRecord('sys_user');
	grUser.addQuery('sys_id', userId);
	grUser.addActiveQuery();
	grUser.query();

	return grUser.hasNext();
};

/*------------- Rejection option methods -------------*/

hr_ApprovalUtil._getStage = function(approvalContext) {
	var stage = new GlideRecord("wf_stage");
	if (stage.get(approvalContext.stage))
		return stage.value;
	else
		return null;
};

hr_ApprovalUtil.isReapprovalAuthorized = function(caseGr) {
	if (gs.getUserID() != caseGr.assigned_to)
		return false;

	var approvalContext = hr_ApprovalUtil.getApprovalSubflowsForCase(caseGr);
	return approvalContext != null &amp;&amp; hr_ApprovalUtil._getStage(approvalContext) == 'awaiting_reapproval';
};

hr_ApprovalUtil.rerequestCaseApproval = function(caseGr) {
	var approvalContext = hr_ApprovalUtil.getApprovalSubflowsForCase(caseGr);
	new global.Workflow().broadcastEvent(approvalContext.sys_id, 'sn_hr_core.request_reapproval');
	gs.addInfoMessage(gs.getMessage('Approvals have been re-requested'));
};

hr_ApprovalUtil.isSubstituteApprovers = function(caseGr) {
	if (gs.getUserID() != caseGr.assigned_to)
		return false;

	var approvalContext = hr_ApprovalUtil.getApprovalSubflowsForCase(caseGr);
	var result = approvalContext != null &amp;&amp; hr_ApprovalUtil._getStage(approvalContext) == 'substitute_approvers';
	return result;
};

hr_ApprovalUtil.getApprovalSubflowsForCase = function(grCase) {
	var wfContext = new global.Workflow().getRunningFlows(grCase);

	//Find running context for 'HR Case Approval Subflow'
	while (wfContext.next()) {
		if (wfContext.workflow == hr_ApprovalUtil.WORKFLOW_ID)
			return wfContext;
	}

	return null;
};

hr_ApprovalUtil.caseRejected = function(caseGr) {
	var approval = new GlideRecord("sysapproval_approver");
	approval.addQuery("sysapproval", current.sys_id);
	approval.addQuery("state", "rejected");
	approval.addQuery("wf_activity", "!=", "");
	approval.setLimit(1);
	approval.query();
	return approval.hasNext();
};

hr_ApprovalUtil.disassociateApprovalsFromWorkflow = function(grCase) {
	var approvalGr = new GlideRecord("sysapproval_approver");
	approvalGr.addQuery("sysapproval", grCase.getUniqueValue());
	approvalGr.addQuery('wf_activity.workflow_version.workflow', hr_ApprovalUtil.WORKFLOW_ID);
	approvalGr.addQuery("state", "!=", "cancelled");
	approvalGr.query();

	while (approvalGr.next()) {
		approvalGr.setValue('wf_activity', "");
		approvalGr.update();
	}
};

/*
* Returns list of missing approvers defined on approval HR service activity
*
* @param
*  caseID: HR case sys_id string value
* 
* @returns
*  array list of missing approvers defined on approval HR service activity  
*/
hr_ApprovalUtil.getMissingApproversOnCase = function(caseID) {

	var substituteApproverGR = new GlideRecord('sn_hr_core_substitute_approver');
	substituteApproverGR.addNotNullQuery('missing_approver');
	substituteApproverGR.addQuery('hr_case', caseID);
	substituteApproverGR.orderBy('missing_approver');
	substituteApproverGR.query();

	var missingApprovers = [];
	while (substituteApproverGR.next()) {
		var missingApprover = substituteApproverGR.getValue('missing_approver');
		missingApprovers.push(missingApprover);
	}

	return missingApprovers;
};
	
/*
* Returns boolean true if atleast one approver is set for HR case
*
* @param
*  caseID: HR case sys_id string value
* 
* @returns
*  boolean true if atleast one approver is set false otherwise
*/
hr_ApprovalUtil.approverSetForCase = function(caseID) {
	
	var approverSet = false;
	var caseGR = new GlideRecord('sn_hr_core_case');

	if (caseGR.get(caseID)) {
		var approvalWorkFlowContext = hr_ApprovalUtil.getApprovalSubflowsForCase(caseGR);
		if (approvalWorkFlowContext.scratchpad.approvers.length &gt; 0)
			approverSet = true;
	}

	return approverSet;
}; 

/*
* Adds approvers to the case and updates case worflow
*
* @param 
*  approvers: comma separated string value containing sys_user ids
*  table: string value of table name
*  caseID: HR case sys_id string value
* 
* @returns error message as
*  object {
*    error: string error message if invalid user or missing caseID
*  }
*  OR null for success
*/
hr_ApprovalUtil.addApproversToCase = function(approvers, table, caseID) {
	var response = {};

	if (table &amp;&amp; caseID) {
		//add approvers to case
		var failedToAddApprovers = [];
		//when 'some' approvers are missing, list can be empty.
		if (approvers) {
			var approversList = approvers.split(',');
			var hrSubstituteApproverGR = new GlideRecord('sn_hr_core_substitute_approver');
			
			for (var i = 0; i &lt; approversList.length; i++) {
				hrSubstituteApproverGR.initialize();
				hrSubstituteApproverGR.approver = approversList[i];
				hrSubstituteApproverGR.hr_case = caseID;
				var inserted = hrSubstituteApproverGR.insert();
				if (!inserted)
					failedToAddApprovers.push(approversList[i]);
			}
		}
		
		//update case workflow context
		var caseGR = new GlideRecord(table);
		if ( caseGR.get(caseID) ) {
			var approvalContext = hr_ApprovalUtil.getApprovalSubflowsForCase(caseGR);
			if (approvalContext)
				new global.Workflow().broadcastEvent(approvalContext.sys_id, 'sn_hr_core.substitute_approvers');
		}
		
		//error message for either failed insertion or no workflow found 
		if ( (failedToAddApprovers.length &gt; 0) || !approvalContext) {
			response = {
				error: failedToAddApprovers.length &gt; 0 ? gs.getMessage('Insertion of following approval records failed {0}', failedToAddApprovers.toString()) : '' +
					approvalContext ? '' : gs.getMessage('No workflow found for case {0}', caseID)
			};
		}
	} else {
		response = {
			error: table ?  gs.getMessage('Table name is not set.') :  '' +
				caseID ?  gs.getMessage('HR case sys_id is not set.') : '' 
		};
	}

	return JSON.stringify(response);
};
]]&gt;&lt;/script&gt;
    &lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;
    &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
    &lt;sys_created_on&gt;2017-05-04 18:06:53&lt;/sys_created_on&gt;
    &lt;sys_id&gt;3f09e559536232003585c3c606dc34d6&lt;/sys_id&gt;
    &lt;sys_mod_count&gt;90&lt;/sys_mod_count&gt;
    &lt;sys_name&gt;hr_ApprovalUtil&lt;/sys_name&gt;
    &lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;
    &lt;sys_policy/&gt;
    &lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;
    &lt;sys_update_name&gt;sys_script_include_3f09e559536232003585c3c606dc34d6&lt;/sys_update_name&gt;
    &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
    &lt;sys_updated_on&gt;2019-09-17 00:28:39&lt;/sys_updated_on&gt;
  &lt;/sys_script_include&gt;
&lt;/record_update&gt;</payload><payload_hash>1914428507</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>true</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>dcdac92fdb2600103dd39235ca961958</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005787100000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_ApprovalUtil</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>3766092b58260010688cceab7e55b57d</update_guid><update_guid_history>3766092b58260010688cceab7e55b57d:1914428507,cefddd40e27273007bf95483ce1ddce3:-1493048355,cefddd406a7273007f50d2291a7bb5e0:-2069880772</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_script_include_d9f16db02f321200b3c9a310c18c959e</name><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;
  &lt;sys_script_include action="INSERT_OR_UPDATE"&gt;
    &lt;access&gt;public&lt;/access&gt;
    &lt;active&gt;true&lt;/active&gt;
    &lt;api_name&gt;sn_hr_core.hr_TemplateUtils&lt;/api_name&gt;
    &lt;caller_access&gt;2&lt;/caller_access&gt;
    &lt;client_callable&gt;false&lt;/client_callable&gt;
    &lt;description/&gt;
    &lt;name&gt;hr_TemplateUtils&lt;/name&gt;
    &lt;script&gt;&lt;![CDATA[var hr_TemplateUtils = Class.create();
hr_TemplateUtils.prototype = {
    initialize: function() {
		this._appliedTemplates = {};
    },

	/**
	*	applyBefore and applyAfter are intended to be used in conjunction with before and after business rules
	*	This is to prevent overwriting input changes from the user or email/producer/script
	**/

	/* Apply a template to a record only, attempt to prevent overwriting user changes
	* @param templateSysId : sys_id of the template to apply
	* @param record : Optional GlideRecord to apply the template to
	* @param overwrite : Optional Boolean Overwrite record values with template values
	*/
	applyBefore: function(templateSysId, record, overwrite) {
		// Setup template and record GlideRecords
		var templateGr = new GlideRecord("sn_hr_core_template");
		if (!templateGr.get(templateSysId) || !templateGr.active)
			return;
		if (!record)
			record = new GlideRecord(templateGr.getValue("table"));
		if (record.isValidField("template"))
			record.setValue("template", templateSysId);
		if (record.isValidField("template_invoked"))
			record.setValue("template_invoked", true);

		// Prepare fields to reset
		var templateData = this._getTemplateData(templateSysId);
		var recordData = {};
		for (var key in templateData) {
			// Do not reset booleans, as they always have a value
			var fieldElement = record.getElement(key);
			if (!fieldElement || fieldElement.getED().getInternalType() == "boolean")
				continue;
			if (record.getValue(key))
				recordData[key] = record.getValue(key);
		}

		// Set assigned_to
		var parentField = this._getLinkField(templateGr.getValue("link_element"), record);
		var assignedToValue = this._getAssignedTo(templateGr, record, parentField);
		if (assignedToValue)
			record.setValue("assigned_to", assignedToValue);

		var useAssignmentDate = this._getAssignmentDate(templateGr, record);

		// Set use_assignment_date
		if (useAssignmentDate)  {
			record.setValue("use_assignment_date", useAssignmentDate);

			// Set offset fields
			var offsetFields = this._getOffsetFields(templateGr, record);

			if (offsetFields) {
				record.setValue('date_offset_type', offsetFields.date_offset_type);
				record.setValue('date_offset_units', offsetFields.date_offset_units);
				record.setValue('date_offset_quantity', offsetFields.date_offset_quantity);
			}
		} else {
			// Set due_date
			var dueDate = this._getDueDate(templateGr, record, parentField);
			if (dueDate &amp;&amp; record.due_date !== null) 
				record.due_date.setDateNumericValue(dueDate);	
		}

		// Apply template to record
		var template = GlideTemplate.get(templateSysId);
		template.setApplyChildren(false);
		template.apply(record);

		// Reset user input changes
		if (!overwrite)
			for (var field in recordData)
				if (record.getValue(field) != recordData[field])
					record.setValue(field, recordData[field]);

		return record;
	},

	/* Apply the extensions of a template for a record (eg. children, siblings, template references)
	* @param templateSysId : sys_id of the template to apply
	* @param record : Optional GlideRecord the template was applied to
	*/
	applyAfter: function(templateSysId, record) {
		var templateGr = new GlideRecord("sn_hr_core_template");
		if (!templateGr.get(templateSysId) || !templateGr.active || !(record instanceof GlideRecord))
			return;
		var recordSysId = record.getUniqueValue();
		this._appliedTemplates[templateSysId] = recordSysId;

		// Adding checklist
		var templateValue = templateGr.getValue('template');
		if (!gs.nil(templateValue) &amp;&amp; templateValue.includes('hr_task_type=checklist'))
			this.applyChecklist(record);

		// Apply children templates
		if (templateGr.getValue("next_child"))
			this._applyChildren(record.getRecordClassName(), recordSysId, templateGr.getValue("next_child"));
	},

	/* Apply a template to a record
	* @param templateSysId : sys_id of the template to apply
	* @param record : Optional GlideRecord to apply the template to
	*/
	apply: function(templateSysId, record) {
		// Setup template and record GlideRecords
		var templateGr = new GlideRecord("sn_hr_core_template");
		if (!templateGr.get(templateSysId) || !templateGr.active)
			return;
		if (!record)
			record = new GlideRecord(templateGr.getValue("table"));
		if (record.isValidField("template"))
			record.setValue("template", templateSysId);
		if (record.isValidField("template_invoked"))
			record.setValue("template_invoked", true);

		// Set assigned to
		var parentField = this._getLinkField(templateGr.getValue("link_element"), record);
		var assignedToValue = this._getAssignedTo(templateGr, record, parentField);
		if (assignedToValue)
			record.setValue("assigned_to", assignedToValue);

		// Set  use_assignment_date
		var useAssignmentDate = this._getAssignmentDate(templateGr, record);

		if (useAssignmentDate) {
			record.setValue("use_assignment_date", useAssignmentDate);

			// Set offset fields
			var offsetFields = this._getOffsetFields(templateGr, record);

			if (offsetFields) {
				record.setValue('date_offset_type', offsetFields.date_offset_type);
				record.setValue('date_offset_units', offsetFields.date_offset_units);
				record.setValue('date_offset_quantity', offsetFields.date_offset_quantity);
			}
		} else {
			// Set due_date
			var dueDate = this._getDueDate(templateGr, record, parentField);
			if (dueDate &amp;&amp; record.due_date !== null)
				record.due_date.setDateNumericValue(dueDate);
		}

		// Apply template to record
		var template = GlideTemplate.get(templateSysId);
		template.setApplyChildren(false);
		template.apply(record);

		var recordUpdate = null;
		if (record.isNewRecord())
			recordUpdate = record.insert();
		else
			recordUpdate = record.update();
		//At any point, if we are unable to insert into a parent table, do not try to insert into the descendant tables.
		if (!recordUpdate)
			return;

		var recordSysId = record.getUniqueValue();
		this._appliedTemplates[templateSysId] = recordSysId;
		
		// Adding checklist
		if (templateGr.getValue('template').includes('hr_task_type=checklist'))
			this.applyChecklist(record);

		// Apply children templates
		if (templateGr.getValue("next_child"))
			this._applyChildren(record.getRecordClassName(), recordSysId, templateGr.getValue("next_child"));
	},

	/* Apply the children templates
	* @param parentTable : table name of the parent template created record
	* @param parentSysId : sys_id of the parent template created record
	* @param templateSysId : sys_id of the template to apply
	* @param isFutureTask: boolean flag indicates if the record being applied is for future, in that case, do not create the record.
	* @param grFuture: Gliderecord of sn_hr_le_future_todo table
	*/
	_applyChildren: function(parentTable, parentSysId, templateSysId, isFutureTask, grFuture) {
		// Detect looping templates - Key could exist while value is empty string or null
		if (this._appliedTemplates.hasOwnProperty(templateSysId))
			return this._appliedTemplates[templateSysId];

		// Add template sys_id to applied templates now to prevent circular dependencies in templates
		this._appliedTemplates[templateSysId] = null;

		// Setup template and record GlideRecords
		var templateGr = new GlideRecord("sn_hr_core_template");
		if (!templateGr.get(templateSysId))
			return;
		var record = new GlideRecord(templateGr.getValue("table"));

		// If this is the template for the selected HR Service, prevent business rule from reapplying template
		var templateHrServiceId = this._getTemplateProperty(templateSysId, "hr_service");
		if (templateHrServiceId) {
			var serviceGr = new GlideRecord("sn_hr_core_service");
			if (serviceGr.get(templateHrServiceId) &amp;&amp; serviceGr.getValue("template") == templateSysId) {
				if (record.isValidField("template_invoked"))
					record.setValue("template_invoked", true);
			}
		}

		// Set parent
		var parentField = this._getLinkField(templateGr.getValue("link_element"), record, parentTable);
		if (parentField)
			record.setValue(parentField, parentSysId);

		// Set assigned to
		var assignedToValue = this._getAssignedTo(templateGr, record, parentField);
		if (assignedToValue)
			record.setValue("assigned_to", assignedToValue);

		// Set use_assignment_date
		var useAssignmentDate = this._getAssignmentDate(templateGr, record);
		
		if (useAssignmentDate) {
			record.setValue("use_assignment_date", useAssignmentDate);
			
			// Set offset fields
			var offsetFields = this._getOffsetFields(templateGr, record);

			if (offsetFields) {
				record.setValue('date_offset_type', offsetFields.date_offset_type);
				record.setValue('date_offset_units', offsetFields.date_offset_units);
				record.setValue('date_offset_quantity', offsetFields.date_offset_quantity);
			}
		} else {
			// Set due_date
			var dueDate = this._getDueDate(templateGr, record, parentField);

			if (dueDate &amp;&amp; record.due_date !== null)
				record.due_date.setDateNumericValue(dueDate);
		}
		
		// Apply template to record
		var template = GlideTemplate.get(templateSysId);
		template.setApplyChildren(false);
		template.apply(record);
		
		// Set template reference
		if (templateGr.getValue("template_reference")) {
			var referenceSysId = this._applyChildren(parentTable, parentSysId, templateGr.getValue("template_reference"));

			var templateReferenceGr = new GlideRecord("sn_hr_core_template");
			templateReferenceGr.get(templateGr.getValue("template_reference"));

			var templateReferenceField = this._getLinkField(templateGr.getValue("template_reference_field"), record, templateReferenceGr.getValue("table"));
			if (templateReferenceField)
				record.setValue(templateReferenceField, referenceSysId);
		}
		var recordSysId = null;
		if(isFutureTask) {
			var futureJSON = {};
			futureJSON.parent = String(record.getValue(parentField));
			futureJSON.assigned_to_id = String(record.assigned_to);
			futureJSON.assigned_to = String(record.getDisplayValue('assigned_to'));
			futureJSON.assigned_to_display_name = String(record.getDisplayValue('assigned_to'));
			futureJSON.short_description = String(record.short_description);
			futureJSON.future = true;
			futureJSON.type = "task"; 
			futureJSON.sys_class_name =  String(templateGr.table); 
			futureJSON.active = true;
			futureJSON.number = "NA";
			
			// update the future task with the JSON.
			if(!gs.nil(grFuture)) {
				grFuture.future_json = new global.JSON().encode(futureJSON);
				grFuture.short_description = futureJSON.short_description;
				grFuture.assigned_to = futureJSON.assigned_to;
				grFuture.table_name = futureJSON.sys_class_name;
				grFuture.due_date = new GlideDateTime("2999-01-01 00:00:00");
				grFuture.update();
			}
		}
		else {
			recordSysId = record.insert();
			this._appliedTemplates[templateSysId] = recordSysId;
		} 
		
		// At any point, if we are unable to insert into a parent table, do not try to insert into the descendent tables.
		if (recordSysId) {
			// Adding checklist
			if (templateGr.getValue('template').includes('hr_task_type=checklist'))
				this.applyChecklist(record, templateSysId);
			
			// Apply children templates
			if (templateGr.getValue("next_child"))
				this._applyChildren(record.getRecordClassName(), recordSysId, templateGr.getValue("next_child"));

			// Apply sibling templates
			if (templateGr.getValue("next"))
				this._applyChildren(parentTable, parentSysId, templateGr.getValue("next"));
		}

		return recordSysId;
	},

	_getLinkField: function(linkField, recordGr, referenceTableName) {
		if (recordGr.isValidField(linkField))
			return linkField;

		if (!referenceTableName || !recordGr)
			return null;
		var elements = recordGr.getElements();
		for (var i = 0; i &lt; elements.length; i++)
			if (elements[i].getED().getInternalType() == "reference" &amp;&amp; new GlideTableHierarchy(elements[i].getReferenceTable()).getAllExtensions().indexOf(referenceTableName) != -1)
				return elements[i].getName();

		return null;
	},

	_getAssignedTo: function(templateGr, recordGr, parentField) {
		var assignedToField;
		// Prefer 'assign_to' field, but support legacy 'assigned_to_field'
		if (templateGr.getValue("assign_to")) {
			if (!parentField)
				parentField = "parent";
			assignedToField = parentField + "." + templateGr.getValue("assign_to");
		} else if (templateGr.getValue("assigned_to_field"))
			assignedToField = templateGr.getValue("assigned_to_field");
		if (!assignedToField)
			return null;

		// Determine fields to dot walk
		var fields = assignedToField.split(".");
		if (!fields.length || !fields[0])
			return null;

		// Iterate over list of fields to dot walk
		var assignedTo = recordGr[fields[0]];
		if (!assignedTo)
			return null;
		for (var i = 1; i &lt; fields.length; i++) {
			assignedTo = assignedTo[fields[i]];
			if (!assignedTo)
				return null;
		}

		return assignedTo;
	},

	_getDueDate: function(templateGr, recordGr, parentField) {
		var dueDateField;

		if (templateGr.use_assignment_date) 
			return null;

		if (templateGr.getValue("due_date_source")) {
			if (!parentField)
				parentField = "parent";
			dueDateField = parentField + "." + templateGr.getValue("due_date_source");
		}

		if (!dueDateField)
			return null;

		// Determine fields to dot walk
		var fields = dueDateField.split(".");
		if (!fields.length || !fields[0])
			return null;

		// Iterate over list of fields to dot walk
		var dueDate = recordGr[fields[0]];
		if (!dueDate)
			return null;
		for (var i = 1; i &lt; fields.length; i++) {
			dueDate = dueDate[fields[i]];
			if (!dueDate)
				return null;
		}
		// Apply date offsets, if applicable
		var dateOffsetType = templateGr.getValue("date_offset_type");
		var dateOffsetUnits = templateGr.getValue("date_offset_units");
		var dateOffsetQuantity = templateGr.getValue("date_offset_quantity");
		
		var gdt = new GlideDateTime();
		gdt.setDisplayValue(dueDate.getDisplayValue());
		
		if (dateOffsetType == "on")
			return gdt.getNumericValue();

		var offsetSign = 0;
		if (dateOffsetType == "before")
			offsetSign = -1;
		else if (dateOffsetType == "after")
			offsetSign = 1;
		else
			return null;

		var offsetTime = offsetSign * dateOffsetQuantity;
		
		if (dateOffsetUnits == "hours")
			gdt.addSeconds(offsetTime * 3600);
		else if (dateOffsetUnits == "days")
			gdt.addDaysLocalTime(offsetTime);
		else if (dateOffsetUnits == "weeks")
			gdt.addWeeksLocalTime(offsetTime);
		else if (dateOffsetUnits == "months")
			gdt.addMonthsLocalTime(offsetTime);
		return gdt.getNumericValue();
	},

	_getTemplateData: function(templateSysId) {
		var templateData = {};

		var templateGr = new GlideRecord("sn_hr_core_template");
		// validate if the template exists and active
		if (templateGr.get(templateSysId) &amp;&amp; templateGr.active &amp;&amp; !gs.nil(templateGr.getValue('template'))) {
			var templateFields = templateGr.getValue("template").split("^");
			for (var i = 0; i &lt; templateFields.length; i++) {
				var splitIndex = templateFields[i].indexOf("="); // Determine split to be first "=" to allow additional "="'s in field value
				if (splitIndex &gt; 0) {
					var field = templateFields[i].substring(0, splitIndex);
					var fieldValue = templateFields[i].substring(splitIndex + 1, templateFields[i].length);
					templateData[field] = { 
						value: fieldValue,
						displayValue: this._getTemplatesFieldDisplayValue(field,fieldValue,templateGr)
					};
				}
			}
		}
		return templateData;
	},
	
	_getTemplatesFieldDisplayValue: function(field,value,templateGr) {
		var templateForTable = String(templateGr.table);
		return new hr_CoreUtils().getFieldsDisplayValue(field,value,templateForTable);
	},

	_getTemplateProperty: function(templateSysId, field) {
		var templateGr = new GlideRecord('sn_hr_core_template');
		if (templateGr.get(templateSysId) &amp;&amp; templateGr.getValue("template")) {
			var templateFields = templateGr.getValue("template").split("^");
			for (var i = 0; i &lt; templateFields.length; i++) {
				var splitIndex = templateFields[i].indexOf("="); // Determine split to be first "=" to allow additional "="'s in field value
				if (splitIndex &gt; 0 &amp;&amp; templateFields[i].substring(0, splitIndex) == field) // Check if this is desired field
					return templateFields[i].substring(splitIndex + 1, templateFields[i].length); // return field value
			}
		}

		return null;
	},

	/* Return array of active COE table names
	*/
	process: function() {
		var tables = [];
		var inactiveTables = gs.getProperty("sn_hr_core.inactive_tables","").split(",");

		// Add non-inactive sn_hr_core_case tables
		var caseTables = hr.TABLE_CASE_EXTENSIONS;
		for (var i = 0; i &lt; caseTables.length; i++)
			if (inactiveTables.indexOf(caseTables[i]) == -1)
				tables.push(caseTables[i].toString());

		// Add non-inactive sn_hr_core_task tables
		var taskTables = hr.TABLE_TASK_EXTENSIONS;
		for (i = 0; i &lt; taskTables.length; i++)
			if (inactiveTables.indexOf(taskTables[i]) == -1)
				tables.push(taskTables[i].toString());

		return tables;
	},

	/*
	* @parm record: Record to which checklist will be applied.
	* @parm templateId: (optional) sys_id of the HR Template (eg. This is used for records without an hr_service field)
	*
	* Functionality: Applies a checklist to a record based on sn_hr_core_service or sn_hr_core_template. 
	*/
	applyChecklist : function(record, templateId) {
		// Table containing the reference to the checklist record
		var checklistLinkTable = (record.getValue("hr_service")) ? 'sn_hr_core_service' : 'sn_hr_core_template';
		// Field referencing the checklist record
		var checklistLinkField = (record.getValue('hr_service')) ? 'hr_service' : 'template';
		// sys_id of the record that references the checklist record
		var checklistLinkSysId = templateId || record.getValue(checklistLinkField);
		
		var checklistLinkTableGr = new GlideRecord(checklistLinkTable);
		if (checklistLinkTableGr.get(checklistLinkSysId)){
			var cl = new GlideRecord('checklist');
			cl.addQuery('table', checklistLinkTable);
			cl.addQuery('document', checklistLinkSysId);
			cl.query();
			if (cl.next()) {
				// Copy checklist and checklist items to record
				var newCl = new GlideRecord('checklist');
				newCl.setValue('table', record.getTableName());
				newCl.setValue('document', record.getUniqueValue());
				var checkListId = newCl.insert();
				if (gs.nil(checkListId))
					return;
				
				var newClItem = new GlideRecord('checklist_item');
				newClItem.addQuery('checklist', cl.getUniqueValue());
				newClItem.orderBy('order');
				newClItem.query();
				while (newClItem.next()) {
					newClItem.setValue('checklist', checkListId);
					newClItem.insert();
				}
			}
		}
	},
	_getAssignmentDate: function(templateGr, record) {
		
		if (templateGr.table &amp;&amp; templateGr.table == 'sn_hr_core_task') 
			return templateGr.use_assignment_date;
		return null;
	},
	_getOffsetFields: function(templateGr, record) {
		if (templateGr.table &amp;&amp; templateGr.table == 'sn_hr_core_task') {
				return {
					'date_offset_type': templateGr.date_offset_type, 
					'date_offset_units': templateGr.date_offset_units, 
					'date_offset_quantity': templateGr.date_offset_quantity
				   };
		}
		return null;
	},
	type: 'hr_TemplateUtils'
};]]&gt;&lt;/script&gt;
    &lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;
    &lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;
    &lt;sys_created_on&gt;2016-04-12 21:36:47&lt;/sys_created_on&gt;
    &lt;sys_id&gt;d9f16db02f321200b3c9a310c18c959e&lt;/sys_id&gt;
    &lt;sys_mod_count&gt;122&lt;/sys_mod_count&gt;
    &lt;sys_name&gt;hr_TemplateUtils&lt;/sys_name&gt;
    &lt;sys_package display_value="Human Resources: Core" source="sn_hr_core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_package&gt;
    &lt;sys_policy/&gt;
    &lt;sys_scope display_value="Human Resources: Core"&gt;d4ac3fff5b311200a4656ede91f91af2&lt;/sys_scope&gt;
    &lt;sys_update_name&gt;sys_script_include_d9f16db02f321200b3c9a310c18c959e&lt;/sys_update_name&gt;
    &lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;
    &lt;sys_updated_on&gt;2019-09-18 15:25:41&lt;/sys_updated_on&gt;
  &lt;/sys_script_include&gt;
&lt;/record_update&gt;</payload><payload_hash>-497188619</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>true</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>dcdac92fdb2600103dd39235ca96195b</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16c005790570000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table/><target_name>hr_TemplateUtils</target_name><type>Script Include</type><update_domain>global</update_domain><update_guid>6366092be32600103d2dc5cc8e441443</update_guid><update_guid_history>6366092be32600103d2dc5cc8e441443:-497188619,befd1180b172730020c5d1213c45633b:464180274,f6fd11802772730061dd9a0f8f4f3339:-1974162607</update_guid_history><update_set/><view/></sys_update_xml><sys_update_xml action="INSERT_OR_UPDATE"><action>INSERT_OR_UPDATE</action><application display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</application><category>customer</category><comments/><name>sys_security_acl_role_7d2162b34f2a3300ad404a10a310c788</name><payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl_role"><sys_security_acl_role action="INSERT_OR_UPDATE"><sys_class_name>sys_security_acl_role</sys_class_name><sys_created_by>tim_deniston</sys_created_by><sys_created_on>2019-07-17 00:45:34</sys_created_on><sys_id>7d2162b34f2a3300ad404a10a310c788</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sn_hr_core_nps_score.sn_hr_core.hr_nps_score_user</sys_name><sys_package display_value="Human Resources: Core" source="sn_hr_core">d4ac3fff5b311200a4656ede91f91af2</sys_package><sys_policy/><sys_scope display_value="Human Resources: Core">d4ac3fff5b311200a4656ede91f91af2</sys_scope><sys_security_acl display_value="sn_hr_core_nps_score">fd2162b34f2a3300ad404a10a310c784</sys_security_acl><sys_update_name>sys_security_acl_role_7d2162b34f2a3300ad404a10a310c788</sys_update_name><sys_updated_by>tim_deniston</sys_updated_by><sys_updated_on>2019-07-17 00:45:34</sys_updated_on><sys_user_role display_value="sn_hr_core.hr_nps_score_user" name="sn_hr_core.hr_nps_score_user">c1216a334f2a3300ad404a10a310c71d</sys_user_role><transaction_id/></sys_security_acl_role></record_update>]]></payload><payload_hash>-761153339</payload_hash><remote_update_set display_value="HR Core test">dcda892fdb2600103dd39235ca9619d6</remote_update_set><replace_on_upgrade>false</replace_on_upgrade><sys_created_by>admin</sys_created_by><sys_created_on>2020-01-30 20:01:03</sys_created_on><sys_id>dcdac92fdb2600103dd39235ca96195e</sys_id><sys_mod_count>0</sys_mod_count><sys_recorded_at>16bfd64425b0000001</sys_recorded_at><sys_updated_by>admin</sys_updated_by><sys_updated_on>2020-01-30 20:01:03</sys_updated_on><table>sn_hr_core_nps_score</table><target_name>sn_hr_core_nps_score.sn_hr_core.hr_nps_score_user</target_name><type>Access Roles</type><update_domain>global</update_domain><update_guid>bd2162b30a2a3300bb128b13ba90828b</update_guid><update_guid_history>bd2162b30a2a3300bb128b13ba90828b:-761153339</update_guid_history><update_set/><view/></sys_update_xml></unload>